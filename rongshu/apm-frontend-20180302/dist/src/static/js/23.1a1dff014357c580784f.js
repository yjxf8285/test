/*! 2018-3-2 author:liuxiaofan */
webpackJsonp([23],{569:function(e,t,a){a(716);var i=a(54)(a(683),a(732),"data-v-c4ec3722",null);e.exports=i.exports},606:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(35);t.default={data:function(){return{loading:!1,loadingInstance:null}},mounted:function(){this.$refs.loadingContainer||console.warn("你使用了loadingMixin，但没有指定ref=loadingContainer的DOM节点，系统会自动在body上启用加载效果",this)},watch:{loading:function(e){e?this.loadingInstance=i.Loading.service({target:this.$refs.loadingContainer}):this.loadingInstance&&(this.loadingInstance.close(),this.loadingInstance=null)}}}},607:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{needReload:!0}},props:{options:{type:Object,default:{}},selected:{type:Boolean,default:!1}},watch:{options:{deep:!0,handler:function(e){console.log(e),this.needReload=!0,this.selected&&this._reload()}},selected:function(e){e&&this._reload()}},methods:{_reload:function(){this.needReload&&(this.reload(),this.needReload=!1)}}}},608:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{chartColors:["#a8d96f","#85cae6","#fab421","#f38211","#49a778","#e66a3e","#9d6858","#83bc1c","#4d6e83","#bac1c8"]}},created:function(){$(window).on("resize",this.change)},destroyed:function(){$(window).off("resize",this.change)},methods:{change:function(){this.chart&&this.chart.resize()}}}},610:function(e,t,a){a(614);var i=a(54)(a(611),a(615),"data-v-79cbf3c8",null);e.exports=i.exports},611:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{headerHeight:50}},props:{showBorder:{required:!1,default:!1},showHeader:{required:!1,default:!1},title:{default:""},isEmpty:{default:!0},isLoading:{default:!1},height:{default:350,required:!1}}}},613:function(e,t,a){t=e.exports=a(566)(),t.push([e.i,".chart-container[data-v-79cbf3c8]{position:relative;border:0 solid;margin-bottom:16px;border-radius:2px;width:100%;height:100%}.chart-title[data-v-79cbf3c8]{width:100%;padding:0 16px;box-sizing:border-box;font-size:14px;color:#666!important}.chart-title .title-icon[data-v-79cbf3c8]{font-size:18px;margin-right:12px}.chart-placeholder[data-v-79cbf3c8]{position:relative;z-index:1;width:100%;height:100%;text-align:center}.chart-placeholder span[data-v-79cbf3c8]{position:absolute;top:50%;margin-top:-7px}.chart-header-hide[data-v-79cbf3c8]{display:none}.chart-border-hide[data-v-79cbf3c8]{border:0}",""])},614:function(e,t,a){var i=a(613);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(567)("a7f96c48",i,!0)},615:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chart-container theme-backgroung-color-white theme-border-color-base",class:{"chart-border-hide":!e.showBorder},style:{height:e.height+"px"}},[a("div",{staticClass:"chart-title theme-font-color-base theme-background-color-normal",class:{"chart-header-hide":!e.showHeader},style:{height:e.headerHeight+"px",lineHeight:e.headerHeight+"px"}},[a("i",{staticClass:"title-icon icon ion-podium"}),e._v("\n    "+e._s(e.title)+"\n  ")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isEmpty&&!e.isLoading,expression:"isEmpty && !isLoading"}],staticClass:"chart-placeholder theme-background-color-normal-1",style:{height:(e.showHeader?e.height-e.headerHeight:e.height)+"px"}},[a("span",{staticClass:"theme-font-color-weaken"},[e._v("暂无数据")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEmpty,expression:"!isEmpty"}],staticClass:"chart-content",style:{height:(e.showHeader?e.height-e.headerHeight:e.height)+"px"}},[e._t("default")],2)])},staticRenderFns:[]}},658:function(e,t,a){a(675);var i=a(54)(a(660),a(678),"data-v-9e92d55c",null);e.exports=i.exports},660:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(91),o=i(n),r=a(608),s=i(r),l=a(610),c=i(l);t.default={name:"chart-stacked-bar",mixins:[s.default],components:{chartContainer:c.default},data:function(){return{chart:null,localOptions:{title:{text:this.title},grid:{left:"5%",right:"5%",bottom:20,top:40},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}%",confine:!0},legend:{bottom:0,data:[]},calculable:!0,xAxis:[{type:"value"}],yAxis:[{type:"category",data:[]}],series:[]},legends:[],selectedLegends:{}}},props:{title:String,height:{required:!1,default:200},showHeader:{required:!1,default:!0},showBorder:{required:!1,default:!0},yAxisCategoryText:{required:!0,default:"耗时"},stackText:{required:!1,default:"time"},data:{type:Array,required:!0},loading:!1,options:Object,isAutoHeight:!1},watch:{data:{deep:!0,handler:function(e){this.renderChart()}},loading:function(e){e?this.chart.showLoading({color:"#cccccc",text:" "}):this.chart.hideLoading()}},mounted:function(){var e=this;e.chart=echarts.init(e.$refs.chart),e.renderChart(),e.chart.on("legendselectchanged",function(t){e.selectedLegends=t.selected})},methods:{renderChart:function(){var e=this;if(console.log(this),this.localOptions.series=[],this.localOptions.legend.data=[],this.legends=[],this.selectedLegends={},!_.isEmpty(this.data)){this.localOptions.yAxis[0].data=[this.yAxisCategoryText];var t=0;this.data.forEach(function(a){t+=a.name.length,e.localOptions.series.push({name:a.name,type:"bar",stack:e.stackText,itemStyle:{normal:{label:{show:!1,position:"insideRight"}}},data:[a.value]}),e.localOptions.legend.data.push(a.name)}),this.localOptions.legend.show=!1,this.localOptions.legend.formatter=t>200?function(e){return echarts.format.truncateText(e,80,"12px Microsoft Yahei","…")}:null,this.localOptions.legend.tooltip={show:t>200},this.localOptions.legend.top="bottom",this.chart.setOption((0,o.default)({color:this.chartColors},this.localOptions,this.options),!0);var a=this.chart.getOption(),i=a.color;this.legends=a.series.map(function(t,a){return e.selectedLegends[t.name]=!0,{color:i[a],name:t.name}}),this.$nextTick(function(){e.chart.resize()})}},selectLegend:function(e,t){this.chart.dispatchAction({type:"legendToggleSelect",name:e.name})}}}},673:function(e,t,a){t=e.exports=a(566)(),t.push([e.i,".chart[data-v-9e92d55c]{width:100%;height:100%}.chart-legends[data-v-9e92d55c]{text-align:center}.chart-legends li[data-v-9e92d55c]{display:inline-block;padding-left:5px;padding-bottom:5px;position:relative;cursor:pointer}.chart-legends li i[data-v-9e92d55c]{float:left;width:20px;line-height:16px;height:16px;border-radius:5px}.chart-legends li i.selected[data-v-9e92d55c]{background-color:#ccc!important}.chart-legends li span[data-v-9e92d55c]{display:inline-block;margin-left:4px;line-height:18px}",""])},675:function(e,t,a){var i=a(673);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(567)("383ab79a",i,!0)},678:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chart-stacked-bar"},[a("chart-container",{attrs:{height:e.height,"show-header":e.showHeader,"show-border":e.showBorder,title:e.title,isLoading:e.loading,"is-empty":!(e.data&&e.data.length),isAutoHeight:e.isAutoHeight}},[a("div",{ref:"chart",staticClass:"chart"})]),e._v(" "),a("ul",{staticClass:"chart-legends"},e._l(e.legends,function(t,i){return a("li",{key:i},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(a){e.selectLegend(t,i)}}},[a("i",{class:{selected:!e.selectedLegends[t.name]},style:{backgroundColor:t.color}}),e._v(" "),a("span",[e._v(e._s(t.name))])])])}))],1)},staticRenderFns:[]}},683:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(658),o=i(n),r=a(606),s=i(r),l=a(607),c=i(l),d=a(35);t.default={mixins:[s.default,c.default],data:function(){return{legentMaxLength:50,totalTime:0,detailData:[]}},computed:{chartData:function(){var e=this,t=[],a={name:"其他",value:0};return e.totalTime=0,e.detailData&&e.detailData.length>0&&(e.detailData.forEach(function(i,n){n<e.legentMaxLength?t.push({name:i.name,value:i.timeSpend}):a.value+=i.timeSpend,e.totalTime+=i.timeSpend}),a.value>0&&t.unshift(a),t=_.sortBy(t,["value"]).reverse(),t.forEach(function(t){t.value=e.totalTime>0?Math.floor(t.value/e.totalTime*1e4)/100:100})),t}},components:{"el-table":d.Table,"el-table-column":d.TableColumn,StackedBarChart:o.default},methods:{reload:function(){this.getComponentSnapshotDetail()},getComponentSnapshotDetail:function(){var e=this;e.loading=!0,e.api.getComponentSnapshotDetail({data:{condition:e.options},success:function(t){if(0===t.code){var a=t.data;a&&a.length>0&&(e.detailData=_.sortBy(a,["timeSpend"]).reverse())}},complete:function(){e.loading=!1}})}}}},703:function(e,t,a){t=e.exports=a(566)(),t.push([e.i,".table-box[data-v-c4ec3722]{height:100%;overflow:auto;position:relative;padding:24px}",""])},716:function(e,t,a){var i=a(703);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(567)("5658cb38",i,!0)},732:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"loadingContainer",staticClass:"table-box"},[a("StackedBarChart",{attrs:{height:150,"show-header":!1,"show-border":!1,yAxisCategoryText:"耗时",data:e.chartData}}),e._v(" "),a("el-table",{staticClass:"mt20",staticStyle:{width:"100%"},attrs:{data:e.detailData,stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"组件详情"}}),e._v(" "),a("el-table-column",{attrs:{prop:"callCount",label:"调用次数",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"timeSpend",label:"自身耗时(ms)",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"占比",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.totalTime>0?Math.floor(t.row.timeSpend/e.totalTime*1e4)/100:100)+"%\n      ")]}}])})],1)],1)},staticRenderFns:[]}}});