/*! 2018-3-2 author:liuxiaofan */
webpackJsonp([1],{215:function(t,e,a){a(870);var n=a(54)(a(788),a(921),"data-v-73960f44",null);t.exports=n.exports},608:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{chartColors:["#a8d96f","#85cae6","#fab421","#f38211","#49a778","#e66a3e","#9d6858","#83bc1c","#4d6e83","#bac1c8"]}},created:function(){$(window).on("resize",this.change)},destroyed:function(){$(window).off("resize",this.change)},methods:{change:function(){this.chart&&this.chart.resize()}}}},609:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(140),i=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default={data:function(){return{topBarQueryData:{}}},props:{},watch:{},computed:{appId:function(){return this.topBarQueryData.system.id},startTime:function(){return Number(this.topBarQueryData.time.startTime)},endTime:function(){return i.default.cutEndTime(Number(this.topBarQueryData.time.endTime))},aggrInterval:function(){return i.default.intervalToGranularity(this.endTime-this.startTime)},interval:function(){return""}},methods:{}}},612:function(t,e,a){"use strict";function n(t){var e,a;this.promise=new t(function(t,n){if(void 0!==e||void 0!==a)throw TypeError("Bad Promise constructor");e=t,a=n}),this.resolve=i(e),this.reject=i(a)}var i=a(203);t.exports.f=function(t){return new n(t)}},632:function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},633:function(t,e,a){var n=a(55),i=a(66),r=a(612);t.exports=function(t,e){if(n(t),i(e)&&e.constructor===t)return e;var a=r.f(t);return(0,a.resolve)(e),a.promise}},634:function(t,e,a){var n=a(55),i=a(203),r=a(25)("species");t.exports=function(t,e){var a,s=n(t).constructor;return void 0===s||void 0==(a=n(s)[r])?e:i(a)}},635:function(t,e,a){var n,i,r,s=a(141),o=a(665),c=a(206),l=a(142),u=a(36),d=u.process,p=u.setImmediate,h=u.clearImmediate,f=u.MessageChannel,m=u.Dispatch,v=0,b={},g=function(){var t=+this;if(b.hasOwnProperty(t)){var e=b[t];delete b[t],e()}},y=function(t){g.call(t.data)};p&&h||(p=function(t){for(var e=[],a=1;arguments.length>a;)e.push(arguments[a++]);return b[++v]=function(){o("function"==typeof t?t:Function(t),e)},n(v),v},h=function(t){delete b[t]},"process"==a(92)(d)?n=function(t){d.nextTick(s(g,t,1))}:m&&m.now?n=function(t){m.now(s(g,t,1))}:f?(i=new f,r=i.port2,i.port1.onmessage=y,n=s(r.postMessage,r,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(n=function(t){u.postMessage(t+"","*")},u.addEventListener("message",y,!1)):n="onreadystatechange"in l("script")?function(t){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),g.call(t)}}:function(t){setTimeout(s(g,t,1),0)}),t.exports={set:p,clear:h}},659:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(201),r=n(i),s=a(140),o=n(s),c=a(608),l=n(c);e.default={mixins:[l.default],props:{optionData:{type:Object,default:{}}},data:function(){return{defOption:{}}},computed:{noData:function(){return(0,r.default)(this.optionData).length<=0}},watch:{optionData:{deep:!0,handler:function(t){this.resetDefData(),this.renderChart()}}},mounted:function(){},methods:{resetDefData:function(){this.defOption={color:this.chartColors,legend:{orient:"vertical",x:"200",y:"middle",data:[],formatter:function(t){return t}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"容忍度",type:"pie",radius:["50%","70%"],center:["40%","50%"],label:{normal:{show:!1,position:"center"},emphasis:{show:!1,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:[]}]}},renderChart:function(){this.chart||(this.chart=echarts.init(this.$refs.chart)),this.chart.resize();var t=o.default.extend({},this.defOption,this.optionData);this.chart.setOption(t,!0),0===t.series[0].data.length&&this.chart.clear()}}}},661:function(t,e,a){t.exports={default:a(662),__esModule:!0}},662:function(t,e,a){a(210),a(95),a(145),a(669),a(670),a(671),t.exports=a(24).Promise},663:function(t,e){t.exports=function(t,e,a,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(a+": incorrect invocation!");return t}},664:function(t,e,a){var n=a(141),i=a(208),r=a(207),s=a(55),o=a(143),c=a(144),l={},u={},e=t.exports=function(t,e,a,d,p){var h,f,m,v,b=p?function(){return t}:c(t),g=n(a,d,e?2:1),y=0;if("function"!=typeof b)throw TypeError(t+" is not iterable!");if(r(b)){for(h=o(t.length);h>y;y++)if((v=e?g(s(f=t[y])[0],f[1]):g(t[y]))===l||v===u)return v}else for(m=b.call(t);!(f=m.next()).done;)if((v=i(m,g,f.value,e))===l||v===u)return v};e.BREAK=l,e.RETURN=u},665:function(t,e){t.exports=function(t,e,a){var n=void 0===a;switch(e.length){case 0:return n?t():t.call(a);case 1:return n?t(e[0]):t.call(a,e[0]);case 2:return n?t(e[0],e[1]):t.call(a,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(a,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(a,e[0],e[1],e[2],e[3])}return t.apply(a,e)}},666:function(t,e,a){var n=a(36),i=a(635).set,r=n.MutationObserver||n.WebKitMutationObserver,s=n.process,o=n.Promise,c="process"==a(92)(s);t.exports=function(){var t,e,a,l=function(){var n,i;for(c&&(n=s.domain)&&n.exit();t;){i=t.fn,t=t.next;try{i()}catch(n){throw t?a():e=void 0,n}}e=void 0,n&&n.enter()};if(c)a=function(){s.nextTick(l)};else if(!r||n.navigator&&n.navigator.standalone)if(o&&o.resolve){var u=o.resolve();a=function(){u.then(l)}}else a=function(){i.call(n,l)};else{var d=!0,p=document.createTextNode("");new r(l).observe(p,{characterData:!0}),a=function(){p.data=d=!d}}return function(n){var i={fn:n,next:void 0};e&&(e.next=i),t||(t=i,a()),e=i}}},667:function(t,e,a){var n=a(57);t.exports=function(t,e,a){for(var i in e)a&&t[i]?t[i]=e[i]:n(t,i,e[i]);return t}},668:function(t,e,a){"use strict";var n=a(36),i=a(24),r=a(39),s=a(56),o=a(25)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:n[t];s&&e&&!e[o]&&r.f(e,o,{configurable:!0,get:function(){return this}})}},669:function(t,e,a){"use strict";var n,i,r,s,o=a(93),c=a(36),l=a(141),u=a(205),d=a(65),p=a(66),h=a(203),f=a(663),m=a(664),v=a(634),b=a(635).set,g=a(666)(),y=a(612),_=a(632),x=a(633),D=c.TypeError,T=c.process,S=c.Promise,C="process"==u(T),w=function(){},A=i=y.f,N=!!function(){try{var t=S.resolve(1),e=(t.constructor={})[a(25)("species")]=function(t){t(w,w)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(w)instanceof e}catch(t){}}(),O=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},q=function(t,e){if(!t._n){t._n=!0;var a=t._c;g(function(){for(var n=t._v,i=1==t._s,r=0;a.length>r;)!function(e){var a,r,s=i?e.ok:e.fail,o=e.resolve,c=e.reject,l=e.domain;try{s?(i||(2==t._h&&P(t),t._h=1),!0===s?a=n:(l&&l.enter(),a=s(n),l&&l.exit()),a===e.promise?c(D("Promise-chain cycle")):(r=O(a))?r.call(a,o,c):o(a)):c(n)}catch(t){c(t)}}(a[r++]);t._c=[],t._n=!1,e&&!t._h&&I(t)})}},I=function(t){b.call(c,function(){var e,a,n,i=t._v,r=L(t);if(r&&(e=_(function(){C?T.emit("unhandledRejection",i,t):(a=c.onunhandledrejection)?a({promise:t,reason:i}):(n=c.console)&&n.error&&n.error("Unhandled promise rejection",i)}),t._h=C||L(t)?2:1),t._a=void 0,r&&e.e)throw e.v})},L=function(t){return 1!==t._h&&0===(t._a||t._c).length},P=function(t){b.call(c,function(){var e;C?T.emit("rejectionHandled",t):(e=c.onrejectionhandled)&&e({promise:t,reason:t._v})})},j=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),q(e,!0))},k=function(t){var e,a=this;if(!a._d){a._d=!0,a=a._w||a;try{if(a===t)throw D("Promise can't be resolved itself");(e=O(t))?g(function(){var n={_w:a,_d:!1};try{e.call(t,l(k,n,1),l(j,n,1))}catch(t){j.call(n,t)}}):(a._v=t,a._s=1,q(a,!1))}catch(t){j.call({_w:a,_d:!1},t)}}};N||(S=function(t){f(this,S,"Promise","_h"),h(t),n.call(this);try{t(l(k,this,1),l(j,this,1))}catch(t){j.call(this,t)}},n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=a(667)(S.prototype,{then:function(t,e){var a=A(v(this,S));return a.ok="function"!=typeof t||t,a.fail="function"==typeof e&&e,a.domain=C?T.domain:void 0,this._c.push(a),this._a&&this._a.push(a),this._s&&q(this,!1),a.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new n;this.promise=t,this.resolve=l(k,t,1),this.reject=l(j,t,1)},y.f=A=function(t){return t===S||t===s?new r(t):i(t)}),d(d.G+d.W+d.F*!N,{Promise:S}),a(94)(S,"Promise"),a(668)("Promise"),s=a(24).Promise,d(d.S+d.F*!N,"Promise",{reject:function(t){var e=A(this);return(0,e.reject)(t),e.promise}}),d(d.S+d.F*(o||!N),"Promise",{resolve:function(t){return x(o&&this===s?S:this,t)}}),d(d.S+d.F*!(N&&a(209)(function(t){S.all(t).catch(w)})),"Promise",{all:function(t){var e=this,a=A(e),n=a.resolve,i=a.reject,r=_(function(){var a=[],r=0,s=1;m(t,!1,function(t){var o=r++,c=!1;a.push(void 0),s++,e.resolve(t).then(function(t){c||(c=!0,a[o]=t,--s||n(a))},i)}),--s||n(a)});return r.e&&i(r.v),a.promise},race:function(t){var e=this,a=A(e),n=a.reject,i=_(function(){m(t,!1,function(t){e.resolve(t).then(a.resolve,n)})});return i.e&&n(i.v),a.promise}})},670:function(t,e,a){"use strict";var n=a(65),i=a(24),r=a(36),s=a(634),o=a(633);n(n.P+n.R,"Promise",{finally:function(t){var e=s(this,i.Promise||r.Promise),a="function"==typeof t;return this.then(a?function(a){return o(e,t()).then(function(){return a})}:t,a?function(a){return o(e,t()).then(function(){throw a})}:t)}})},671:function(t,e,a){"use strict";var n=a(65),i=a(612),r=a(632);n(n.S,"Promise",{try:function(t){var e=i.f(this),a=r(t);return(a.e?e.reject:e.resolve)(a.v),e.promise}})},672:function(t,e,a){e=t.exports=a(566)(),e.push([t.i,".chart[data-v-3ab9747e]{height:100%;display:flex;align-items:center;justify-content:center}",""])},674:function(t,e,a){var n=a(672);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(567)("2f744798",n,!0)},676:function(t,e,a){a(674);var n=a(54)(a(659),a(677),"data-v-3ab9747e",null);t.exports=n.exports},677:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"chart",staticClass:"chart"},[a("i",{staticClass:"el-icon-loading"})])},staticRenderFns:[]}},679:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(201),r=n(i),s=a(140),o=n(s),c=a(608),l=n(c);e.default={name:"chart-area-graph",mixins:[l.default],props:{optionData:{type:Object,default:{}}},data:function(){return{defOption:{}}},computed:{noData:function(){return(0,r.default)(this.optionData).length<=0}},watch:{optionData:{deep:!0,handler:function(t){this.resetDefData(),this.renderChart()}}},methods:{resetDefData:function(){this.defOption={noDataLoadingOption:{text:"暂无数据",effect:"bubble",effectOption:{effect:{n:0}}},tooltip:{trigger:"axis"},color:{type:"radial",x:.5,y:.5,r:.5,colorStops:[{offset:0,color:"red"},{offset:1,color:"blue"}],globalCoord:!1},grid:{top:"5",left:"10",right:"15",bottom:"8",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",splitLine:{show:!1}},series:[{name:"",type:"line",smooth:!0,sampling:"average",hoverAnimation:!0,itemStyle:{normal:{color:this.chartColors[0]}},areaStyle:{normal:{}},data:[]}]}},renderChart:function(){if(this.chart||(this.chart=echarts.init(this.$refs.chart)),this.noData)this.chart.clear();else{this.chart.resize();var t=o.default.extend(this.defOption,this.optionData);this.chart.setOption(t,!0)}}}}},700:function(t,e,a){e=t.exports=a(566)(),e.push([t.i,".chart[data-v-65382739]{height:100%;display:flex;align-items:center;justify-content:center}",""])},713:function(t,e,a){var n=a(700);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(567)("d97534de",n,!0)},718:function(t,e,a){a(713);var n=a(54)(a(679),a(729),"data-v-65382739",null);t.exports=n.exports},729:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"chart",staticClass:"chart"},[a("i",{staticClass:"el-icon-loading"})])},staticRenderFns:[]}},734:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(201),r=n(i),s=a(140),o=n(s),c=a(608),l=n(c);e.default={mixins:[l.default],props:{optionData:{type:Object,default:{}}},data:function(){return{defOption:{}}},computed:{noData:function(){return(0,r.default)(this.optionData).length<=0}},watch:{optionData:{deep:!0,handler:function(t){this.resetDefData(),this.renderChart()}}},mounted:function(){},methods:{resetDefData:function(){this.defOption={color:this.chartColors,tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{bottom:"10",data:[]},grid:{top:30,left:80,right:70},xAxis:[{type:"category",data:[],axisPointer:{type:"shadow"}}],yAxis:[{type:"value"}],series:[{name:"",type:"bar",data:[]}]}},renderChart:function(){this.chart||(this.chart=echarts.init(this.$refs.chart));var t=this.optionData.xAxis[0].data.length;this.chart.resize(),this.optionData.series.forEach(function(t){for(var e in t.data)"NaN"===t.data[e]&&(t.data[e]=0)});var e=o.default.extend({},this.defOption,this.optionData);this.chart.setOption(e,!0),0===t&&this.chart.clear()}}}},738:function(t,e,a){e=t.exports=a(566)(),e.push([t.i,".chart[data-v-11d02004]{height:100%;display:flex;align-items:center;justify-content:center}",""])},740:function(t,e,a){var n=a(738);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(567)("5c741017",n,!0)},743:function(t,e,a){a(740);var n=a(54)(a(734),a(745),"data-v-11d02004",null);t.exports=n.exports},745:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"chart",staticClass:"chart"},[a("i",{staticClass:"el-icon-loading"})])},staticRenderFns:[]}},788:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(661),r=n(i),s=a(146),o=n(s),c=a(140),l=n(c),u=a(743),d=n(u),p=a(718),h=n(p),f=a(676),m=n(f),v=a(35),b=a(609),g=n(b);e.default={name:"error",mixins:[g.default],components:{ChartPie:m.default,ChartAreaGraph:h.default,ChartLineBar:d.default,"el-tabs":v.Tabs,"el-tab-pane":v.TabPane,"el-input":v.Input,"el-pagination":v.Pagination,"el-table":v.Table,"el-tooltip":v.Tooltip,"el-table-column":v.TableColumn,"el-button":v.Button},mounted:function(){},data:function(){return{topNListloading:!0,activeName:"instances",getDatabaseTopNList:[],metricName:"instances",metricNameCH:"数据库实例",topNsortField:"avg_response_time",topNsortOrder:"desc",searchName:"",snapshotSqlData:[],snapshotSqlDataTotal:0,snapshotSqlloading:!0,pageIndex:0,sqlSortField:"finishTime",sqlSortOrder:"desc",topNErrorOption:{},errorSectionsOption:{},errorSectionsOverview:{errorNum:0,errorPerMinute:0},diagramSectionSummaryOptionData:{},databaseTrendOptionData:{},databaseTrendTitalInfo:{sqlElapsedAvg:"-",throughput:"-"},topBarData:[],fiterBarData:[],filterListData:[]}},computed:{responsetime:function(){return this.fiterBarData.find(function(t){return"responsetime"===t.itemId})&&this.fiterBarData.find(function(t){return"responsetime"===t.itemId}).infoData.map(function(t){return t.value})||[]},callerArray:function(){return this.fiterBarData.find(function(t){return"callers"===t.itemId})&&this.fiterBarData.find(function(t){return"callers"===t.itemId}).infoData.map(function(t){return t.value})||[]},databaseAddressArray:function(){return this.fiterBarData.find(function(t){return"datbases"===t.itemId})&&this.fiterBarData.find(function(t){return"datbases"===t.itemId}).infoData.map(function(t){return t.value})||[]},operationArray:function(){return this.fiterBarData.find(function(t){return"operations"===t.itemId})&&this.fiterBarData.find(function(t){return"operations"===t.itemId}).infoData.map(function(t){return t.value})||[]}},methods:{topbarChange:function(t){this.topBarQueryData=t,this.getErrorSummaryData(),this.getData()},filterbarChange:function(t){this.fiterBarData=t,this.getData()},handleSearchsnapshotSql:function(){this.getDatabasesnapshotSqlListData()},handleCurrentChange:function(t){this.pageIndex=t-1,this.getDatabasesnapshotSqlListData()},getData:function(){this.getDatabasetopn(),this.getDatabasesnapshotSqlListData(),this.getDatabaseTrendData(),this.getDatabasesdiagramSectionSummaryData()},goToNextPage:function(t,e){this.$root.eventBus.openTab({name:t,options:{traceId:t,appId:this.$root.eventBus.getCurSystem().id||"",queryStr:e}})},tabClick:function(t){switch(this.metricName=t.name,t.name){case"instances":this.metricNameCH="数据库实例";break;case"operations":this.metricNameCH="操作命令";break;case"callers":this.metricNameCH="调用者"}this.getDatabasetopn()},topNsortChange:function(t){switch(t.prop){case"timeSpentRatio":this.topNsortField="sum_response_time";break;case"avgResponseTime":this.topNsortField="avg_response_time";break;case"requestCount":this.topNsortField="call_times";break;case"throughput":this.topNsortField="sum_throughput"}switch(t.order){case"ascending":this.topNsortOrder="asc";break;case"descending":this.topNsortOrder="desc"}this.getDatabasetopn()},snapshotSqlSortChange:function(t){switch(this.sqlSortField=t.prop||"finishTime",t.prop){case"occurTime":this.sqlSortField="finishTime";break;case"elapsedTime":this.sqlSortField="selfElapsed"}switch(t.order){case"ascending":this.sqlSortOrder="asc";break;case"descending":this.sqlSortOrder="desc"}this.getDatabasesnapshotSqlListData()},getDatabasetopn:function(){var t=this;this.topNListloading=!0,this.api.getDatabasetopn({data:{condition:{startTime:this.startTime,endTime:this.endTime,appId:this.appId,minResponseTime:this.responsetime[0],maxResponseTime:this.responsetime[1],databaseTypeArray:this.databaseAddressArray,operationArray:this.operationArray,callerArray:this.callerArray},sort:{field:this.topNsortField,order:this.topNsortOrder},topN:5,metricName:this.metricName}}).then(function(e){0===e.code&&(t.getDatabaseTopNList=e.data.unitList||[])}).always(function(e){t.topNListloading=!1})},getDatabaseTrendData:function(){var t=this;this.api.getDatabaseTrend({data:{condition:{startTime:this.startTime,endTime:this.endTime,appId:this.appId,interval:this.interval,aggrInterval:this.aggrInterval,minResponseTime:this.responsetime[0],maxResponseTime:this.responsetime[1],databaseTypeArray:this.databaseAddressArray,operationArray:this.operationArray,callerArray:this.callerArray}}}).then(function(e){if(0===e.code){var a=e.data.databaseSqlElapsedTrendDataList||[],n=e.data.databaseThroughputTrendDataList||[];t.databaseTrendTitalInfo={sqlElapsedAvg:e.data.sqlElapsedAvg,throughput:e.data.throughput},t.databaseTrendOptionData={legend:{data:["吞吐率","平均SQL耗时"]},xAxis:[{data:n.map(function(t){return l.default.formatDate(t.time)})}],yAxis:[{type:"value",name:"rpm",axisLabel:{formatter:"{value} rpm"}},{type:"value",name:"ms",axisLabel:{formatter:"{value} ms"}}],series:[{name:"吞吐率",type:"bar",stack:"总量",data:n.map(function(t){return t.throughput})},{name:"平均SQL耗时",type:"line",smooth:!0,yAxisIndex:1,data:a.map(function(t){return t.sqlElapsed})}]}}})},getDatabasesdiagramSectionSummaryData:function(){var t=this;this.api.getDatabasesdiagramSectionSummary({data:{condition:{startTime:this.startTime,endTime:this.endTime,appId:this.appId,interval:this.interval,minResponseTime:this.responsetime[0],maxResponseTime:this.responsetime[1],databaseTypeArray:this.databaseAddressArray,operationArray:this.operationArray,callerArray:this.callerArray}}}).then(function(e){if(0===e.code){var a=e.data.statArray||[],n=a.map(function(t,e){return e===a.length-1?t.startTime+"ms以上":t.startTime+"-"+t.endTime+"ms"}),i=a.map(function(t){return t.sqlRequestCount});t.diagramSectionSummaryOptionData={xAxis:[{type:"category",axisLabel:{formatter:"{value}"},data:[].concat((0,o.default)(n))}],yAxis:[{type:"value",name:"",axisLabel:{formatter:"{value} 次"}}],series:[{name:"",type:"bar",data:[].concat((0,o.default)(i))}]}}})},getDatabasesnapshotSqlListData:function(){var t=this;this.snapshotSqlloading=!0,this.api.getDatabasesnapshotSqlList({data:{condition:{startTime:this.startTime,endTime:this.endTime,appId:this.appId,minResponseTime:this.responsetime[0],maxResponseTime:this.responsetime[1],databaseTypeArray:this.databaseAddressArray,operationArray:this.operationArray,callerArray:this.callerArray,statement:this.searchName},sort:{field:this.sqlSortField,order:this.sqlSortOrder},page:{index:this.pageIndex,size:10}}}).then(function(e){0===e.code&&(e.data.sqlInfoArray.map(function(t){t.occurTime=l.default.formatDate(t.occurTime)}),t.snapshotSqlData=e.data.sqlInfoArray,t.snapshotSqlDataTotal=e.data.totalSize)}).always(function(e){t.snapshotSqlloading=!1})},getErrorSummaryData:function(){var t=this,e={condition:{startTime:this.startTime,endTime:this.endTime,appId:this.appId,type:2,size:100}},a=this.api.getlistRefinedSpanCallers({data:e}),n=this.api.getlistRefinedSpanDatabaseInstance({data:e});r.default.all([a,n]).then(function(e){var a=e[0].data.map(function(t){return{id:t,name:t}}),n=e[1].data.map(function(t){return{id:t,name:t}});t.filterListData=[{text:"操作命令",type:1,disable:!1,itemId:"operations",listData:[{id:"select",name:"select"},{id:"update",name:"update"},{id:"delete",name:"delete"},{id:"insert",name:"insert"},{id:"call",name:"call"},{id:"other",name:"other"}]},{text:"调用者",type:1,disable:!1,itemId:"callers",listData:a},{text:"数据库实例",type:1,disable:!1,itemId:"datbases",listData:n}]})}}}},836:function(t,e,a){e=t.exports=a(566)(),e.push([t.i,".error .multiple[data-v-73960f44]{display:flex}.error .multiple .l[data-v-73960f44]{flex:1}.error .multiple .r[data-v-73960f44]{width:540px}.error .multiple .r .content[data-v-73960f44]{border-left:1px solid #dcdcdc}.error .search-input[data-v-73960f44]{float:right;width:200px;margin:11px}.error .chart-wrap[data-v-73960f44]{height:300px}",""])},870:function(t,e,a){var n=a(836);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(567)("69872b77",n,!0)},921:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"error"},[a("top-bar",{attrs:{title:"数据库"},on:{barChange:t.topbarChange}}),t._v(" "),a("FilterBarComplex",{staticStyle:{"margin-top":"1px"},attrs:{filterList:t.filterListData},on:{fbarChange:t.filterbarChange}}),t._v(" "),a("div",{staticClass:"common-container"},[a("el-tabs",{on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"数据实例",name:"instances"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"操作命令",name:"operations"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"调用者",name:"callers"}})],1),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.topNListloading,expression:"topNListloading"}],attrs:{data:t.getDatabaseTopNList},on:{"sort-change":t.topNsortChange}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:t.metricNameCH}}),t._v(" "),a("el-table-column",{attrs:{prop:"timeSpentRatio",label:"总耗时百分比",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.timeSpentRatio)+"%")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"throughput",label:"吞吐率(rpm)\n",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"requestCount",label:"调用次数\n",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"avgResponseTime",label:"SQL耗时(ms)\n",sortable:"custom"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"common-container"},[a("div",{staticClass:"header-title"},[a("i",{staticClass:"title-icon icon ion-stats-bars"}),t._v(" "),a("span",{staticClass:"title-name"},[t._v("数据库趋势图")]),t._v(" "),a("div",{staticClass:"right-info"},[a("span",[t._v("平均SQL耗时："+t._s(t.databaseTrendTitalInfo.sqlElapsedAvg)+" ms ")]),t._v(" "),a("span",[t._v("吞吐率："+t._s(t.databaseTrendTitalInfo.throughput)+" rpm")])])]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"chart-wrap"},[a("ChartLineBar",{attrs:{optionData:t.databaseTrendOptionData}})],1)])]),t._v(" "),a("div",{staticClass:"common-container"},[t._m(1),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"chart-wrap"},[a("ChartLineBar",{attrs:{optionData:t.diagramSectionSummaryOptionData}})],1)])]),t._v(" "),a("div",{staticClass:"common-container"},[a("div",{staticClass:"header-title"},[a("i",{staticClass:"title-icon icon ion-stats-bars"}),t._v(" "),a("span",{staticClass:"title-name"},[t._v("SQL快照列表")]),t._v(" "),a("el-input",{staticClass:"search-input",attrs:{placeholder:"按SQL语句搜索\n",size:"small"},on:{change:t.handleSearchsnapshotSql},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}})],1),t._v(" "),a("div",{staticClass:"content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.snapshotSqlloading,expression:"snapshotSqlloading"}],attrs:{data:t.snapshotSqlData},on:{"sort-change":t.snapshotSqlSortChange}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{width:"200",prop:"caller",label:"调用者 "},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"theme-font-color-primary",attrs:{href:"javascript:void(0);"},on:{click:function(a){t.goToNextPage(e.row.traceId,e.row.caller)}}},[t._v(t._s(e.row.caller))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"200",prop:"occurTime",label:"发生时间",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{width:"100",prop:"operation",label:"操作命令"}}),t._v(" "),a("el-table-column",{attrs:{width:"300",prop:"databaseAddress",label:"数据库实例"}}),t._v(" "),a("el-table-column",{attrs:{width:"120",prop:"elapsedTime",label:"SQL耗时",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"statement",label:"SQL语句 "},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{"{\n                   overflow":"hidden","text-overflow":"ellipsis","word-wrap":"break-word",display:"-webkit-box","-webkit-line-clamp":"3","-webkit-box-orient":"vertical"},attrs:{title:e.row.statement}},[t._v(t._s(e.row.statement)+"\n              ")])]}}])})],1),t._v(" "),a("div",{staticClass:"pag-wrap"},[a("el-pagination",{attrs:{layout:"total, prev, pager, next","page-size":10,total:t.snapshotSqlDataTotal},on:{"current-change":t.handleCurrentChange}})],1)],1)])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header-title tabstyle"},[a("i",{staticClass:"title-icon icon ion-stats-bars"}),t._v(" "),a("span",{staticClass:"title-name"},[t._v("按不同维度分类数据库列表TOP5")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header-title"},[a("i",{staticClass:"title-icon icon ion-stats-bars"}),t._v(" "),a("span",{staticClass:"title-name"},[t._v("时间分布图")])])}]}}});