/*! 2018-3-2 author:liuxiaofan */
webpackJsonp([2],{222:function(t,a,e){e(884);var i=e(54)(e(802),e(940),"data-v-f2ed138a",null);t.exports=i.exports},608:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={data:function(){return{chartColors:["#a8d96f","#85cae6","#fab421","#f38211","#49a778","#e66a3e","#9d6858","#83bc1c","#4d6e83","#bac1c8"]}},created:function(){$(window).on("resize",this.change)},destroyed:function(){$(window).off("resize",this.change)},methods:{change:function(){this.chart&&this.chart.resize()}}}},609:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e(140),s=function(t){return t&&t.__esModule?t:{default:t}}(i);a.default={data:function(){return{topBarQueryData:{}}},props:{},watch:{},computed:{appId:function(){return this.topBarQueryData.system.id},startTime:function(){return Number(this.topBarQueryData.time.startTime)},endTime:function(){return s.default.cutEndTime(Number(this.topBarQueryData.time.endTime))},aggrInterval:function(){return s.default.intervalToGranularity(this.endTime-this.startTime)},interval:function(){return""}},methods:{}}},616:function(t,a,e){e(623);var i=e(54)(e(619),e(629),"data-v-2a8bfc5e",null);t.exports=i.exports},617:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={name:"node-link",data:function(){return{$link:null,sangle:0,tangle:0,length:0,arrowLength:8,arrowHeight:4,arrowMargin:50,startArrowData:"",endArrowData:"",playArrowData:"",stopArrowData:"",playArrowP1:"",playArrowP2:"",playArrowP3:"",playTime:3e3}},props:{data:{default:function(){return{}}},change:0,showTextFlag:!0,play:!1,dragFlag:!1,radius:{default:35},innerRadius:23,attachmentRadius:15,update:0},watch:{update:function(t){this.destroy(),this.rerender()},change:function(t){this.rerender()},play:function(t){if(this.dragFlag)return void this.stopArrowAnimation();t?this.playArrowAnimation():this.stopArrowAnimation()},dragFlag:function(t){t&&this.stopArrowAnimation()}},methods:{render:function(){this.renderLink()},rerender:function(){this.render()},destroy:function(){this.$link&&$(this.$link[0][0]).children().remove(),this.$link=null,this.sangle=0,this.tangle=0,this.length=0},renderLink:function(){var t=this.data;if(this.$link||(this.$link=d3.select(this.$refs.g)),this.csource=this.getCircleCenter(t.source),this.ctarget=this.getCircleCenter(t.target),this.csource&&!this.csource.hide&&this.ctarget&&!this.ctarget.hide){this.sangle=this.calAngle(this.csource,this.ctarget),this.tangle=this.sangle+Math.PI,t.source.symbol?(this.csource.x+=this.radius/2*Math.cos(this.sangle),this.csource.y+=this.radius/2*Math.sin(this.sangle)):(this.csource.x+=this.radius*Math.cos(this.sangle),this.csource.y+=this.radius*Math.sin(this.sangle)),t.target.symbol?(this.ctarget.x+=this.radius/2*Math.cos(this.tangle),this.ctarget.y+=this.radius/2*Math.sin(this.tangle)):(this.ctarget.x+=this.radius*Math.cos(this.tangle),this.ctarget.y+=this.radius*Math.sin(this.tangle));var a=this.needBezer(),e=this.getNodeSpace();if(this.bezerX=1===a?(this.csource.x+this.ctarget.x)/2:this.csource.x-e*this.radius,this.bezerY=1===a?this.csource.y-e*this.radius:(this.csource.y+this.ctarget.y)/2,a&&!this.data.notNeedBezerFlag)this.$link.select("path.bezer").empty()?this.$link.append("path").attr("d","M"+this.csource.x+","+this.csource.y+" Q"+this.bezerX+","+this.bezerY+" "+this.ctarget.x+","+this.ctarget.y).attr("class","bezer"):$(this.$link.select("path.bezer")[0][0]).remove();else{this.$link.select("line").empty()?this.$link.append("line").attr("x1",this.csource.x).attr("y1",this.csource.y).attr("x2",this.ctarget.x).attr("y2",this.ctarget.y):this.$link.select("line").attr("x1",this.csource.x).attr("y1",this.csource.y).attr("x2",this.ctarget.x).attr("y2",this.ctarget.y);var i=this.$link.select("path.bezer");i.empty()||$(i[0][0]).remove()}"MQ"!==t.source.type&&"MQ"!==t.target.type||this.$link.classed("dash",!0),a&&!this.data.notNeedBezerFlag?this.drawBezerArrow(this.csource,this.ctarget,{x:this.bezerX,y:this.bezerY}):this.drawLineArrow(this.csource,this.ctarget);var s=this.$link.select("text.line-text"),r=this.$link.select("text.line-text .adsFlowMapTextShadow"),n=this.$link.select("text.line-text .real");s.empty()&&(s=this.$link.append("text").attr("class","line-text"),r=s.append("tspan").attr("class","adsFlowMapTextShadow").style("text-anchor","middle").text(this.data.label),n=s.append("tspan").attr("class","real").text(this.data.label));var o=(this.csource.x+this.ctarget.x)/2,l=(this.csource.y+this.ctarget.y)/2;if(a&&!this.data.notNeedBezerFlag){var c=this.getBeZerPoint(this.csource,this.ctarget,{x:this.bezerX,y:this.bezerY},.5);s&&(s.attr("x",c.x).attr("y",c.y),r.attr("x",c.x).attr("y",c.y),n.attr("x",c.x).attr("y",c.y))}else s&&(s.attr("x",o).attr("y",l+3),r.attr("x",o).attr("y",l+3),n.attr("x",o).attr("y",l+3)),this.csource.x,this.ctarget.x;this.showTextFlag?s&&s.classed("hide",!1):s&&s.classed("hide",!0)}},drawLineArrow:function(t,a){var e,i,s,r,n,o,l,c,d,h,p,u,m,f;t.x===a.x?(i={x:t.x,y:t.y<a.y?t.y+this.arrowMargin:t.y-this.arrowMargin},s={x:t.x,y:t.y<a.y?t.y+this.arrowMargin-this.arrowLength:t.y-this.arrowMargin+this.arrowLength},r={x:t.x+this.arrowHeight,y:s.y},n={x:t.x-this.arrowHeight,y:s.y},l={x:t.x,y:t.y<a.y?a.y-this.arrowMargin:a.y+this.arrowMargin},o={x:t.x,y:t.y<a.y?a.y-this.arrowMargin+this.arrowLength:a.y+this.arrowMargin-this.arrowLength},c={x:t.x+this.arrowHeight,y:l.y},d={x:t.x-this.arrowHeight,y:l.y},this.playArrowP1={x:t.x,y:t.y<a.y?t.y+this.arrowLength:t.y-this.arrowLength},h={x:t.x,y:t.y},this.playArrowP2={x:t.x+this.arrowHeight,y:h.y},this.playArrowP3={x:t.x-this.arrowHeight,y:h.y},p={x:a.x,y:a.y},u={x:a.x,y:t.y<a.y?a.y-this.arrowLength:a.y+this.arrowLength},m={x:a.x+this.arrowHeight,y:u.y},f={x:a.x-this.arrowHeight,y:u.y}):t.y===a.y?(i={x:t.x<a.x?t.x+this.arrowMargin:t.x-this.arrowMargin,y:t.y},s={x:t.x<a.x?t.x+this.arrowMargin-this.arrowLength:t.x-this.arrowMargin+this.arrowLength,y:t.y},r={x:s.x,y:t.y+this.arrowHeight},n={x:s.x,y:t.y-this.arrowHeight},o={x:t.x<a.x?a.x-this.arrowMargin+this.arrowLength:a.x+this.arrowMargin-this.arrowLength,y:a.y},l={x:t.x<a.x?a.x-this.arrowMargin:a.x+this.arrowMargin,y:a.y},c={x:l.x,y:a.y+this.arrowHeight},d={x:l.x,y:a.y-this.arrowHeight},this.playArrowP1={x:t.x<a.x?t.x+this.arrowLength:t.x-this.arrowLength,y:t.y},h={x:t.x,y:t.y},this.playArrowP2={x:h.x,y:t.y+this.arrowHeight},this.playArrowP3={x:h.x,y:t.y-this.arrowHeight},p={x:a.x,y:a.y},u={x:t.x<a.x?a.x-this.arrowLength:a.x+this.arrowLength,y:a.y},m={x:u.x,y:a.y+this.arrowHeight},f={x:u.x,y:a.y-this.arrowHeight}):(e=this.getlinek(t,a),i=this.getPointByLine(e,this.arrowMargin,t,t.x<a.x?1:-1),s=this.getPointByLine(e,this.arrowMargin-this.arrowLength,t,t.x<a.x?1:-1),r=this.getPointByLine(-1/e,this.arrowHeight,s,1),n=this.getPointByLine(-1/e,this.arrowHeight,s,-1),o=this.getPointByLine(e,-this.arrowMargin+this.arrowLength,a,t.x<a.x?1:-1),l=this.getPointByLine(e,-this.arrowMargin,a,t.x<a.x?1:-1),c=this.getPointByLine(-1/e,this.arrowHeight,l,1),d=this.getPointByLine(-1/e,this.arrowHeight,l,-1),this.playArrowP1=this.getPointByLine(e,this.arrowLength,t,t.x<a.x?1:-1),h={x:t.x,y:t.y},this.playArrowP2=this.getPointByLine(-1/e,this.arrowHeight,h,1),this.playArrowP3=this.getPointByLine(-1/e,this.arrowHeight,h,-1),p={x:a.x,y:a.y},u=this.getPointByLine(e,this.arrowLength,a,t.x<a.x?-1:1),m=this.getPointByLine(-1/e,this.arrowHeight,u,1),f=this.getPointByLine(-1/e,this.arrowHeight,u,-1)),this.createArrow(i,r,n,"startArrow"),this.createArrow(o,c,d,"endArrow"),this.createArrow(this.playArrowP1,this.playArrowP2,this.playArrowP3,"playArrow"),this.stopArrowData=this.getArrowData(p,m,f)},drawBezerArrow:function(t,a,e){var i=this.getBeZerLength(t,a,e),s=this.getBeZerPoint(t,a,e,this.arrowMargin/i),r=this.getBeZerPoint(t,a,e,(this.arrowMargin-this.arrowLength)/i),n=this.getlinek(r,s),o=this.getPointByLine(-1/n,this.arrowHeight,r,1),l=this.getPointByLine(-1/n,this.arrowHeight,r,-1),c=this.getBeZerPoint(t,a,e,(i-this.arrowMargin+this.arrowLength)/i),d=this.getBeZerPoint(t,a,e,(i-this.arrowMargin)/i),h=this.getlinek(d,c),p=this.getPointByLine(-1/h,this.arrowHeight,d,1),u=this.getPointByLine(-1/h,this.arrowHeight,d,-1);this.playArrowP1=this.getBeZerPoint(t,a,e,this.arrowLength/i);var m=t;this.playArrowP2=this.getPointByLine(-1/n,this.arrowHeight,m,1),this.playArrowP3=this.getPointByLine(-1/n,this.arrowHeight,m,-1),this.createArrow(s,o,l,"startArrow"),this.createArrow(c,p,u,"endArrow"),this.createArrow(this.playArrowP1,this.playArrowP2,this.playArrowP3,"playArrow")},getBezerArrowPoint:function(t,a,e,i){var s=this.getBeZerLength(t,a,e),r=this.getBeZerPoint(t,a,e,(i*s+this.arrowLength)/s),n=this.getBeZerPoint(t,a,e,i),o=this.getlinek(n,r);return[r,this.getPointByLine(-1/o,this.arrowHeight,n,1),this.getPointByLine(-1/o,this.arrowHeight,n,-1)]},createArrow:function(t,a,e,i){var s=this.$link.select("path.arrow."+i);return s.empty()&&(s=this.$link.append("path").attr("class","arrow "+i)),this[i+"Data"]=this.getArrowData(t,a,e),s.attr("d",this[i+"Data"]),s},getArrowData:function(t,a,e){return"M"+t.x+" "+t.y+" L"+a.x+" "+a.y+" L"+e.x+" "+e.y+" Z"},getlinek:function(t,a){return a.x!==t.x&&(a.y-t.y)/(a.x-t.x)},getPointByLine:function(t,a,e,i){return!1===t?{x:e.x,y:e.y-i*a}:{x:e.x+i*(a/Math.sqrt(Math.pow(t,2)+1)),y:e.y+i*(t*a/Math.sqrt(Math.pow(t,2)+1))}},getBeZerPoint:function(t,a,e,i){return{x:Math.pow(1-i,2)*t.x+2*i*(1-i)*e.x+Math.pow(i,2)*a.x,y:Math.pow(1-i,2)*t.y+2*i*(1-i)*e.y+Math.pow(i,2)*a.y}},getBeZerLength:function(t,a,e){var i=t.x-2*e.x+a.x,s=t.y-2*e.y+a.y,r=2*e.x-2*t.x,n=2*e.y-2*t.y,o=4*(i*i+s*s),l=4*(i*r+s*n),c=r*r+n*n;return 1/(8*Math.pow(o,1.5))*(2*Math.sqrt(o)*(2*o*1*Math.sqrt(1*o*1+1*l+c)+l*(Math.sqrt(1*o*1+1*l+c)-Math.sqrt(c)))+(l*l-4*o*c)*(Math.log(l+2*Math.sqrt(o*c))-Math.log(l+2*o*1+2*Math.sqrt(o)*Math.sqrt(1*o*1+1*l+c))))},needBezer:function(){var t=this.isSameLineNotSide();return t||0},getNodeSpace:function(){var t=parseInt(this.data.source.domId.substr(5,2)),a=parseInt(this.data.source.domId.substr(8,2)),e=parseInt(this.data.target.domId.substr(5,2)),i=parseInt(this.data.target.domId.substr(8,2));return t===e&&a+1!==i&&a-1!==i?Math.abs(i-a):a===i&&t+1!==e&&t-1!==e?Math.abs(e-t):0},isSameLineNotSide:function(){var t=parseInt(this.data.source.domId.substr(5,2)),a=parseInt(this.data.source.domId.substr(8,2)),e=parseInt(this.data.target.domId.substr(5,2)),i=parseInt(this.data.target.domId.substr(8,2));return t===e&&a+1!==i&&a-1!==i?2:a===i&&t+1!==e&&t-1!==e?1:0},calAngle:function(t,a){var e=Math.atan((a.y-t.y)/(a.x-t.x));return e=t.x>a.x?Math.PI+e:e},getCircleCenter:function(t){var a=d3.select("g.node."+t.domId);if(a&&a.attr("transform")){var e=this.getOffsetByTransform(a.attr("transform"));if(t.symbol){var i=a.select(".node-core").attr("width");return e.x+=i/2,e.y+=i/2,e}return e}},getOffsetByTransform:function(t){var a=t.indexOf("translate"),e=t.substr(a+9),i=e.indexOf("("),s=e.indexOf(")");e=e.substr(i+1,s-i-1);var r=e.split(",");return 2!==r.length&&(r=e.split(" ")),{x:parseInt(r[0]),y:parseInt(r[1])}},showText:function(){$(".line-text",this.$link[0][0]).show()},hideText:function(){$(".line-text",this.$link[0][0]).hide()},playArrowAnimation:function(){var t=this.createArrow(this.playArrowP1,this.playArrowP2,this.playArrowP3,"playArrow"),a=this;if(this.hideArrow(),$("path.playArrow",this.$link[0][0]).show(),this.needBezer()&&!this.data.notNeedBezerFlag){this.arr=[];for(var e=a.playTime/1e3*60,i=0;i<e;i++){var s=a.getBezerArrowPoint(a.csource,a.ctarget,{x:a.bezerX,y:a.bezerY},i/e);this.arr.push(a.getArrowData(s[0],s[1],s[2]))}t.transition().duration(this.playTime).ease("linear").each("end",function(){t.attr("d",a.playArrowData),a.playArrowAnimation()}).attrTween("d",this.dTween)}else t.transition().duration(this.playTime).ease("linear").each("end",function(){t.attr("d",a.playArrowData),a.playArrowAnimation()}).attr("d",this.stopArrowData)},dTween:function(){var t=d3.scale.quantize().domain([0,1]).range(this.arr);return function(a){return t(a)}},stopArrowAnimation:function(){var t=this.$link.select(".playArrow");this.showArrow(),t.transition().remove(),this.createArrow(this.playArrowP1,this.playArrowP2,this.playArrowP3,"playArrow"),$(t[0][0]).hide()},hideArrow:function(){$("path.startArrow",this.$link[0][0]).hide(),$("path.endArrow",this.$link[0][0]).hide()},showArrow:function(){$("path.startArrow",this.$link[0][0]).show(),$("path.endArrow",this.$link[0][0]).show()}},created:function(){},mounted:function(){this.render(),this.$emit("onLinkFinished",this.data)},updated:function(){}}},618:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={name:"topo-node",data:function(){return{$node:null,arc:null,pie:null,offsetX:0,offsetY:0}},props:{colors:{default:function(){return{normal:"#a9d86e",slow:"#86cae4",very_slow:"#fcb322",error:"#f58210",warning:"#86cae4",normality:"#86cae4",intolerance:"#f58210",healthy:"#a9d86e",crossApp:"#8b97a3"}}},attachmentRadius:{default:15},attachmentColor:{default:"#338cff"},attachmentTextOffset:{default:function(){return{x:2,y:3}}},attachmentSummary:{default:function(){return{show:!0,formatter:function(){},position:"left"}}},radius:{default:35},scale:{default:1},innerRadius:{default:22},bigFont:{default:function(){return{color:"#3e3d39",size:14}}},smallFont:{default:function(){return{color:"#3e3d39",size:12}}},data:{default:function(){return{}}},spaceCircleColor:{default:"white"},update:0},watch:{update:function(t){this.data.hide||(this.destroy(),this.render())},scale:function(t){this.scaleChange(t)}},methods:{render:function(){this.data.hide||(this.createNode(),this.renderNode())},destroy:function(){this.$node&&$(this.$node[0][0]).children().remove(),this.$node=null,this.arc=null,this.pie=null},createNode:function(){this.$node||(this.$node=d3.select(this.$refs.g).attr("transform","translate("+(this.radius+this.data.x)+","+(this.radius+this.data.y)+")"))},renderNode:function(){this.data.symbol?this.renderImg():(this.renderPie(),this.data.crossApp||this.renderAttachment())},renderPie:function(){var t=this.getPie(),a=this.getArc();this.data.crossApp&&(this.data.status=[{value:1,name:"crossApp"}]);var e=this.$node.selectAll("path.arc").data(t(this.data.status)),i=this.colors;e.enter().append("path").attr("class","arc node-core").attr("fill",function(t,a){return i[t.data.name]}),e.transition().attrTween("d",function(t){var e=this.__current__;e||(e={startAngle:0,endAngle:0});var i=d3.interpolate(e,t);return this.__current__=i(1),function(t){return a(i(t))}}),this.$node.append("circle").attr("cx",0).attr("cy",0).attr("r",this.innerRadius).attr("fill",this.spaceCircleColor),this.data.crossApp||this.$node.append("text").attr("class","instances").attr("text-anchor","middle").attr("y",5).text((this.data.activeInstances?this.data.activeInstances:0)+"/"+(this.data.instances?this.data.instances:0)),this.$node.append("text").attr("class","pie-name").attr("y",this.radius+15).attr("fill",this.smallFont.color).style("text-anchor","middle").text(this.data.showName),this.data.crossApp||this.renderSummary(this.$node,this.radius)},renderImg:function(){var t=2*this.radius*(2/3);this.$node.append("image").attr("class","node-core").attr("width",t).attr("height",t).attr("xlink:href",this.resolveImgUrl(this.data.symbol)),this.$node.append("text").attr("class","pie-name").attr("y",t+10).attr("fill",this.smallFont.color).style("text-anchor","middle").attr("transform","translate("+t/2+")").text(this.data.showName),this.renderSummary(this.$node,t,1*t/3)},renderSummary:function(t,a,e){if(this.attachmentSummary.show){var i=this.attachmentSummary.formatter(this.data);if(i instanceof Array&&i.length>0){var s=t.append("text").attr("class","pie-summary").attr("x",a).attr("fill",this.smallFont.color);i.forEach(function(t){s.append("tspan").attr("x",a+10).attr("class","adsFlowMapTextShadow").attr("dy",13).text(t),s.append("tspan").attr("x",a+10).text(t)});var r=13*i.length;e?s.attr("y",e):s.attr("y",-r/2)}}},renderAttachment:function(){var t=-this.radius,a=this.radius-this.attachmentRadius;this.$node.append("circle").attr("class","attachement").attr("fill",this.attachmentColor).attr("cx",t).attr("cy",a).attr("r",this.attachmentRadius),this.$node.append("text").attr("class","attachement-text").attr("fill","white").attr("x",t-this.attachmentRadius+2).attr("y",a+3).text(this.data.serverName)},getArc:function(){return this.arc?this.arc:(this.arc=d3.svg.arc().outerRadius(this.radius).innerRadius(this.innerRadius),this.arc)},getPie:function(){return this.pie?this.pie:(this.pie=d3.layout.pie().value(function(t){return t.value}),this.pie)},resolveImgUrl:function(t){var a=t.indexOf("image://");return a>=0?t.substr(a+8):t},addEvent:function(){var t=this;this.$node.call(d3.behavior.drag().on("drag",function(){d3.event.sourceEvent.offsetX===t.offsetX&&d3.event.sourceEvent.offsetY===t.offsetY||(t.dragFlag||setTimeout(function(){t.dragFlag=!0},200),d3.select(this).attr("transform",function(t){return"translate("+d3.event.x+", "+d3.event.y+")"}),t.data.x=d3.event.x,t.data.y=d3.event.y,t.$emit("onNodeMove",t.data))}).on("dragstart",function(a){t.offsetX=d3.event.sourceEvent.offsetX,t.offsetY=d3.event.sourceEvent.offsetY,d3.event.sourceEvent.stopPropagation(),t.$emit("onMouseDown",t.data,d3.event.sourceEvent)}).on("dragend",function(){t.offsetX=0,t.offsetY=0,t.$emit("onMouseUp",t.data,d3.event.sourceEvent,t.dragFlag),t.dragFlag=!1}))},parseTransform:function(t){t=t.substr(10),t=t.substr(0,t.length-1);var a=t.split(",");return a&&2===a.length||(a=t.split(" ")),a[0]=parseFloat(a[0]),a[1]=parseFloat(a[1]),a},scaleChange:function(t){},onEnterNode:function(t){this.$emit("onEnterNode",this.data,t)},onLeaveNode:function(t){this.$emit("onLeaveNode",this.data,t)}},mounted:function(){this.data.hide||(this.render(),this.addEvent())}}},619:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var s=e(627),r=i(s),n=e(626),o=i(n),l=e(35);a.default={name:"topo",components:{TopoNode:r.default,TopoLink:o.default,"el-button":l.Button,"el-table":l.Table,"el-table-column":l.TableColumn,"el-input":l.Input,"el-form":l.Form,"el-form-item":l.FormItem,"el-dialog":l.Dialog,"el-pagination":l.Pagination,"el-breadcrumb":l.Breadcrumb,"el-breadcrumb-item":l.BreadcrumbItem,"el-switch":l.Switch,"el-tooltip":l.Tooltip,"el-tag":l.Tag,"el-checkbox":l.Checkbox},data:function(){return{lineTextFlag:!0,bezerFlag:!0,linkFinishedNum:0,scale:this.data.scale||1,translate:[0,0],scaleScales:null,pixelScales:null,maxMargin:0,sliderTop:1,scaleRange:[.35,3],topo_z:null,updateNode:0,updateLink:0,tooltip:{show:!1,left:0,top:0,delay:0},nodeDetailVisible:!1,modal:!1,tierList:[]}},props:{data:{default:function(){return{}}},radius:{default:35},innerRadius:23,attachmentRadius:15,update:0,attachmentSummary:{show:!0,formatter:function(t){},position:"left"},fullbtnDisplay:{default:!0},setFullScreen:{default:!1}},watch:{data:function(t){t.scale&&(this.scaleRange[0]<t.scale&&(this.scaleRange[0]=t.scale),this.scale=t.scale),(t.offsetLeft||t.offsetTop)&&(this.translate[0]=t.offsetLeft?t.offsetLeft:0,this.translate[1]=t.offsetTop?t.offsetTop:0,d3.select(this.$refs["topo-container"]).attr("transform","translate("+this.translate+") scale("+[this.scale,this.scale]+")"),this.topo_z.translate(this.translate))},update:function(t){this.updateNode=t,this.updateLink=t,this.zoom(this.scale)},scale:function(t){this.zoom(t)},sliderTop:function(t){this.setSliderTop(t)},setFullScreen:function(t){t&&this.fullScreen(),this.$emit("onFullScreenChange",t)}},methods:{resetContainer:function(){d3.select(this.$refs["topo-container"]).attr("transform","translate(0, 0) scale(1)")},render:function(){var t=this,a=$(t.$refs.slider).height(),e=$(t.$refs["slider-thumb"]).height();this.maxMargin=a-e;var i=t.scaleRange[1],s=t.scaleRange[0],r=this.maxMargin;this.scaleScales=t.getScaleRelation(1,r,i,s),this.pixelScales=t.getScaleRelation(i,s,1,r),this.computeSliderTop(),$(this.$refs.fullscreen).hover(function(){$(this).attr("src","/static/images/maximize_blue.svg")},function(){$(this).attr("src","/static/images/maximize_gray.svg")})},adjustLink:function(){var t=$(this.$refs["topo-container"]);$("g.link",this.$refs["topo-svg"]).each(function(a,e){$(e).remove(),t.prepend(e)})},addEvent:function(){var t=this;this.topo_z=d3.behavior.zoom().scaleExtent(t.scaleRange).on("zoom",this.zoom),d3.select(t.$refs["topo-svg"]).call(this.topo_z).on("dblclick.zoom",null),this.dispatch=d3.dispatch("mousewheel"),this.dispatch.on("mousewheel",this.zoom),window.addEventListener("resize",function(){t.fullstatus&&t.fullScreen()})},zoom:function(t,a){var e=t||d3.event.scale,i=this;e>.88?(this.lineTextFlag=!0,setTimeout(function(){$(".line-text",i.$refs["topo-svg"]).show(),$(".pie-summary",i.$refs["topo-svg"]).show(),$(".attachement-text",i.$refs["topo-svg"]).show(),$(".attachement",i.$refs["topo-svg"]).show()},100)):(setTimeout(function(){$(".line-text",i.$refs["topo-svg"]).hide(),$(".pie-summary",i.$refs["topo-svg"]).hide(),$(".attachement-text",i.$refs["topo-svg"]).hide(),$(".attachement",i.$refs["topo-svg"]).hide()},100),this.lineTextFlag=!1),e>.68?setTimeout(function(){$(".pie-name",i.$refs["topo-svg"]).show()},100):setTimeout(function(){$(".pie-name",i.$refs["topo-svg"]).hide()},100);var s=d3.transform(d3.select(i.$refs["topo-container"]).attr("transform"));if(this.scale!==e||t||(this.translate=[s.translate[0],s.translate[1]]),this.tooltip.show=!1,!d3.event&&a){d3.select(i.$refs["topo-container"]).attr("transform","scale("+[e,e]+")");var r=i.$refs["topo-container"].getBoundingClientRect(),n=[this.translate[0]+(this.data.scale-e)*(r.width/2)/e,this.translate[1]+(this.data.scale-e)*(r.height/2)/e];d3.select(i.$refs["topo-container"]).attr("transform","translate("+n+") scale("+[e,e]+")"),this.topo_z.translate(n)}else d3.select(i.$refs["topo-container"]).attr("transform","translate("+(d3.event?d3.event.translate:s.translate)+") scale("+[e,e]+")"),this.topo_z.translate(d3.event?d3.event.translate:s.translate);this.scale=e,this.topo_z.scale(this.scale),this.computeSliderTop()},setSliderTop:function(t){$(this.$refs["slider-thumb"]).css("margin-top",t+"px")},computeSliderTop:function(){this.sliderTop=this.pixelScales[0]*this.scale+this.pixelScales[1],this.sliderTop=this.sliderTop<1?1:this.sliderTop,this.sliderTop=this.sliderTop>this.maxMargin?this.maxMargin:this.sliderTop},computeScale:function(){return this.scaleScales[0]*this.sliderTop+this.scaleScales[1]},onNodeMove:function(t,a){if(this.data.links){t.drillDown&&1*new Date-this.tooltip.delay>100&&(this.tooltip.show=!1,this.tooltip.delay=1*new Date);this.getLinksByNode(t).forEach(function(t,a){t.change++,t.notNeedBezerFlag=!0}),this.$emit("onNodeMove",t,a)}},onMouseDown:function(t,a){if(this.data.links){this.getLinksByNode(t).forEach(function(t,a){t.dragFlag=!0}),this.$emit("onMouseDownNode",t,a)}},onMouseUp:function(t,a,e){if(this.data.links){this.getLinksByNode(t).forEach(function(t,a){t.dragFlag=!1}),e||this.$emit("onMouseUpNode",t,a),!e&&t.list&&t.list.length>1&&(this.tierList=t.list,this.nodeDetailVisible=!0)}},onLinkFinished:function(t,a){this.linkFinishedNum++,this.linkFinishedNum===this.data.links.length&&(this.adjustLink(),this.linkFinishedNum=0),this.$emit("onLinkFinished",t,a)},closeDialog:function(){this.nodeDetailVisible=!1},onEnterNode:function(t,a){if(a=a||window.event,this.data.links){var e=a.target.getBoundingClientRect(),i=$(this.$refs["topo-svg"]).offset();t.drillDown&&(this.tooltip.left=e.left-i.left+e.width/20*this.scale,this.tooltip.top=e.top-i.top-$(this.$refs.tooltip).height()-10,this.tooltip.show=!0,this.tooltip.delay=1*new Date);this.getLinksByNode(t).forEach(function(t,a){t.play=!0}),this.$emit("onEnterNode",t,a)}},parseTransform:function(t){if(t){t=t.substr(10),t=t.substr(0,t.length-1);var a=t.split(",");return a&&2===a.length||(a=t.split(" ")),a[0]=parseFloat(a[0]),a[1]=parseFloat(a[1]),a}},onLeaveNode:function(t,a){if(this.data.links){t.drillDown&&1*new Date-this.tooltip.delay>100&&(this.tooltip.show=!1,this.tooltip.delay=1*new Date);this.getLinksByNode(t).forEach(function(t,a){t.play=!1}),this.$emit("onLeaveNode",t,a)}},onSliderDown:function(t){var a=this,e=t.clientY;document.onmousemove=function(t){var i=t.clientY-e;a.sliderTop+=i,a.sliderTop=a.sliderTop<1?1:a.sliderTop,a.sliderTop=a.sliderTop>a.maxMargin?a.maxMargin:a.sliderTop;var s=a.computeScale();e=t.clientY,a.dispatch&&a.dispatch.mousewheel(s,!0)},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}},fullScreen:function(t){var a=$("body").width(),e=$("body").height();$(this.$refs.topo).width(a),$(this.$refs.topo).height(e),$(this.$refs.topo).addClass("full"),$(this.$refs.fullscreen).hide(),$(this.$refs.restore).show(),this.fullstatus=!0},restore:function(t){$(this.$refs.topo).width("100%"),$(this.$refs.topo).height("100%"),$(this.$refs.topo).removeClass("full"),$(t.target).hide(),$(this.$refs.fullscreen).show(),this.$emit("onFullScreenChange",!1),this.fullstatus=!1},getScaleRelation:function(t,a,e,i){return[(i-e)/(a-t),e-t*(i-e)/(a-t)]},getLinksByNode:function(t){for(var a=[],e=0;e<this.data.links.length;e++){var i=this.data.links[e];i.source.domId!==t.domId&&i.target.domId!==t.domId||a.push(i)}return a}},created:function(){},mounted:function(){this.render(),this.addEvent()},updated:function(){var t=this,a=this.$refs.topo.clientHeight,e=parseInt($(t.$refs.slider).css("top")),i=a-2*e;a<=0||(a<2*e+$(t.$refs.slider).height()&&($(t.$refs.slider).height(i),this.render()),$(t.$refs.slider).show())}}},620:function(t,a,e){a=t.exports=e(566)(),a.push([t.i,"@keyframes down{0%{transform:translateY(0)}20%{transform:translateY(-2px)}50%{transform:translateY(2px)}75%{transform:translateY(1px)}to{transform:translateY(0)}}.topo.full[data-v-2a8bfc5e]{position:fixed;top:0;left:0;right:0;bottom:0;z-index:1000;background:#fff}.topo[data-v-2a8bfc5e]{width:100%;height:100%;position:relative;moz-user-select:-moz-none;-moz-user-select:none;-o-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.topo svg[data-v-2a8bfc5e]{width:100%;height:100%}.topo svg g.node[data-v-2a8bfc5e]:hover{cursor:pointer}.tooltip[data-v-2a8bfc5e]{position:absolute;float:left;left:-100000px;top:-100000;background-color:#fff;border-radius:5px;box-shadow:1px 1px 1px 1px #ccc;line-height:22px;padding:5px 10px}.tooltip i[data-v-2a8bfc5e]{font-size:18px;display:inline-block;vertical-align:middle;margin-bottom:2px;border-bottom:2px solid #ccc;box-sizing:border-box}.tooltip.show i[data-v-2a8bfc5e]{animation:down .5s ease-in;animation-delay:.5s;animation-iteration-count:2}.fade-enter-active[data-v-2a8bfc5e]{transition:all .5s ease}.fade-leave-active[data-v-2a8bfc5e]{transition:all 0s ease}.fade-enter[data-v-2a8bfc5e],.fade-leave-active[data-v-2a8bfc5e]{opacity:0}.topo .slider[data-v-2a8bfc5e]{width:10px;height:200px;position:absolute;top:50px;left:15px;background:#f5f5f5;border:1px solid #d7d7d7;border-radius:12px;display:none}.topo .slider .slider-thumb[data-v-2a8bfc5e]{width:12px;height:12px;border-radius:12px;background:#9aa3b2;margin-left:-2px;margin-top:1px;box-shadow:2px 2px 2px 2px hsla(0,0%,100%,.8);cursor:pointer}.topo .toolbar[data-v-2a8bfc5e]{position:absolute;top:10px;right:10px}.topo .toolbar img[data-v-2a8bfc5e]{cursor:pointer}.topo .toolbar .restore[data-v-2a8bfc5e]{display:none}",""])},621:function(t,a,e){a=t.exports=e(566)(),a.push([t.i,'.link line{stroke:#2693ff;stroke-width:1}.link.dash line{stroke-dasharray:3}.link line:hover{stroke-width:2}.hide,.link path.arrow.playArrow{display:none}.link path.bezer{fill:none;stroke:#2693ff;stroke-width:1}.link.dash path.bezer{stroke-dasharray:3}.link path.bezer:hover{stroke-width:2}.link path.arrow{fill:#2693ff}.link .line-text{font-size:10px;font-weight:"normal";font-style:"-apple-system,Microsoft Yahei,system-ui,BlinkMacSystemFont,Open Sans,Hiragino Sans GB,sans-serif";color:"#000"}.adsFlowMapTextShadow{stroke:#fff;stroke-width:4px;stroke-opacity:.8;fill:#fff;fill-opacity:1;font-size:10px}.real{text-anchor:middle;font-size:10px}',""])},622:function(t,a,e){a=t.exports=e(566)(),a.push([t.i,".instances{font-size:18px}.adsFlowMapTextShadow{stroke:#fff;stroke-width:4px;stroke-opacity:.8;fill:#fff;fill-opacity:1}.pie-summary{font-size:10px}",""])},623:function(t,a,e){var i=e(620);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(567)("ab196eaa",i,!0)},624:function(t,a,e){var i=e(621);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(567)("0417ee2e",i,!0)},625:function(t,a,e){var i=e(622);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(567)("812a4628",i,!0)},626:function(t,a,e){e(624);var i=e(54)(e(617),e(630),null,null);t.exports=i.exports},627:function(t,a,e){e(625);var i=e(54)(e(618),e(631),null,null);t.exports=i.exports},629:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"topo",staticClass:"topo"},[e("svg",{ref:"topo-svg",staticClass:"topo-svg"},[e("g",{ref:"topo-container",staticClass:"topo-container"},[t._l(t.data.nodes,function(a){return t.data.nodes?e("topo-node",{key:a.domId,attrs:{data:a,radius:t.radius,innerRadius:t.innerRadius,attachmentRadius:t.attachmentRadius,attachmentSummary:t.attachmentSummary,update:t.updateNode,scale:t.scale},on:{onNodeMove:t.onNodeMove,"!onEnterNode":function(a){t.onEnterNode(a)},"!onLeaveNode":function(a){t.onLeaveNode(a)},onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp}}):t._e()}),t._v(" "),t._l(t.data.links,function(a){return t.data.links?e("topo-link",{key:a.id,attrs:{data:a,change:a.change,showTextFlag:t.lineTextFlag,bezerFlag:t.bezerFlag,play:a.play,dragFlag:a.dragFlag,update:t.updateLink,radius:t.radius,scale:t.scale},on:{onLinkFinished:t.onLinkFinished}}):t._e()})],2)]),t._v(" "),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.tooltip.show,expression:"tooltip.show"}],ref:"tooltip",staticClass:"tooltip",class:{show:t.tooltip.show},style:{left:t.tooltip.left+"px",top:t.tooltip.top+"px"}},[e("i",{staticClass:"icon ion-android-arrow-down theme-font-color-primary",staticStyle:{"font-size":"20px"}}),t._v("点击下钻\n        ")])]),t._v(" "),e("div",{ref:"slider",staticClass:"slider"},[e("div",{ref:"slider-thumb",staticClass:"slider-thumb",on:{mousedown:t.onSliderDown}})]),t._v(" "),e("div",{ref:"toolbar",staticClass:"toolbar"},[t.fullbtnDisplay?e("img",{ref:"fullscreen",staticClass:"fullscreen",attrs:{src:"/static/images/maximize_gray.svg"},on:{click:t.fullScreen}}):t._e(),t._v(" "),e("img",{ref:"restore",staticClass:"restore",attrs:{src:"/static/images/minimize_gray.svg"},on:{click:t.restore}})]),t._v(" "),e("el-dialog",{attrs:{width:"60%",title:"节点详情","modal-append-to-body":t.modal,visible:t.nodeDetailVisible},on:{"update:visible":function(a){t.nodeDetailVisible=a}}},[e("el-table",{staticClass:"list-table",staticStyle:{width:"100%"},attrs:{data:t.tierList,"max-height":"400","default-sort":{prop:"elapsedTime",order:"descending"}}},[e("el-table-column",{attrs:{prop:"tiersName",label:"调用者Tier"}}),t._v(" "),e("el-table-column",{attrs:{prop:"name",label:"远程调用",sortable:""}}),t._v(" "),e("el-table-column",{attrs:{prop:"elapsedTime",label:"平均响应时间(ms)",sortable:""}})],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.closeDialog}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]}},630:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement;return(t._self._c||a)("g",{ref:"g",staticClass:"link",class:t.data.id})},staticRenderFns:[]}},631:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement;return(t._self._c||a)("g",{ref:"g",staticClass:"node",class:t.data.domId,on:{mouseenter:t.onEnterNode,mouseleave:t.onLeaveNode}})},staticRenderFns:[]}},644:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=function(){this.root=null,this.data={},this.nodes=null,this.links=null,this.col=0,this.row=0,this.hspace=250,this.vspace=50,this.type="",this.cell={width:100,height:100},this.offsetWidth=0,this.offsetHeight=0,this.rootWidth=0,this.rootHeight=0,this.map={}};i.prototype.init=function(){this.row=0,this.col=0,this.hspace=250,this.vspace=50,this.type="",this.cell={width:100,height:100},this.offsetWidth=0,this.offsetHeight=0,this.rootWidth=this.root.offsetWidth,this.rootHeight=this.root.offsetHeight},i.prototype.layout=function(t,a,e){t&&(this.root=t,this.data=a,this.nodes=a.nodes,this.links=a.links,this.type=e||"grid",this.init(),this.parseNodes(),this.adjust(),this.calNodesLocation(),this.calScale())},i.prototype.parseNodes=function(){if(this.root&&this.nodes){for(var t={},a=0;a<this.nodes.length;a++){var e=this.nodes[a];t[e.group]||(this.col++,t[e.group]=0),t[e.group]=t[e.group]+1,this.row<t[e.group]&&(this.row=t[e.group])}this.map=t}},i.prototype.calNodesLocation=function(){if(this.root&&this.nodes)for(var t=0;t<this.nodes.length;t++){var a=this.nodes[t],e=this.getGrid(a);a.x=e[0]*(this.hspace+this.cell.width),a.y=e[1]*(this.vspace+this.cell.height)+(a.innerRadius?a.innerRadius:0)}},i.prototype.calScale=function(){for(var t=1;;){var a=this.rootWidth-(this.col*this.cell.width+(this.col-1)*this.hspace)*t,e=this.rootHeight-(this.row*this.cell.height+(this.row-1)*this.vspace)*t;if(a>=0&&e>=0)break;t=.87;break}this.data.scale=t},i.prototype.adjust=function(){this.offsetWidth=this.rootWidth-this.col*this.cell.width-(this.col-1)*this.hspace,this.offsetHeight=this.rootHeight-this.row*this.cell.height-(this.row-1)*this.vspace,this.offsetWidth=this.offsetWidth<0?0:this.offsetWidth/3,this.offsetHeight=this.offsetHeight<0?0:this.offsetHeight/2,this.data.offsetLeft=this.offsetWidth,this.data.offsetTop=this.offsetHeight},i.prototype.getGrid=function(t){return[parseInt(t.domId.substr(5,2)),parseInt(t.domId.substr(8,2))]},a.default=i},659:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var s=e(201),r=i(s),n=e(140),o=i(n),l=e(608),c=i(l);a.default={mixins:[c.default],props:{optionData:{type:Object,default:{}}},data:function(){return{defOption:{}}},computed:{noData:function(){return(0,r.default)(this.optionData).length<=0}},watch:{optionData:{deep:!0,handler:function(t){this.resetDefData(),this.renderChart()}}},mounted:function(){},methods:{resetDefData:function(){this.defOption={color:this.chartColors,legend:{orient:"vertical",x:"200",y:"middle",data:[],formatter:function(t){return t}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"容忍度",type:"pie",radius:["50%","70%"],center:["40%","50%"],label:{normal:{show:!1,position:"center"},emphasis:{show:!1,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:[]}]}},renderChart:function(){this.chart||(this.chart=echarts.init(this.$refs.chart)),this.chart.resize();var t=o.default.extend({},this.defOption,this.optionData);this.chart.setOption(t,!0),0===t.series[0].data.length&&this.chart.clear()}}}},672:function(t,a,e){a=t.exports=e(566)(),a.push([t.i,".chart[data-v-3ab9747e]{height:100%;display:flex;align-items:center;justify-content:center}",""])},674:function(t,a,e){var i=e(672);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(567)("2f744798",i,!0)},676:function(t,a,e){e(674);var i=e(54)(e(659),e(677),"data-v-3ab9747e",null);t.exports=i.exports},677:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"chart",staticClass:"chart"},[e("i",{staticClass:"el-icon-loading"})])},staticRenderFns:[]}},734:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var s=e(201),r=i(s),n=e(140),o=i(n),l=e(608),c=i(l);a.default={mixins:[c.default],props:{optionData:{type:Object,default:{}}},data:function(){return{defOption:{}}},computed:{noData:function(){return(0,r.default)(this.optionData).length<=0}},watch:{optionData:{deep:!0,handler:function(t){this.resetDefData(),this.renderChart()}}},mounted:function(){},methods:{resetDefData:function(){this.defOption={color:this.chartColors,tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{bottom:"10",data:[]},grid:{top:30,left:80,right:70},xAxis:[{type:"category",data:[],axisPointer:{type:"shadow"}}],yAxis:[{type:"value"}],series:[{name:"",type:"bar",data:[]}]}},renderChart:function(){this.chart||(this.chart=echarts.init(this.$refs.chart));var t=this.optionData.xAxis[0].data.length;this.chart.resize(),this.optionData.series.forEach(function(t){for(var a in t.data)"NaN"===t.data[a]&&(t.data[a]=0)});var a=o.default.extend({},this.defOption,this.optionData);this.chart.setOption(a,!0),0===t&&this.chart.clear()}}}},738:function(t,a,e){a=t.exports=e(566)(),a.push([t.i,".chart[data-v-11d02004]{height:100%;display:flex;align-items:center;justify-content:center}",""])},740:function(t,a,e){var i=e(738);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(567)("5c741017",i,!0)},743:function(t,a,e){e(740);var i=e(54)(e(734),e(745),"data-v-11d02004",null);t.exports=i.exports},745:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"chart",staticClass:"chart"},[e("i",{staticClass:"el-icon-loading"})])},staticRenderFns:[]}},778:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var s=e(146),r=i(s),n=e(140),o=i(n),l=e(202),c=e(212),d=i(c),h=e(743),p=i(h),u=e(676),m=i(u),f=e(35),g=e(616),v=i(g),x=e(644),y=i(x),w=e(609),b=i(w);a.default={components:{"el-table":f.Table,"el-table-column":f.TableColumn,"el-progress":f.Progress,"el-tabs":f.Tabs,"el-tab-pane":f.TabPane,"el-button":f.Button,"el-pagination":f.Pagination,Topo:v.default,ChartLineBar:p.default,ChartPie:m.default,FilterBarComplex:d.default},mixins:[b.default],data:function(){return{curFRRowIndex:999,curSBtn:!0,secondShow:!1,filterListData:[],timeSection:{},update:0,topoData:{},snapshotList:[],attachmentSummary:{show:!0,formatter:function(t){var a=[];switch(t.type){case"USER":t.elapsedTime&&a.push(t.elapsedTime+" ms(100%)"),t.error&&a.push(t.error+" errors");break;case"SERVER":t.elapsedTime&&a.push(o.default.toDecimal(t.elapsedTime)+" ms");var e=t.rpm;a.push(e+" rpm"),t.epm&&a.push(t.epm+" epm")}return a},position:"left"},topFiveList:[{a:"",b:"/cart",c:"111ms"},{a:"",b:"/cart",c:"111ms"},{a:"",b:"/cart",c:"111ms"},{a:"",b:"/cart",c:"111ms"},{a:"",b:"/cart",c:"111ms"}],errorsummary:{list:[],optionData:{}},chartDataBarDistribute:{},DataErr:{title:{}},componentName:"",percentageN:0,performanceSummariesData:{percentArr:[0,0,0]},TransactiondiagramtopNcomponentsData:[{name:"",timeContributed:""},{name:"",timeContributed:""},{name:"",timeContributed:""}],TransactiondiagramtimecontributedData:{},TransactiondiagramtopNcallsData:[],TransactionsnaplistData:{list:[],total:0},TransactionsnapsectionsData:{},TransactiondiagramreqcountsummaryData:{},TransactiondiagramreqcountsectionsummaryData:{errorReqCount:0,normalReqCount:0,slowReqCount:0,veryslowReqCount:0,total:0,percent:[0,0,0,0]},snapListindex:0,sortField:"responseTime",sortOrder:"false",tabId:0,snapListloading:!0,topBarData:[],fiterBarData:[]}},computed:{transName:function(){return this.$route.query.transName},minResponseTime:function(){var t=this.fiterBarData.find(function(t){return 2===t.itemId});if(!t)return"";t.infoData[0].val},maxResponseTime:function(){var t=this.fiterBarData.find(function(t){return 2===t.itemId});if(!t)return"";t.infoData[1].val},transType:function(){return this.fiterBarData.find(function(t){return 1===t.itemId})&&this.fiterBarData.find(function(t){return 1===t.itemId}).infoData.map(function(t){return t.value})||[]},instanceArray:function(){return this.fiterBarData.find(function(t){return 3===t.itemId})&&this.fiterBarData.find(function(t){return 3===t.itemId}).infoData.map(function(t){return t.value})||[]}},mounted:function(){},watch:{componentName:function(){this.getTransactiondiagramtimecontributedData(),this.getTransactiondiagramtopNcallsData()},percentageN:function(){this.getTransactiondiagramreqcountsummaryData(),this.getTransactiondiagramreqcountsectionsummaryData()}},methods:{showSecondInfo:function(t,a){this.secondShow?this.secondShow=this.componentName!==t:this.secondShow=!0,this.curFRRowIndex=a,this.componentName=t},tabClick:function(t){var a=Number(t.index);switch(a){case 0:this.tabId=a;break;case 1:this.tabId=a,this.getTopoData();break;case 2:this.tabId=a,this.getTransactionsnapsectionsData(),this.getTransactionsnaplistData()}},goToNextPage:function(t){this.$root.eventBus.openTab({name:t,options:{traceId:t,appId:this.$root.eventBus.getCurSystem().id||"",queryStr:this.transName}})},topbarChange:function(t){this.topBarQueryData=t,this.getData()},filterbarChange:function(t){this.fiterBarData=t,this.getData()},getData:function(){this.getFilterData(),this.getPerformanceSummariesData(),this.getTransactiondiagramtopNcomponentsData(),this.getTransactiondiagramreqcountsummaryData(),this.getTransactiondiagramreqcountsectionsummaryData(),this.getTransactionerrorsummaryData(),1===this.tabId&&this.getTopoData(),2===this.tabId&&(this.getTransactionsnapsectionsData(),this.getTransactionsnaplistData())},snapSortChange:function(t){switch(t.prop){case"elapsed":this.sortField="responseTime";break;case"startTime":this.sortField="startTime"}switch(t.order){case"ascending":this.sortOrder="true";break;case"descending":this.sortOrder="false"}this.getTransactionsnaplistData()},getTransactionsnaplistData:function(){var t=this;this.snapListloading=!0,this.api.getTransactionsnaplist({data:{startTime:this.startTime,endTime:this.endTime,appId:this.appId,transName:this.transName,minResponseTime:this.minResponseTime,maxResponseTime:this.maxResponseTime,transType:this.transType,instanceArray:this.instanceArray,order:{field:this.sortField,asc:this.sortOrder},index:this.snapListindex,size:10}}).then(function(a){0===a.code&&(a.data.snapArray.map(function(t){t.startTime=o.default.formatDate(t.startTime);var a=t.transType||"NORMAL";t.transClass=(0,l.apdexConverter)(a).apdexIconClass}),t.TransactionsnaplistData.list=a.data.snapArray,t.TransactionsnaplistData.total=a.data.totalSize)}).always(function(a){t.snapListloading=!1})},getTransactionerrorsummaryData:function(){var t=this;this.api.getTransactionerrorsummary({data:{startTime:this.startTime,endTime:this.endTime,interval:this.interval,aggrInterval:this.aggrInterval,appId:this.appId,transName:this.transName,minResponseTime:this.minResponseTime,maxResponseTime:this.maxResponseTime,transType:this.transType,instanceArray:this.instanceArray}}).then(function(a){if(0===a.code){a.data.reqCountPieItemList.map(function(t){t.finishTime=o.default.formatDate(t.finishTime),t.stringTime=o.default.formatDate(t.stringTime)});var e=a.data.reqCountPieItemList;t.errorsummary.list=e,t.errorsummary.optionData={legend:{orient:"vertical",x:"300",y:"middle",data:e.map(function(t){return t.error}),formatter:function(t){return t}},series:[{name:"错误",data:e.map(function(t){return{value:t.value,name:t.error}})}]}}})},getTransactiondiagramreqcountsectionsummaryData:function(){var t=this;this.api.getTransactiondiagramreqcountsectionsummary({data:{startTime:this.startTime,endTime:this.endTime,interval:this.interval,appId:this.appId,aggrInterval:this.aggrInterval,transName:this.transName,minResponseTime:this.minResponseTime,maxResponseTime:this.maxResponseTime,transType:this.transType,instanceArray:this.instanceArray,percentageN:this.percentageN}}).then(function(a){if(0===a.code){var e=o.default.toPercentageP([a.data.normalReqCount||0,a.data.slowReqCount||0,a.data.veryslowReqCount||0,a.data.errorReqCount||0]);t.TransactiondiagramreqcountsectionsummaryData={errorReqCount:a.data.errorReqCount||0,normalReqCount:a.data.normalReqCount||0,slowReqCount:a.data.slowReqCount||0,veryslowReqCount:a.data.veryslowReqCount||0,total:a.data.errorReqCount+a.data.normalReqCount+a.data.slowReqCount+a.data.veryslowReqCount,percent:e}}})},getTransactiondiagramreqcountsummaryData:function(){var t=this;this.api.getTransactiondiagramreqcountsummary({data:{startTime:this.startTime,endTime:this.endTime,interval:this.interval,aggrInterval:this.aggrInterval,appId:this.appId,transName:this.transName,minResponseTime:this.minResponseTime,maxResponseTime:this.maxResponseTime,transType:this.transType,instanceArray:this.instanceArray,percentageN:this.percentageN}}).then(function(a){if(0===a.code){var e=a.data.avgline,i=a.data.bar;t.TransactiondiagramreqcountsummaryData={legend:{data:["正常","缓慢","非常慢","错误","平均响应时间"]},xAxis:[{data:i.map(function(t){return o.default.formatDate(t.time,2)})}],yAxis:[{type:"value",name:"",axisLabel:{formatter:"{value} 次"}},{type:"value",name:"",axisLabel:{formatter:"{value} ms"}}],series:[{name:"正常",type:"bar",stack:"总量",data:i.map(function(t){return t.normalReqCount})},{name:"缓慢",type:"bar",stack:"总量",data:i.map(function(t){return t.slowReqCount})},{name:"非常慢",type:"bar",stack:"总量",data:i.map(function(t){return t.veryslowReqCount})},{name:"错误",type:"bar",stack:"总量",data:i.map(function(t){return t.errorReqCount})},{name:"平均响应时间",type:"line",yAxisIndex:1,data:e.map(function(t){return t.value})}]}}})},getTransactionsnapsectionsData:function(){var t=this;this.api.getTransactionsnapsections({data:{startTime:this.startTime,endTime:this.endTime,appId:this.appId,transName:this.transName,minResponseTime:this.minResponseTime,maxResponseTime:this.maxResponseTime,transType:this.transType,instanceArray:this.instanceArray,responseTimeSectionArray:[{min:0,max:150},{min:150,max:250},{min:250,max:500},{min:500,max:1e3},{min:1e3,max:1500},{min:1500,max:2e3},{min:2e3,max:2500},{min:2500,max:3e3},{min:3e3,max:3e6}]}}).then(function(a){if(0===a.code){var e=a.data.responseTimeSectionArray,i=e.map(function(t,a){return a===e.length-1?t.timeSection.min+"ms以上":t.timeSection.min+"-"+t.timeSection.max+"ms"}),s=e.map(function(t){return t.numOfTrans});t.TransactionsnapsectionsData={xAxis:[{type:"category",data:["错误"].concat((0,r.default)(i))}],yAxis:[{type:"value",name:"",axisLabel:{formatter:"{value} 次"}}],series:[{name:"",type:"bar",data:[a.data.errorSection].concat((0,r.default)(s))}]}}})},getTransactiondiagramtopNcallsData:function(){var t=this;this.api.getTransactiondiagramtopNcalls({data:{startTime:this.startTime,endTime:this.endTime,appId:this.appId,transName:this.transName,minResponseTime:this.minResponseTime,maxResponseTime:this.maxResponseTime,transType:this.transType,instanceArray:this.instanceArray,componentName:this.componentName,topN:5}}).then(function(a){0===a.code&&(a.data.transArray.map(function(t){var a=t.transType||"NORMAL";t.transClass=(0,l.apdexConverter)(a).apdexIconClass}),t.TransactiondiagramtopNcallsData=a.data.transArray)})},getTransactiondiagramtimecontributedData:function(){var t=this;this.api.getTransactiondiagramtimecontributed({data:{startTime:this.startTime,endTime:this.endTime,appId:this.appId,transName:this.transName,minResponseTime:this.minResponseTime,maxResponseTime:this.maxResponseTime,transType:this.transType,instanceArray:this.instanceArray,componentName:this.componentName}}).then(function(a){0===a.code&&(a.data.perRate=~~(a.data.timeContributed/t.performanceSummariesData.avgElapsed*100),t.TransactiondiagramtimecontributedData=a.data)})},getTransactiondiagramtopNcomponentsData:function(){var t=this;this.api.getTransactiondiagramtopNcomponents({data:{startTime:this.startTime,endTime:this.endTime,appId:this.appId,transName:this.transName,minResponseTime:this.minResponseTime,maxResponseTime:this.maxResponseTime,transType:this.transType,instanceArray:this.instanceArray,topN:3}}).then(function(a){0===a.code&&a.data.componentArray.length>0?(a.data.componentArray.map(function(t){t.timeContributed=o.default.toDecimal(t.timeContributed)}),a.data.componentArray.map(function(t){t.timeContributed=o.default.toDecimal(t.timeContributed)}),t.TransactiondiagramtopNcomponentsData=a.data.componentArray):t.TransactiondiagramtopNcomponentsData=[{name:"",timeContributed:""},{name:"",timeContributed:""},{name:"",timeContributed:""}]})},getPerformanceSummariesData:function(){var t=this;this.api.getPerformanceSummaries({data:{startTime:this.startTime,endTime:this.endTime,appId:this.appId,transName:this.transName,minResponseTime:this.minResponseTime,maxResponseTime:this.maxResponseTime,transType:this.transType,instanceArray:this.instanceArray}}).then(function(a){if(0===a.code){var e=a.data;"NaN"===e.avgCodeTime&&(e.avgCodeTime=0),"NaN"===e.avgDBTime&&(e.avgDBTime=0),"NaN"===e.avgElapsed&&(e.avgElapsed=0),"NaN"===e.avgThirdPartyTime&&(e.avgThirdPartyTime=0);var i=[e.avgCodeTime,e.avgDBTime,e.avgThirdPartyTime];a.data.percentArr=o.default.toPercentageP(i),t.performanceSummariesData=a.data}})},getFilterData:function(){var t=this;this.api.getFilterSummary({data:{startTime:this.startTime,endTime:this.endTime,appId:this.appId,transName:this.transName}}).then(function(a){0===a.code&&(t.filterListData=[{text:"事务情况",disable:!1,type:1,itemId:1,listData:[{name:"正常",id:"NORMAL"},{name:"缓慢",id:"SLOW"},{name:"非常慢",id:"VERY_SLOW"},{name:"错误",id:"ERROR"}]},{text:"响应时间",type:2,disable:!1,itemId:2}])})},getTopoData:function(){var t=this,a=this;this.api.getsecondtopology({data:{condition:{appId:this.appId,startTime:this.startTime,endTime:this.endTime,transName:this.transName}}}).then(function(e){if(0===e.code){e.data.links.map(function(t,a){"USER"===t.source.type?t.label="":t.label=t.elapsedTime+" ms"}),e.data.nodes.map(function(t,a){"USER"===t.type&&(t.elapsedTime=""),t.health?t.status=[{value:1,name:o.default.handleHealthy(t.health).Status}]:t.status=""}),t.topoData=e.data;(new y.default).layout($(".topo-box")[0],t.topoData),setTimeout(function(){a.update++,console.log("outer update:"+a.update)},50)}})},TransactionsnaplistDataPageChange:function(t){this.snapListindex=t-1,this.getTransactionsnaplistData()}}}},802:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e(778),s=function(t){return t&&t.__esModule?t:{default:t}}(i);a.default=s.default},850:function(t,a,e){a=t.exports=e(566)(),a.push([t.i,".title[data-v-f2ed138a]{padding:0 10px;height:30px;line-height:30px;text-align:left;border-bottom:1px solid #e1e1e1}.graph-content .row-first[data-v-f2ed138a]{padding:0 10px;display:flex;min-height:155px}.graph-content .row-first .l[data-v-f2ed138a]{position:relative;width:30%}.graph-content .row-first .l .half-circle[data-v-f2ed138a]{position:absolute;width:140px;height:140px;border-radius:100%;background:#eef4ff;text-align:center;color:#fff}.graph-content .row-first .l .half-circle .center[data-v-f2ed138a]{left:6px;top:6px;position:absolute;border:6px solid #c8ddff;background:#5b97fb;width:130px;height:130px;line-height:120px;border-radius:100%}.graph-content .row-first .l .list-wrap[data-v-f2ed138a]{margin-top:-5px;margin-left:165px;position:absolute;height:140px;width:100%}.graph-content .row-first .l .list-wrap li[data-v-f2ed138a]{background:#f7f7f7;border-radius:6px;border:1px solid #e1e1e1;padding:4px;margin-top:8px;height:40px}.graph-content .row-first .l .list-wrap li .hd[data-v-f2ed138a]{padding:4px}.graph-content .row-first .r[data-v-f2ed138a]{flex:1;padding-left:200px}.graph-content .row-first .r .list-wrap[data-v-f2ed138a]{margin-top:-5px}.graph-content .row-first .r .list-wrap li[data-v-f2ed138a]{padding:0 10px;background:#f7f7f7;border-radius:6px;border:1px solid #e1e1e1;height:40px;width:100%;margin-top:8px}.graph-content .row-first .r .list-wrap li span[data-v-f2ed138a]{line-height:40px}.graph-content .row-first .r .list-wrap li .component-name[data-v-f2ed138a]{display:block;float:left;width:80%;color:#2b8dd1;cursor:pointer;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.graph-content .row-first .r .list-wrap li .rtext[data-v-f2ed138a]{float:right}.graph-content .row-first .r .list-wrap li.cur[data-v-f2ed138a]{color:#fff;background:#2b8dd1}.graph-content .row-first .r .list-wrap li.cur .component-name[data-v-f2ed138a]{color:#fff}.graph-content .row-second[data-v-f2ed138a]{border-top:1px solid #e1e1e1;margin-top:24px;display:flex;padding:24px 0 10px}.graph-content .row-second .url-name[data-v-f2ed138a]{color:#2b8dd1;cursor:pointer}.graph-content .row-second .left-box[data-v-f2ed138a]{width:200px;border:1px solid #e1e1e1;height:110px;border-radius:6px}.graph-content .row-second .left-box .title[data-v-f2ed138a]{padding:0 10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.graph-content .row-second .left-box .content[data-v-f2ed138a]{padding-top:30px;height:80px;text-align:center}.graph-content .row-second .arrow-box[data-v-f2ed138a]{margin-top:50px;width:100px;text-align:center}.graph-content .row-second .arrow-box .b[data-v-f2ed138a],.graph-content .row-second .arrow-box .t[data-v-f2ed138a]{height:20px;line-height:20px}.graph-content .row-second .arrow-box .line[data-v-f2ed138a]{width:90px;float:left;border-bottom:1px solid #ccc}.graph-content .row-second .arrow-box .arrow[data-v-f2ed138a]{margin-top:-4px;float:right;width:0;height:0;border-top:5px solid transparent;border-left:10px solid #ccc;border-bottom:5px solid transparent}.graph-content .row-second .math-box[data-v-f2ed138a]{width:300px;border:1px solid #e1e1e1;height:190px;border-radius:6px}.graph-content .row-second .math-box .title[data-v-f2ed138a]{padding:0 10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.graph-content .row-second .math-box .content[data-v-f2ed138a]{padding-top:10px}.graph-content .row-second .math-box .content .line[data-v-f2ed138a]{border-bottom:1px solid #e1e1e1;margin-bottom:10px}.graph-content .row-second .math-box .content .tr[data-v-f2ed138a]{padding:0 10px 10px;display:flex}.graph-content .row-second .math-box .content .tr .equal[data-v-f2ed138a]{font-weight:700;font-size:16px;float:left;margin-top:-3px}.graph-content .row-second .math-box .content .tr .icon[data-v-f2ed138a]{vertical-align:middle}.graph-content .row-second .math-box .content .tr .c-1[data-v-f2ed138a]{width:20px}.graph-content .row-second .math-box .content .tr .c-2[data-v-f2ed138a]{text-align:right;width:100px}.graph-content .row-second .math-box .content .tr .c-3[data-v-f2ed138a]{text-align:right;flex:1}.graph-content .row-second .math-box .content .tr .c-4[data-v-f2ed138a]{flex:1;padding-left:36px}.graph-content .row-second .list-box[data-v-f2ed138a]{border-radius:6px;flex:1;border:1px solid #e1e1e1}.graph-content .row-third[data-v-f2ed138a]{margin:-24px 0;display:flex}.graph-content .row-third .l[data-v-f2ed138a]{flex:1}.graph-content .row-third .l .chart-wrap[data-v-f2ed138a]{height:250px}.graph-content .row-third .l .r-btn[data-v-f2ed138a]{cursor:pointer;padding:5px 10px;border-radius:20px}.graph-content .row-third .l .r-btn.cur[data-v-f2ed138a]{background:#2979ff;color:#fff;padding:5px 10px;border-radius:20px}.graph-content .row-third .r[data-v-f2ed138a]{width:30%}.graph-content .row-third .r .list-wrap[data-v-f2ed138a]{width:100%;margin:24px 0}.graph-content .row-third .r .list-wrap td[data-v-f2ed138a]{line-height:42px;padding:10px}.graph-content .row-third .r .list-wrap .c-1[data-v-f2ed138a]{width:60px;text-align:right}.graph-content .row-third .r .list-wrap .c-3[data-v-f2ed138a]{width:100px;text-align:center}.graph-content .row-fourth .main-con[data-v-f2ed138a]{display:flex}.graph-content .row-fourth .main-con .l[data-v-f2ed138a]{width:400px}.graph-content .row-fourth .main-con .l .chart-wrap[data-v-f2ed138a]{height:300px}.graph-content .row-fourth .main-con .r[data-v-f2ed138a]{flex:1;padding:30px}.topo-box[data-v-f2ed138a]{height:500px}.snapshot-analyze .chartbar-warp[data-v-f2ed138a]{height:300px}.icon-health[data-v-f2ed138a]{display:inline-block;font-size:12px;width:24px;height:24px;background-repeat:no-repeat;background-size:cover;vertical-align:middle}.icon-health-normal[data-v-f2ed138a]{background-image:url(/static/images/health_normal.png)}.icon-health-slow[data-v-f2ed138a]{background-image:url(/static/images/health_slow.png)}.icon-health-very-slow[data-v-f2ed138a]{background-image:url(/static/images/health_very_slow.png)}.icon-health-error[data-v-f2ed138a]{background-image:url(/static/images/health_error.png)}",""])},884:function(t,a,e){var i=e(850);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(567)("44b68d20",i,!0)},940:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"single-transaction"},[e("top-bar",{attrs:{title:"事务",showBack:!0},on:{barChange:t.topbarChange}}),t._v(" "),e("el-tabs",{staticClass:"tabs-transaction",on:{"tab-click":t.tabClick}},[e("el-tab-pane",{attrs:{label:"图表分析"}},[e("div",{staticClass:"graph-content"},[e("div",{staticClass:"common-container"},[e("div",{staticClass:"content"},[e("div",{staticClass:"row-first"},[e("div",{staticClass:"l"},[e("div",{staticClass:"list-wrap"},[e("ul",[e("li",[e("div",{staticClass:"hd"},[e("i",{staticClass:"icon ion-gear-a"}),t._v(" "),e("span",[t._v("代码执行时间："+t._s(t.performanceSummariesData.avgCodeTime)+" ms")])]),t._v(" "),e("el-progress",{attrs:{"show-text":!1,percentage:t.performanceSummariesData.percentArr[0]}})],1),t._v(" "),e("li",[e("div",{staticClass:"hd"},[e("i",{staticClass:"icon ion-soup-can"}),t._v(" "),t.performanceSummariesData.avgDBTime>0?e("span",[t._v("数据库调用时间："+t._s(t.performanceSummariesData.avgDBTime)+" ms")]):e("span",[t._v("无数据库调用时间")])]),t._v(" "),e("el-progress",{attrs:{"show-text":!1,percentage:t.performanceSummariesData.percentArr[1]}})],1),t._v(" "),e("li",[e("div",{staticClass:"hd"},[e("i",{staticClass:"icon ion-stats-bars"}),t._v(" "),t.performanceSummariesData.avgThirdPartyTime>0?e("span",[t._v("第三方调用："+t._s(t.performanceSummariesData.avgThirdPartyTime)+" ms")]):e("span",[t._v("无第三方调用")])]),t._v(" "),e("el-progress",{attrs:{"show-text":!1,percentage:t.performanceSummariesData.percentArr[2]}})],1)])]),t._v(" "),e("div",{staticClass:"half-circle"},[e("div",{staticClass:"center"},[t._v(t._s(t.performanceSummariesData.avgElapsed)+" ms")])])]),t._v(" "),e("div",{staticClass:"r"},[e("ul",{staticClass:"list-wrap"},t._l(t.TransactiondiagramtopNcomponentsData,function(a,i){return e("li",{key:i,staticClass:"clearfix",class:{cur:t.curFRRowIndex===i},on:{click:function(e){t.showSecondInfo(a.name,i)}}},[e("span",{staticClass:" component-name"},[t._v(t._s(a.name))]),t._v(" "),e("span",{staticClass:" rtext"},[t._v(t._s(a.timeContributed)+" ms")])])}))])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.secondShow,expression:"secondShow"}],staticClass:"row-second clearfix"},[e("div",{staticClass:"left-box"},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.transName))])]),t._v(" "),e("div",{staticClass:"content"},[e("span",[t._v("平均响应时间 "+t._s(t.performanceSummariesData.avgElapsed)+" ms")])])]),t._v(" "),e("div",{staticClass:"arrow-box"},[e("div",{staticClass:"t"},[t._v(t._s(t.TransactiondiagramtimecontributedData.transRate)+"%")]),t._v(" "),e("div",{staticClass:"c"},[e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"arrow"})]),t._v(" "),e("div",{staticClass:"b"},[t._v(t._s(t.TransactiondiagramtimecontributedData.timesPerTrans)+"次")])]),t._v(" "),e("div",{staticClass:"math-box"},[e("div",{staticClass:"title"},[t._v(t._s(t.componentName))]),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"tr"},[e("div",{staticClass:"c-1"}),t._v(" "),e("div",{staticClass:"c-2"},[t._v("平均响应时间")]),t._v(" "),e("div",{staticClass:"c-3"},[t._v(t._s(t.TransactiondiagramtimecontributedData.averageResponseTime)+" ms")])]),t._v(" "),e("div",{staticClass:"tr"},[e("div",{staticClass:"c-1"},[e("i",{staticClass:"icon ion-close"})]),t._v(" "),e("div",{staticClass:"c-2"},[t._v("调用比例")]),t._v(" "),e("div",{staticClass:"c-3"},[t._v(t._s(t.TransactiondiagramtimecontributedData.transRate)+" %")])]),t._v(" "),e("div",{staticClass:"tr"},[e("div",{staticClass:"c-1"},[e("i",{staticClass:"icon ion-close"})]),t._v(" "),e("div",{staticClass:"c-2"},[t._v("调用次数／请求")]),t._v(" "),e("div",{staticClass:"c-3"},[t._v(t._s(t.TransactiondiagramtimecontributedData.timesPerTrans)+" 次")])]),t._v(" "),e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"tr"},[e("div",{staticClass:"c-1"},[e("span",{staticClass:"equal"},[t._v("=")])]),t._v(" "),e("div",{staticClass:"c-2"},[t._v("响应时间贡献值")]),t._v(" "),e("div",{staticClass:"c-3"},[t._v(t._s(t.TransactiondiagramtimecontributedData.timeContributed)+" ms")])]),t._v(" "),e("div",{staticClass:"tr"},[e("div",{staticClass:"c-4"},[e("el-progress",{attrs:{"text-inside":!0,"stroke-width":12,percentage:t.TransactiondiagramtimecontributedData.perRate}})],1)])])]),t._v(" "),e("div",{staticClass:"arrow-box"},[e("div",{staticClass:"t"}),t._v(" "),e("div",{staticClass:"c"},[e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"arrow"})]),t._v(" "),e("div",{staticClass:"b"})]),t._v(" "),e("div",{staticClass:"list-box"},[e("div",{staticClass:"title"},[t._v("相关请求(TOP5)")]),t._v(" "),e("div",{staticClass:"content"},[e("el-table",{staticClass:"table-list",attrs:{data:t.TransactiondiagramtopNcallsData}},[e("el-table-column",{attrs:{label:"URL",prop:"url"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("i",{staticClass:"icon-apdex fn-fl mr6",class:a.row.transClass,attrs:{title:"正常"}}),t._v(" "),e("a",{staticClass:"theme-font-color-primary",staticStyle:{"{\n                 overflow":"hidden","text-overflow":"ellipsis","word-wrap":"break-word",display:"-webkit-box","-webkit-line-clamp":"3","-webkit-box-orient":"vertical"},attrs:{href:"javascript:void(0);"},on:{click:function(e){t.goToNextPage(a.row.transId)}}},[t._v(t._s(a.row.url))])]}}])}),t._v(" "),e("el-table-column",{attrs:{width:"100",label:"执行时间(ms)",prop:"componentsElapsed"}})],1)],1)])])])]),t._v(" "),e("div",{staticClass:"row-third"},[e("div",{staticClass:"l"},[e("div",{staticClass:"common-container"},[e("div",{staticClass:"header-title"},[e("i",{staticClass:"title-icon icon ion-stats-bars"}),t._v(" "),e("span",{staticClass:"title-name"},[t._v("响应时间和请求数")]),t._v(" "),e("div",{staticClass:"right-info"},[e("span",{staticClass:"r-btn",class:{cur:0===t.percentageN},on:{click:function(a){t.percentageN=0}}},[t._v("所有")]),t._v(" "),e("span",{staticClass:"r-btn",class:{cur:10===t.percentageN},on:{click:function(a){t.percentageN=10}}},[t._v("10%")]),t._v(" "),e("span",{staticClass:"r-btn",class:{cur:5===t.percentageN},on:{click:function(a){t.percentageN=5}}},[t._v("5%")])])]),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"chart-wrap"},[e("ChartLineBar",{attrs:{optionData:t.TransactiondiagramreqcountsummaryData}})],1)])])]),t._v(" "),e("div",{staticClass:"r"},[e("div",{staticClass:"common-container",staticStyle:{"margin-left":"0"}},[e("div",{staticClass:"header-title"},[e("i",{staticClass:"title-icon icon ion-stats-bars"}),t._v(" "),e("span",{staticClass:"title-name"},[t._v("请求统计")]),t._v(" "),e("div",{staticClass:"right-info"},[e("span",[t._v("共"+t._s(t.TransactiondiagramreqcountsectionsummaryData.total)+"次")])])]),t._v(" "),e("table",{staticClass:"list-wrap"},[e("tr",[e("td",{staticClass:"c-1"},[t._v("正常")]),t._v(" "),e("td",{staticClass:"c-2"},[e("el-progress",{attrs:{"text-inside":!0,"stroke-width":12,percentage:t.TransactiondiagramreqcountsectionsummaryData.percent[0]}})],1),t._v(" "),e("td",{staticClass:"c-3"},[t._v(t._s(t.TransactiondiagramreqcountsectionsummaryData.normalReqCount))])]),t._v(" "),e("tr",[e("td",{staticClass:"c-1"},[t._v("缓慢")]),t._v(" "),e("td",{staticClass:"c-2"},[e("el-progress",{attrs:{"text-inside":!0,"stroke-width":12,percentage:t.TransactiondiagramreqcountsectionsummaryData.percent[1]}})],1),t._v(" "),e("td",{staticClass:"c-3"},[t._v(t._s(t.TransactiondiagramreqcountsectionsummaryData.slowReqCount))])]),t._v(" "),e("tr",[e("td",{staticClass:"c-1"},[t._v("非常慢")]),t._v(" "),e("td",{staticClass:"c-2"},[e("el-progress",{attrs:{"text-inside":!0,"stroke-width":12,percentage:t.TransactiondiagramreqcountsectionsummaryData.percent[2]}})],1),t._v(" "),e("td",{staticClass:"c-3"},[t._v(t._s(t.TransactiondiagramreqcountsectionsummaryData.veryslowReqCount))])]),t._v(" "),e("tr",[e("td",{staticClass:"c-1"},[t._v("错误")]),t._v(" "),e("td",{staticClass:"c-2"},[e("el-progress",{attrs:{"text-inside":!0,"stroke-width":12,percentage:t.TransactiondiagramreqcountsectionsummaryData.percent[3]}})],1),t._v(" "),e("td",{staticClass:"c-3"},[t._v(t._s(t.TransactiondiagramreqcountsectionsummaryData.errorReqCount))])])])])])]),t._v(" "),e("div",{staticClass:"common-container"},[e("div",{staticClass:"header-title"},[e("i",{staticClass:"title-icon icon ion-stats-bars"}),t._v(" "),e("span",{staticClass:"title-name"},[t._v("错误信息(Top5)")])]),t._v(" "),e("div",{staticClass:"row-fourth"},[e("div",{staticClass:"main-con"},[e("div",{staticClass:"l"},[e("div",{staticClass:"chart-wrap"},[e("ChartPie",{attrs:{optionData:t.errorsummary.optionData}})],1)]),t._v(" "),e("div",{staticClass:"r"},[e("el-table",{staticClass:"table-list",attrs:{data:t.errorsummary.list}},[e("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),e("el-table-column",{attrs:{label:"错误信息",prop:"error"}}),t._v(" "),e("el-table-column",{attrs:{label:"发生次数",prop:"value"}}),t._v(" "),e("el-table-column",{attrs:{label:"开始时间",prop:"stringTime"}}),t._v(" "),e("el-table-column",{attrs:{label:"结束时间",prop:"finishTime"}})],1)],1)])])])])]),t._v(" "),e("el-tab-pane",{attrs:{label:"拓扑图"}},[e("div",{staticClass:"common-container"},[e("div",{staticClass:"topo-box"},[e("Topo",{key:"single-transaction",attrs:{data:t.topoData,update:t.update,attachmentSummary:t.attachmentSummary}})],1)])]),t._v(" "),e("el-tab-pane",{attrs:{label:"快照分析"}},[e("div",{staticClass:"snapshot-analyze"},[e("div",{staticClass:"common-container"},[e("div",{staticClass:"header-title"},[e("i",{staticClass:"title-icon icon ion-stats-bars"}),t._v(" "),e("span",{staticClass:"title-name"},[t._v("事务分布图")])]),t._v(" "),e("div",{staticClass:"chartbar-warp"},[e("ChartLineBar",{attrs:{optionData:t.TransactionsnapsectionsData}})],1)]),t._v(" "),e("div",{staticClass:"common-container"},[e("div",{staticClass:"header-title"},[e("i",{staticClass:"title-icon icon ion-stats-bars"}),t._v(" "),e("span",{staticClass:"title-name"},[t._v("快照列表")])]),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"list-wrap"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.snapListloading,expression:"snapListloading"}],staticClass:"table-list",attrs:{data:t.TransactionsnaplistData.list},on:{"sort-change":t.snapSortChange}},[e("el-table-column",{attrs:{label:"URL",prop:"url"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("i",{staticClass:"icon-apdex ",class:a.row.transClass,attrs:{title:"正常"}}),t._v(" "),e("a",{staticClass:"theme-font-color-primary",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.goToNextPage(a.row.transId)}}},[t._v(t._s(a.row.url))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"发生时间",prop:"startTime",sortable:"custom"}}),t._v(" "),e("el-table-column",{attrs:{label:"响应时间(ms)",prop:"elapsed",sortable:"custom"}}),t._v(" "),e("el-table-column",{attrs:{label:"tier",prop:"tierName"}}),t._v(" "),e("el-table-column",{attrs:{label:"实例",prop:"instance"}})],1)],1),t._v(" "),e("div",[e("div",{staticClass:"pag-wrap"},[e("el-pagination",{attrs:{layout:"total, prev, pager, next","page-size":10,total:t.TransactionsnaplistData.total},on:{"current-change":t.TransactionsnaplistDataPageChange}})],1)])])])])])],1)],1)},staticRenderFns:[]}}});