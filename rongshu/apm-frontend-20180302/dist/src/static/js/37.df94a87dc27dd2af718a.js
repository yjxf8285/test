/*! 2018-3-2 author:liuxiaofan */
webpackJsonp([37],{590:function(t,e,r){r(855);var a=r(54)(r(799),r(903),null,null);t.exports=a.exports},609:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(140),i=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default={data:function(){return{topBarQueryData:{}}},props:{},watch:{},computed:{appId:function(){return this.topBarQueryData.system.id},startTime:function(){return Number(this.topBarQueryData.time.startTime)},endTime:function(){return i.default.cutEndTime(Number(this.topBarQueryData.time.endTime))},aggrInterval:function(){return i.default.intervalToGranularity(this.endTime-this.startTime)},interval:function(){return""}},methods:{}}},799:function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(t,e){t[0]?t[0].children?i(t[0].children,e):t[0].children=[{label:e.className+"."+e.methodName+" ("+e.lineNumber+")"}]:t[0]={label:e.className+"."+e.methodName+" ("+e.lineNumber+")"}}Object.defineProperty(e,"__esModule",{value:!0});var n=r(91),o=a(n),s=r(35),l=r(609),d=a(l);e.default={name:"threaddump-report",components:{"el-table":s.Table,"el-table-column":s.TableColumn,"el-button":s.Button,"el-dropdown":s.Dropdown,"el-dropdown-menu":s.DropdownMenu,"el-dropdown-item":s.DropdownItem,"el-input":s.Input,"el-slider":s.Slider,"el-tag":s.Tag,"el-tree":s.Tree,"el-dialog":s.Dialog},mixins:[d.default],mounted:function(){this.getThreaddumpAnalysisReport()},data:function(){return{threadList:[],currentThread:{},stackTrace:[],stackTraceVisible:!1,totalCpuTime:0,loadingInstance:{}}},watch:{currentThread:{deep:!0,handler:function(t){if(t&&t.stack_trace&&t.stack_trace.length){var e=[];t.stack_trace.forEach(function(t){i(e,t)}),this.stackTrace=e}}}},methods:{getThreaddumpAnalysisReport:function(){var t=this;t.api.getThreaddumpAnalysisReport({data:{condition:{id:this.$route.query.condition.id}},beforeSend:function(){t.loadingInstance=s.Loading.service({target:t.$refs.report})},complete:function(){t.loadingInstance.close()},success:function(e){e&&e.data&&e.data.length&&(t.threadList=e.data.sort(function(t,e){return e.cpu_time-t.cpu_time}),t.threadList&&t.threadList.length&&(t.totalCpuTime=t.threadList.reduce(function(t,e){return t+e.cpu_time},0),t.threadList=t.threadList.map(function(e){return e.cpu_time_rate=Number((e.cpu_time/t.totalCpuTime*100).toFixed(3))+"%",e})))}})},backToThreaddump:function(){this.$router.push({name:this.$route.query.tierId?"tier-threaddump":"threaddump",query:(0,o.default)({},this.$route.query,{sys:this.$route.query.sys,ins:this.$route.query.ins})})},selectThread:function(t){this.currentThread=t,this.stackTraceVisible=!0}}}},821:function(t,e,r){e=t.exports=r(566)(),e.push([t.i,'.threaddump-report .query-bar{margin:24px;background-color:#fff;height:32px;padding:0;box-shadow:0 0 1px rgba(60,65,71,.5)}.threaddump-report .query-bar .getback-btn{border-top:none;border-right:none;border-bottom:none;border-left:1px solid #dcdcdc;height:32px;line-height:32px;padding:0 10px;cursor:pointer}.threaddump-report .query-bar .getback-btn:hover{background:#2879ff;color:#fff}.threaddump-report .table-title{padding-bottom:10px;margin:30px 0 15px;border-bottom:1px solid;font-size:16px;font-weight:400}.threaddump-report .info-area{padding:10px;border:1px solid;border-radius:2px;margin:24px}.threaddump-report .info-area .info{display:inline-block;margin-right:16px}.threaddump-report .info-area .label{font-weight:700}.threaddump-report .info-area .label:after{content:"\\FF1A"}.threaddump-report .thread-row{cursor:pointer}',""])},855:function(t,e,r){var a=r(821);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);r(567)("34725c94",a,!0)},903:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"report",staticClass:"threaddump-report"},[r("div",{staticClass:"query-bar"},[r("div",{staticClass:"getback-btn fn-fr",on:{click:t.backToThreaddump}},[r("span",[t._v("返回")])])]),t._v(" "),r("div",[r("div",{staticClass:"info-area theme-border-color-base theme-background-color-normal-1"},[r("div",{staticClass:"info"},[r("span",{staticClass:"label"},[t._v("开始时间")]),t._v(" "),r("el-tag",{attrs:{type:"gray"}},[t._v(t._s(t.$route.query.condition.start_time||"--"))])],1),t._v(" "),r("div",{staticClass:"info"},[r("span",{staticClass:"label"},[t._v("持续时间（min）")]),t._v(" "),r("el-tag",{attrs:{type:"gray"}},[t._v(t._s(t.$route.query.condition.interval?t.$route.query.condition.interval/6e4:"--"))])],1),t._v(" "),r("div",{staticClass:"info"},[r("span",{staticClass:"label"},[t._v("实例")]),t._v(" "),r("el-tag",{attrs:{type:"gray"}},[t._v(t._s(t.$route.query.condition.agent_name||"--"))])],1)]),t._v(" "),r("div",{staticClass:"common-container"},[r("div",{staticClass:"header-title"},[r("i",{staticClass:"title-icon icon ion-podium"}),t._v(" "),r("span",{staticClass:"title-name"},[t._v("线程耗时")]),t._v(" "),r("div",{staticClass:"right-info"},[r("span",[t._v("线程数："+t._s(t.threadList.length))]),t._v(" "),r("span",[t._v("总CPU时间："+t._s((t.totalCpuTime/1e6).toFixed(0))+" （ms）")])])]),t._v(" "),r("div",{staticClass:"content"},[r("el-table",{ref:"threadTable",attrs:{data:t.threadList,stripe:"","highlight-current-row":""},on:{"row-click":t.selectThread}},[r("el-table-column",{attrs:{"class-name":"thread-row",prop:"id",label:"线程Id",width:"100"}}),t._v(" "),r("el-table-column",{attrs:{"class-name":"thread-row",prop:"name",label:"线程名"}}),t._v(" "),r("el-table-column",{attrs:{"class-name":"thread-row",prop:"cpu_time",formatter:function(t,e,r){return Number((t.cpu_time/1e6).toFixed(3))},label:"CPU时间(ms)"}}),t._v(" "),r("el-table-column",{attrs:{"class-name":"thread-row",prop:"cpu_time_rate",label:"CPU时间(%)"}}),t._v(" "),r("el-table-column",{attrs:{"class-name":"thread-row",prop:"state",label:"状态"}})],1),t._v(" "),r("el-dialog",{attrs:{title:"调用栈详情",visible:t.stackTraceVisible,size:"large"},on:{"update:visible":function(e){t.stackTraceVisible=e}}},[r("h4",{staticClass:"table-title theme-border-color-darken"},[t._v(t._s(t.currentThread.name))]),t._v(" "),r("el-tree",{attrs:{data:t.stackTrace,"default-expand-all":!0}})],1)],1)])])])},staticRenderFns:[]}}});