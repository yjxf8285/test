/*! 2018-3-2 author:liuxiaofan */
webpackJsonp([26],{583:function(t,e,a){a(869);var i=a(54)(a(785),a(920),"data-v-71c6f56e",null);t.exports=i.exports},608:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{chartColors:["#a8d96f","#85cae6","#fab421","#f38211","#49a778","#e66a3e","#9d6858","#83bc1c","#4d6e83","#bac1c8"]}},created:function(){$(window).on("resize",this.change)},destroyed:function(){$(window).off("resize",this.change)},methods:{change:function(){this.chart&&this.chart.resize()}}}},609:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(140),n=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={data:function(){return{topBarQueryData:{}}},props:{},watch:{},computed:{appId:function(){return this.topBarQueryData.system.id},startTime:function(){return Number(this.topBarQueryData.time.startTime)},endTime:function(){return n.default.cutEndTime(Number(this.topBarQueryData.time.endTime))},aggrInterval:function(){return n.default.intervalToGranularity(this.endTime-this.startTime)},interval:function(){return""}},methods:{}}},659:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(201),r=i(n),o=a(140),s=i(o),c=a(608),l=i(c);e.default={mixins:[l.default],props:{optionData:{type:Object,default:{}}},data:function(){return{defOption:{}}},computed:{noData:function(){return(0,r.default)(this.optionData).length<=0}},watch:{optionData:{deep:!0,handler:function(t){this.resetDefData(),this.renderChart()}}},mounted:function(){},methods:{resetDefData:function(){this.defOption={color:this.chartColors,legend:{orient:"vertical",x:"200",y:"middle",data:[],formatter:function(t){return t}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"容忍度",type:"pie",radius:["50%","70%"],center:["40%","50%"],label:{normal:{show:!1,position:"center"},emphasis:{show:!1,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:[]}]}},renderChart:function(){this.chart||(this.chart=echarts.init(this.$refs.chart)),this.chart.resize();var t=s.default.extend({},this.defOption,this.optionData);this.chart.setOption(t,!0),0===t.series[0].data.length&&this.chart.clear()}}}},672:function(t,e,a){e=t.exports=a(566)(),e.push([t.i,".chart[data-v-3ab9747e]{height:100%;display:flex;align-items:center;justify-content:center}",""])},674:function(t,e,a){var i=a(672);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(567)("2f744798",i,!0)},676:function(t,e,a){a(674);var i=a(54)(a(659),a(677),"data-v-3ab9747e",null);t.exports=i.exports},677:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"chart",staticClass:"chart"},[a("i",{staticClass:"el-icon-loading"})])},staticRenderFns:[]}},785:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(140),r=i(n),o=a(676),s=i(o),c=a(609),l=i(c),d=a(202),p=a(35);e.default={components:{PieHealthy:s.default,"el-input":p.Input,"el-form":p.Form,"el-form-item":p.FormItem,"el-dialog":p.Dialog,"el-button":p.Button},mixins:[l.default],data:function(){return{createDialogVisible:!1,createForm:{name:"",description:""},creatingLoading:!1,createRules:{name:[{required:!0,message:"请输入应用名称",trigger:"blur"},{max:80,message:"应用名称不能超过80个字符",trigger:"blur"},{validator:d.nameValidator,trigger:"blur"}]},paddingLeft:"0",appList:[]}},watch:{appList:function(){var t=this;this.$nextTick(function(){t.fixLeftPadding()})}},computed:{},mounted:function(){this.fixLeftPadding(),$(window).on("resize",this.fixLeftPadding),this.loadingInstance=p.Loading.service({fullscreen:!0})},methods:{barChange:function(t){this.topBarQueryData=t,this.getData()},create:function(){var t=this;t.$refs.createForm.validate(function(e){e&&t.api.createApplication({data:t.createForm,beforeSend:function(){t.creatingLoading=!0},complete:function(){t.creatingLoading=!1},success:function(e){t.createDialogVisible=!1,0===e.code?((0,p.Notification)({title:"创建成功",type:"success"}),t.getData(),t.createForm={name:"",description:""}):(0,p.Notification)({title:"创建失败",message:e.message,type:"error"})}})})},fixLeftPadding:function(){var t=0,e=$(".grid-content").width()+10,a=$(".grid-content").length,i=$(document).width(),n=parseInt(i/e);t=n<=a?i-e*n-63:i-e*a-63,this.paddingLeft=parseInt(t/2)+"px"},torouterLink:function(t,e){this.$root.eventBus.setCurSystem({id:t,name:e}),this.$router.push({name:"dashboard"})},getData:function(){var t=this;this.api.getAppOverview({data:{condition:{startTime:this.startTime,endTime:this.endTime}}}).then(function(e){0===e.code&&(t.loadingInstance.close(),e.data.map(function(t){t.rpm=r.default.toDecimal(t.rpm,1),t.avgResponseTime=r.default.toDecimal(t.avgResponseTime,1),t.health?t.healthClass=r.default.handleHealthy(t.health).IconClass:t.healthClass="icon-health-healthy"}),t.appList=e.data)}).always(function(){t.loadingInstance.close()})}}}},835:function(t,e,a){e=t.exports=a(566)(),e.push([t.i,".app-overview .new-btn-wrap[data-v-71c6f56e]{padding:24px 0 0 30px}.app-overview .grid-wrap[data-v-71c6f56e]{padding:24px 24px 19px}.app-overview .grid-wrap .grid-content[data-v-71c6f56e]{float:left;width:320px;height:400px;background:#fff;box-shadow:3px 3px 3px #ddd;border:1px solid #ccc;margin:0 5px 10px}.app-overview .grid-wrap .grid-content .title[data-v-71c6f56e]{cursor:pointer;padding:0 20px;height:40px;line-height:40px;border-bottom:1px solid #ccc}.app-overview .grid-wrap .grid-content .title .icon[data-v-71c6f56e]{font-size:20px;vertical-align:middle}.app-overview .grid-wrap .grid-content .title .text[data-v-71c6f56e]{width:250px;margin-left:4px;font-size:14px;vertical-align:middle;display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.app-overview .grid-wrap .grid-content .content .chart-wrap[data-v-71c6f56e]{height:180px}.app-overview .grid-wrap .grid-content .content .info-box[data-v-71c6f56e]{padding-top:10px;border-top:1px solid #ccc;margin:0 20px;display:flex;flex-wrap:wrap}.app-overview .grid-wrap .grid-content .content .info-box .box-con[data-v-71c6f56e]{padding:20px 20px 0;box-sizing:border-box;text-align:center;width:50%}.app-overview .grid-wrap .grid-content .content .info-box .box-con .vaule[data-v-71c6f56e]{font-size:18px;font-weight:700;margin-bottom:10px}",""])},869:function(t,e,a){var i=a(835);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(567)("c3c18b90",i,!0)},920:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-overview clearfix"},[a("top-bar",{staticStyle:{margin:"0"},attrs:{noNeedId:!1},on:{barChange:t.barChange}}),t._v(" "),a("div",{staticClass:"page-container",style:{"padding-left":t.paddingLeft}},[a("el-dialog",{attrs:{title:"添加应用",visible:t.createDialogVisible},on:{"update:visible":function(e){t.createDialogVisible=e}}},[a("el-form",{ref:"createForm",attrs:{model:t.createForm,rules:t.createRules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:t.createForm.name,callback:function(e){t.$set(t.createForm,"name",e)},expression:"createForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{prop:"description",maxlength:80},model:{value:t.createForm.description,callback:function(e){t.$set(t.createForm,"description",e)},expression:"createForm.description"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.createDialogVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.creatingLoading},on:{click:t.create}},[t._v("确定")])],1)],1),t._v(" "),a("div",{staticClass:"new-btn-wrap"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.createDialogVisible=!0}}},[t._v("添加应用")])],1),t._v(" "),a("div",{staticClass:"grid-wrap clearfix"},t._l(t.appList,function(e,i){return a("div",{key:i,staticClass:"grid-content"},[a("div",{staticClass:"title",on:{click:function(a){t.torouterLink(e.appId,e.appName)}}},[a("i",{staticClass:"icon-health ",class:e.healthClass}),t._v(" "),a("a",{staticClass:"theme-font-color-primary text"},[a("span",[t._v(t._s(e.appName)+" >")])])]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"chart-wrap"},[a("PieHealthy",{attrs:{optionData:{legend:{data:["健康","一般","不容忍"]},series:[{data:[{value:e.healthyCount,name:"健康"},{value:e.normalCount,name:"一般"},{value:e.intoleranceCount,name:"不容忍"}]}]}}})],1),t._v(" "),a("div",{staticClass:"info-box"},[a("div",{staticClass:"box-con"},[a("div",{staticClass:"vaule"},[t._v(t._s(e.apdex))]),t._v(" "),a("div",{staticClass:"text"},[t._v("Apdex")])]),t._v(" "),a("div",{staticClass:"box-con"},[a("div",{staticClass:"vaule"},[t._v(t._s(e.avgResponseTime)+" ms")]),t._v(" "),a("div",{staticClass:"text"},[t._v("响应时间")])]),t._v(" "),a("div",{staticClass:"box-con"},[a("div",{staticClass:"vaule"},[t._v(t._s(e.rpm)+" rpm")]),t._v(" "),a("div",{staticClass:"text"},[t._v("吞吐率")])]),t._v(" "),a("div",{staticClass:"box-con"},[a("div",{staticClass:"vaule"},[t._v(t._s(e.errorRate)+" %")]),t._v(" "),a("div",{staticClass:"text"},[t._v("错误率")])])])])])}))],1)],1)},staticRenderFns:[]}}});