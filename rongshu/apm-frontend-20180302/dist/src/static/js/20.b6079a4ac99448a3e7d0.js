/*! 2018-3-2 author:liuxiaofan */
webpackJsonp([20],{597:function(t,e,a){a(874);var i=a(54)(a(806),a(925),"data-v-80895d64",null);t.exports=i.exports},608:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{chartColors:["#a8d96f","#85cae6","#fab421","#f38211","#49a778","#e66a3e","#9d6858","#83bc1c","#4d6e83","#bac1c8"]}},created:function(){$(window).on("resize",this.change)},destroyed:function(){$(window).off("resize",this.change)},methods:{change:function(){this.chart&&this.chart.resize()}}}},609:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(140),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={data:function(){return{topBarQueryData:{}}},props:{},watch:{},computed:{appId:function(){return this.topBarQueryData.system.id},startTime:function(){return Number(this.topBarQueryData.time.startTime)},endTime:function(){return r.default.cutEndTime(Number(this.topBarQueryData.time.endTime))},aggrInterval:function(){return r.default.intervalToGranularity(this.endTime-this.startTime)},interval:function(){return""}},methods:{}}},610:function(t,e,a){a(614);var i=a(54)(a(611),a(615),"data-v-79cbf3c8",null);t.exports=i.exports},611:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{headerHeight:50}},props:{showBorder:{required:!1,default:!1},showHeader:{required:!1,default:!1},title:{default:""},isEmpty:{default:!0},isLoading:{default:!1},height:{default:350,required:!1}}}},613:function(t,e,a){e=t.exports=a(566)(),e.push([t.i,".chart-container[data-v-79cbf3c8]{position:relative;border:0 solid;margin-bottom:16px;border-radius:2px;width:100%;height:100%}.chart-title[data-v-79cbf3c8]{width:100%;padding:0 16px;box-sizing:border-box;font-size:14px;color:#666!important}.chart-title .title-icon[data-v-79cbf3c8]{font-size:18px;margin-right:12px}.chart-placeholder[data-v-79cbf3c8]{position:relative;z-index:1;width:100%;height:100%;text-align:center}.chart-placeholder span[data-v-79cbf3c8]{position:absolute;top:50%;margin-top:-7px}.chart-header-hide[data-v-79cbf3c8]{display:none}.chart-border-hide[data-v-79cbf3c8]{border:0}",""])},614:function(t,e,a){var i=a(613);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(567)("a7f96c48",i,!0)},615:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chart-container theme-backgroung-color-white theme-border-color-base",class:{"chart-border-hide":!t.showBorder},style:{height:t.height+"px"}},[a("div",{staticClass:"chart-title theme-font-color-base theme-background-color-normal",class:{"chart-header-hide":!t.showHeader},style:{height:t.headerHeight+"px",lineHeight:t.headerHeight+"px"}},[a("i",{staticClass:"title-icon icon ion-podium"}),t._v("\n    "+t._s(t.title)+"\n  ")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isEmpty&&!t.isLoading,expression:"isEmpty && !isLoading"}],staticClass:"chart-placeholder theme-background-color-normal-1",style:{height:(t.showHeader?t.height-t.headerHeight:t.height)+"px"}},[a("span",{staticClass:"theme-font-color-weaken"},[t._v("暂无数据")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isEmpty,expression:"!isEmpty"}],staticClass:"chart-content",style:{height:(t.showHeader?t.height-t.headerHeight:t.height)+"px"}},[t._t("default")],2)])},staticRenderFns:[]}},680:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(91),n=i(r),o=a(140),s=i(o),l=a(608),d=i(l),c=a(610),u=i(c);e.default={name:"chart-lines",mixins:[d.default],components:{chartContainer:u.default},mounted:function(){this.chart=echarts.init(this.$refs.chart)},data:function(){return{chart:null,localOptions:{tooltip:{trigger:"item",formatter:function(t){var e="",a=t.data;if(e+=window.$$apm.locale.value+": "+s.default.toDecimal(a[1])+"<br>",e+=window.$$apm.locale.startTime+": "+a[2]+"<br>",e+=window.$$apm.locale.endTime+": "+a[3]+"<br>",a[4])for(var i in a[4])e+=(window.$$apm.locale[i]?window.$$apm.locale[i]:i)+": "+a[4][i]+"<br>";return e}},grid:{containLabel:!0},xAxis:{type:"time",boundaryGap:!1},yAxis:{type:"value",splitLine:{show:!1},name:""}},isDataEmpty:!1}},props:{title:{reqiured:!0},data:{type:Object,required:!0},loading:!1,options:Object,isAutoHeight:!1,resized:0},watch:{title:function(t){console.info(this.title),this.renderChart()},data:{deep:!0,handler:function(t){this.renderChart()}},loading:function(t){t?this.chart.showLoading({color:"#cccccc",text:" "}):this.chart.hideLoading()},resized:function(t){this.chart.resize()}},methods:{checkData:function(){var t=this.data;return _.isEmpty(t)?void(this.isDataEmpty=!0):_.isEmpty(t.data)?void(this.isDataEmpty=!0):t.data.every(function(t){return _.isEmpty(t.list)})?void(this.isDataEmpty=!0):void(this.isDataEmpty=!1)},renderChart:function(){if(this.checkData(),!this.isDataEmpty){var t=this.data.data,e=0;t.forEach(function(t){e+=t.name.length,t.name=t.name.replace(/[\n\r]/g," ").replace(/\s+/g," ")});var a=(0,n.default)({},this.localOptions,{series:t.map(function(t,e){return t.list=t.list||[],{type:"line",name:t.name,smooth:!0,sampling:"average",hoverAnimation:!0,areaStyle:{normal:{}},data:t.list.map(function(t){return[t.x,t.y,t.startTime,t.endTime,t.info]})}})});1===t.length&&"None"===t[0].name||(a.legend={data:t.map(function(t,e){return t.name}),formatter:e>60?function(t){return echarts.format.truncateText(t,80,"12px Microsoft Yahei","…")}:null,tooltip:{show:e>60},top:"bottom"}),a.yAxis.name=this.data.unit||"",this.chart.setOption((0,n.default)({color:this.chartColors},a,this.options),!0),this.$nextTick(function(){this.chart.resize()})}}}}},698:function(t,e,a){e=t.exports=a(566)(),e.push([t.i,".chart-lines[data-v-4ea656a4],.chart[data-v-4ea656a4]{height:100%}",""])},711:function(t,e,a){var i=a(698);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(567)("70073bab",i,!0)},719:function(t,e,a){a(711);var i=a(54)(a(680),a(727),"data-v-4ea656a4",null);t.exports=i.exports},727:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chart-lines"},[a("chart-container",{attrs:{title:t.title,isLoading:t.loading,isEmpty:t.isDataEmpty,isAutoHeight:t.isAutoHeight}},[a("div",{ref:"chart",staticClass:"chart"},[a("i",{staticClass:"el-icon-loading"})])])],1)},staticRenderFns:[]}},735:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"tuxedo-bar"}},739:function(t,e,a){e=t.exports=a(566)(),e.push([t.i,'.tuxedo-bar[data-v-4dd4a234]{margin:24px}.tuxedo-bar .tabs[data-v-4dd4a234]{background:#fff;box-shadow:0 0 1px rgba(60,65,71,.5)}.tuxedo-bar-query[data-v-4dd4a234]{height:40px;padding:0 10px;border-bottom:1px solid}.tuxedo-bar-query .submit[data-v-4dd4a234]{width:100px;float:right}.tuxedo-bar-query .query[data-v-4dd4a234]{position:relative;float:right}.tuxedo-bar-query .time-selector[data-v-4dd4a234]{margin-left:8px}.tuxedo-bar-query .el-dropdown-menu[data-v-4dd4a234]{max-height:400px;overflow-y:auto}.tab-list[data-v-4dd4a234]:after,.tuxedo-bar-query[data-v-4dd4a234]:after{content:"";display:block;clear:both}.tab-list[data-v-4dd4a234]{height:40px;padding:0 10px}.tab-list li[data-v-4dd4a234]{float:left;height:100%}.tab-list li a[data-v-4dd4a234]{position:relative;bottom:-1px;display:block;height:100%;box-sizing:border-box;line-height:40px;padding:0 20px;font-size:14px}.tab-list li a.active[data-v-4dd4a234],.tab-list li a[data-v-4dd4a234]:hover{border-bottom:2px solid #2879ff!important}',""])},741:function(t,e,a){var i=a(739);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(567)("60db119c",i,!0)},744:function(t,e,a){a(741);var i=a(54)(a(735),a(748),"data-v-4dd4a234",null);t.exports=i.exports},748:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tuxedo-bar"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.$route.query.tierId,expression:"$route.query.tierId"}],staticClass:"tabs"},[a("ul",{staticClass:"tab-list"},[a("li",[a("router-link",{staticClass:"theme-font-color-weak",attrs:{"active-class":"active theme-border-color-primary theme-font-color-primary",to:{name:"tier-tuxedo-current",query:t.$route.query}}},[t._v("实时")])],1),t._v(" "),a("li",[a("router-link",{staticClass:"theme-font-color-weak",attrs:{"active-class":"active theme-border-color-primary theme-font-color-primary",to:{name:"tier-tuxedo-server",query:t.$route.query}}},[t._v("服务器")])],1),t._v(" "),a("li",[a("router-link",{staticClass:"theme-font-color-weak",attrs:{"active-class":"active theme-border-color-primary theme-font-color-primary",to:{name:"tier-tuxedo-client",query:t.$route.query}}},[t._v("客户端")])],1)])])])},staticRenderFns:[]}},806:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(719),n=i(r),o=a(744),s=i(o),l=a(35),d=a(609),c=i(d);e.default={mixins:[c.default],data:function(){return{queryData:{},sysTimeValS:{name:"",id:""},sysTimes:[],serverInfo:[],busyServer:{loading:!1,title:"忙服务器占比",data:{data:[]}},loadDone:{loading:!1,title:"负载吞吐量",data:{data:[]}},reqDone:{loading:!1,title:"请求吞吐量",data:{data:[]}},loading:!1,loadingInstance:null,pageSize:10,currentPage:1,total:10}},components:{"el-table":l.Table,"el-table-column":l.TableColumn,"el-dropdown":l.Dropdown,"el-dropdown-menu":l.DropdownMenu,"el-dropdown-item":l.DropdownItem,"el-button":l.Button,"cm-line":n.default,"tuxedo-bar":s.default,"el-pagination":l.Pagination},mounted:function(){},watch:{loading:function(t){t?this.loadingInstance=l.Loading.service({target:this.$refs.tableContainer}):this.loadingInstance&&(this.loadingInstance.close(),this.loadingInstance=null)},currentPage:function(){this.getServerData()}},methods:{barChange:function(t){this.topBarQueryData=t,this.getServerData(),this.getChartData()},getServerData:function(){var t=this;t.api.getPsr({data:{condition:{appId:this.appId,startTime:this.startTime,endTime:this.endTime,interval:this.interval,aggrInterval:this.aggrInterval},page:{index:t.currentPage-1,size:t.pageSize}},beforeSend:function(){t.loading=!0}}).done(function(e){0===e.code&&(t.serverInfo=e.data.list,t.total=e.data.count)}).always(function(e){t.loading=!1})},getChartData:function(){var t=this;t.api.getBusyServerRate({data:{condition:{appId:this.appId,startTime:this.startTime,endTime:this.endTime,interval:this.interval,aggrInterval:this.aggrInterval}},beforeSend:function(){t.busyServer.loading=!0}}).done(function(e){0===e.code&&(t.busyServer.loading=!1,t.busyServer.data=e)}),t.api.getPsrLoad({data:{condition:{appId:this.appId,startTime:this.startTime,endTime:this.endTime,interval:this.interval,aggrInterval:this.aggrInterval}}}).done(function(e){0===e.code&&(t.loadDone.data=e)}),t.api.getPsrRequest({data:{condition:{appId:this.appId,startTime:this.startTime,endTime:this.endTime,interval:this.interval,aggrInterval:this.aggrInterval}}}).done(function(e){0===e.code&&(t.reqDone.data=e)})},handleCurrentChange:function(t){this.currentPage=t}}}},840:function(t,e,a){e=t.exports=a(566)(),e.push([t.i,".table-box[data-v-80895d64]{position:relative}.pag-wrap[data-v-80895d64]{text-align:right}",""])},874:function(t,e,a){var i=a(840);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(567)("2cc39746",i,!0)},925:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-bar",{attrs:{title:"Tuxedo"},on:{barChange:t.barChange}}),t._v(" "),a("tuxedo-bar"),t._v(" "),a("div",{staticClass:"common-container"},[t._m(0),t._v(" "),a("div",{staticClass:"content"},[a("div",{ref:"tableContainer",staticClass:"table-box"},[a("el-table",{staticClass:"mt20",staticStyle:{width:"100%"},attrs:{data:t.serverInfo,stripe:""}},[a("el-table-column",{attrs:{prop:"progName",label:"Prog Name"}}),t._v(" "),a("el-table-column",{attrs:{prop:"queueName",label:"Queue Name"}}),t._v(" "),a("el-table-column",{attrs:{prop:"groupName",label:"Grp Name"}}),t._v(" "),a("el-table-column",{attrs:{prop:"serverId",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"requestDone",label:"RqDone"}}),t._v(" "),a("el-table-column",{attrs:{prop:"loadDone",label:"Load Done"}}),t._v(" "),a("el-table-column",{attrs:{prop:"serverStatus",label:"Current Service"}})],1),t._v(" "),a("div",{staticClass:"pag-wrap"},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{layout:"total, prev, pager, next","page-size":t.pageSize,"current-page":t.currentPage,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)])]),t._v(" "),a("div",{staticClass:"common-container"},[a("div",{staticClass:"header-title"},[a("i",{staticClass:"title-icon icon ion-stats-bars"}),t._v(" "),a("span",{staticClass:"title-name"},[t._v(t._s(t.busyServer.title))])]),t._v(" "),a("div",{staticClass:"content"},[a("cm-line",{attrs:{loading:t.busyServer.loading,data:t.busyServer.data,title:t.busyServer.title}})],1)]),t._v(" "),a("div",{staticClass:"common-container"},[a("div",{staticClass:"header-title"},[a("i",{staticClass:"title-icon icon ion-stats-bars"}),t._v(" "),a("span",{staticClass:"title-name"},[t._v(t._s(t.loadDone.title))])]),t._v(" "),a("div",{staticClass:"content"},[a("cm-line",{attrs:{loading:t.loadDone.loading,data:t.loadDone.data,title:t.loadDone.title}})],1)]),t._v(" "),a("div",{staticClass:"common-container"},[a("div",{staticClass:"header-title"},[a("i",{staticClass:"title-icon icon ion-stats-bars"}),t._v(" "),a("span",{staticClass:"title-name"},[t._v(t._s(t.reqDone.title))])]),t._v(" "),a("div",{staticClass:"content"},[a("cm-line",{attrs:{loading:t.reqDone.loading,data:t.reqDone.data,title:t.reqDone.title}})],1)])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header-title"},[a("span",{staticClass:"title-name"},[t._v("服务器信息")])])}]}}});