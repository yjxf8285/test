/*! 2018-3-2 author:liuxiaofan */
webpackJsonp([6],{223:function(t,e,a){a(879);var r=a(54)(a(803),a(933),"data-v-d5f9eb28",null);t.exports=r.exports},609:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(140),s=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={data:function(){return{topBarQueryData:{}}},props:{},watch:{},computed:{appId:function(){return this.topBarQueryData.system.id},startTime:function(){return Number(this.topBarQueryData.time.startTime)},endTime:function(){return s.default.cutEndTime(Number(this.topBarQueryData.time.endTime))},aggrInterval:function(){return s.default.intervalToGranularity(this.endTime-this.startTime)},interval:function(){return""}},methods:{}}},681:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{barData:{type:Array,validator:function(t){return t.length<5},default:[3,3,3]}},data:function(){return{colorsF:["#a8d96f","#85cae6","#fab421","#f38211"],colorsT:["#a8d96f","#85cae6","#f38211"]}},computed:{titleCount:function(){return new Function("return "+this.barData.join("+"))()},percents:function(){var t=this;return this.barData.map(function(e){return e>0?e/t.titleCount*100:0})}}}},704:function(t,e,a){e=t.exports=a(566)(),e.push([t.i,".percent-bar[data-v-dd29795a]{background:#eee;display:flex}.percent-bar .item[data-v-dd29795a]{height:6px}",""])},717:function(t,e,a){var r=a(704);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(567)("0df310b5",r,!0)},720:function(t,e,a){a(717);var r=a(54)(a(681),a(733),"data-v-dd29795a",null);t.exports=r.exports},733:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"percent-bar"},[t._l(t.percents,function(e,r){return 3===t.percents.length?a("div",{key:r,staticClass:"item",style:{width:e+"%",background:t.colorsT[r]}}):t._e()}),t._v(" "),t._l(t.percents,function(e,r){return 4===t.percents.length?a("div",{key:r,staticClass:"item",style:{width:e+"%",background:t.colorsF[r]}}):t._e()})],2)},staticRenderFns:[]}},751:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(35);e.default={components:{InputNumber:r.InputNumber,"el-button":r.Button,"el-input":r.Input,Icon:r.Icon,Checkbox:r.Checkbox},data:function(){return{showCon:!1,filterData:{avgResponseTime:"",rpm:"",errorNum:""}}},mounted:function(){},directives:{numberOnly:{bind:function(t){t.handler=function(){t.value=t.value.replace(/[^\-?\d.]/g,"")},t.addEventListener("input",t.handler)},unbind:function(t){t.removeEventListener("input",t.handler)}}},watch:{filterData:{handler:function(t,e){this.$emit("fbarChange",t,e)},deep:!0}},methods:{handleAvgResponseTime:function(t){var e=t.target.value;this.filterData.avgResponseTime=e},handleRpm:function(t){var e=t.target.value;this.filterData.rpm=e},handleErrorNum:function(t){var e=t.target.value;this.filterData.errorNum=e},reset:function(){$(this.$el).find(".s-input").val("")}}}},759:function(t,e,a){e=t.exports=a(566)(),e.push([t.i,".filter-bar-simple[data-v-5619131e]{margin:0 24px}.filter-bar-simple .s-input[data-v-5619131e]{width:80px;padding:4px 10px}.filter-bar-simple .l-input[data-v-5619131e]{width:280px}.filter-bar-simple .header[data-v-5619131e]{padding:20px 0 0}.filter-bar-simple .content[data-v-5619131e]{margin-top:20px;padding:20px 0 0;border-top:1px solid #dcdcdc}.filter-bar-simple .circular[data-v-5619131e]{width:130px;margin-top:1px}.filter-bar-simple .btn-filter[data-v-5619131e]{color:#fff;padding:4px 20px;border-radius:2px}.filter-bar-simple .btn-filter i[data-v-5619131e]{margin-right:2px;font-size:14px}",""])},764:function(t,e,a){var r=a(759);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(567)("2a37d815",r,!0)},771:function(t,e,a){a(764);var r=a(54)(a(751),a(774),"data-v-5619131e",null);t.exports=r.exports},774:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filter-bar-simple"},[a("div",{staticClass:"header clearfix"},[a("div",{staticClass:"button-area fn-fl"},[a("el-button",{staticClass:"btn-filter",attrs:{size:"mini",type:"primary"},on:{click:function(e){t.showCon=!t.showCon}}},[a("i",{staticClass:"fa fa-filter",attrs:{"aria-hidden":"true"}}),a("span",[t._v("过滤")])])],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showCon,expression:"showCon"}],staticClass:"content"},[a("div",{staticClass:"row"},[a("span",{},[t._v("响应时间 > ")]),t._v(" "),a("input",{directives:[{name:"number-only",rawName:"v-number-only"}],staticClass:"s-input",on:{keyup:t.handleAvgResponseTime}}),t._v(" "),a("span",[t._v(" ms")]),t._v(" "),a("span",{staticClass:"ml40"},[t._v("吞吐率 > ")]),t._v(" "),a("input",{directives:[{name:"number-only",rawName:"v-number-only"}],staticClass:"s-input",on:{keyup:t.handleRpm}}),t._v(" "),a("span",[t._v(" rpm")]),t._v(" "),a("span",{staticClass:"ml40"},[t._v("错误数 > ")]),t._v(" "),a("input",{directives:[{name:"number-only",rawName:"v-number-only"}],staticClass:"s-input",on:{keyup:t.handleErrorNum}}),t._v(" "),a("span",[t._v(" 次")])])])])},staticRenderFns:[]}},803:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=a(140),i=r(s),n=a(35),o=a(771),l=r(o),u=a(720),c=r(u),d=a(609),m=r(d);e.default={data:function(){return{dataListloading:!0,summariesSortField:"AVG_RESPONSE_TIME",summariesSortOrder:"desc",transName:"",dataList:[],allDataList:[]}},components:{"el-pagination":n.Pagination,"el-table":n.Table,"el-table-column":n.TableColumn,"el-input":n.Input,FilterBarSimple:l.default,Popover:n.Popover,PercentBar:c.default},mixins:[m.default],mounted:function(){},watch:{transName:function(){this.getSummariesData(),this.$refs.simplefilterbar.reset()}},computed:{tierId:function(){return this.$route.query.tierId||""},instanceToken:function(){return this.$route.query.instanceToken||""}},methods:{barChange:function(t){this.topBarQueryData=t,this.getSummariesData()},fbarChange:function(t){this.dataList=this.handleFilterData(t,this.allDataList)},handleFilterData:function(t,e){var a=[];for(var r in t)"keyword"!==r&&(t[r]=t[r]||-1);return 0===t.avgResponseTime&&0===t.rpm&&0===t.errorNum?a=this.allDataList:e.forEach(function(e){e.transName.search(t.keyword)>=0&&e.avgResponseTime>t.avgResponseTime&&e.rpm>t.rpm&&e.errorNum>t.errorNum&&a.push(e)}),a},SummariesSortChange:function(t){switch(t.prop){case"avgResponseTime":this.summariesSortField="AVG_RESPONSE_TIME";break;case"rpm":this.summariesSortField="RPM";break;case"requestNum":this.summariesSortField="REQUEST_NUM";break;case"errorNum":this.summariesSortField="ERROR_NUM";break;case"epm":this.summariesSortField="EPM";break;default:this.summariesSortField="AVG_RESPONSE_TIME"}switch(console.info(this.summariesSortField),t.order){case"ascending":this.summariesSortOrder="asc";break;case"descending":this.summariesSortOrder="desc"}this.getSummariesData()},getSummariesData:function(){var t=this;this.dataListloading=!0,this.api.getSummaries({data:{condition:{appId:this.appId,startTime:this.startTime,endTime:this.endTime,transName:this.transName},topN:100,sort:{field:this.summariesSortField,order:this.summariesSortOrder}}}).then(function(e){0===e.code&&(e.data.map(function(t){var e=t.transactionDistributionOutBO;if(e){var a=t.requestNum;t.distributeBarData=[e.normalRequestNum,e.slowRequestNum,e.verySlowRequestNum,e.errorRequestNum],t.distributeTipData=[{name:"正常",color:"#a8d96f",percent:i.default.toDecimal(e.normalRequestNum/a*100)+"%",value:e.normalRequestNum},{name:"缓慢",color:"#85cae6",percent:i.default.toDecimal(e.slowRequestNum/a*100)+"%",value:e.slowRequestNum},{name:"非常慢",color:"#fab421",percent:i.default.toDecimal(e.verySlowRequestNum/a*100)+"%",value:e.verySlowRequestNum},{name:"错误",color:"#f38211",percent:i.default.toDecimal(e.errorRequestNum/a*100)+"%",value:e.errorRequestNum}];var r=t.health||"HEALTHY";t.transClass=i.default.handleHealthy(r).IconClass}else t.distributeBarData=[0,0,0,0]}),t.dataList=e.data,t.allDataList=_.cloneDeep(e.data))}).always(function(e){t.dataListloading=!1})}}}},845:function(t,e,a){e=t.exports=a(566)(),e.push([t.i,".transaction .table-wrap[data-v-d5f9eb28]{padding:10px}.transaction .table-list[data-v-d5f9eb28]{width:100%}.transaction .table-list .icon[data-v-d5f9eb28]{font-size:20px;color:#00acc1;vertical-align:middle}.transaction .table-list .transaction-name[data-v-d5f9eb28]{vertical-align:middle}.transaction .pagination-wrap[data-v-d5f9eb28]{padding:0 5px 0 0;text-align:right}",""])},879:function(t,e,a){var r=a(845);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(567)("47685e4c",r,!0)},933:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"transaction"},[a("top-bar",{attrs:{title:"事务"},on:{barChange:t.barChange}}),t._v(" "),a("FilterBarSimple",{ref:"simplefilterbar",on:{fbarChange:t.fbarChange}}),t._v(" "),a("div",{staticClass:"common-container"},[a("div",{staticClass:"header-title"},[a("i",{staticClass:"title-icon icon ion-stats-bars"}),t._v(" "),a("span",{staticClass:"title-name"},[t._v("事务")]),t._v(" "),a("div",{staticClass:"seach-area fn-fr",staticStyle:{padding:"12px"}},[a("el-input",{staticClass:"circular",attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.transName,callback:function(e){t.transName="string"==typeof e?e.trim():e},expression:"transName"}})],1)]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"table-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListloading,expression:"dataListloading"}],staticClass:"table-list",attrs:{data:t.dataList},on:{"sort-change":t.SummariesSortChange}},[a("el-table-column",{attrs:{label:"事务名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"icon-health ",class:e.row.transClass,attrs:{title:"正常"}}),t._v(" "),a("router-link",{staticClass:"transaction-name",attrs:{to:"single-transaction?transName="+e.row.transName+"&tierId="+t.tierId+"&instanceToken="+t.instanceToken}},[a("span",[t._v(t._s(e.row.transName))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"事务分布"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Popover",{ref:"popover1",attrs:{placement:"bottom",trigger:"hover"}},[a("table",{staticClass:"distribute-popover"},t._l(e.row.distributeTipData,function(e,r){return a("tr",{key:r},[a("td",{staticClass:"t-r",attrs:{width:"50"}},[t._v(t._s(e.name))]),t._v(" "),a("td",{attrs:{width:"80"}},[a("div",{staticClass:"bar-g",style:{height:"8px",width:e.percent,background:e.color}})]),t._v(" "),a("td",{staticClass:"t-c",attrs:{width:"30"}},[t._v(t._s(e.percent))]),t._v(" "),a("td",{staticClass:"t-r"},[t._v(t._s(e.value))])])}))]),t._v(" "),a("PercentBar",{directives:[{name:"popover",rawName:"v-popover:popover1",arg:"popover1"}],attrs:{barData:e.row.distributeBarData}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"avgResponseTime",label:"平均响应时间(ms)",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"rpm",label:"吞吐率(rpm)",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"requestNum",label:"请求数",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"errorNum",label:"错误数",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"epm",label:"错误/分钟(epm)",sortable:"custom"}})],1)],1)])])],1)},staticRenderFns:[]}}});