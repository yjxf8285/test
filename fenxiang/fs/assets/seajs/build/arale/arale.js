define("arale/autocomplete/1.2.0/autocomplete",["$","arale/overlay/1.0.1/overlay","arale/position/1.0.0/position","arale/iframe-shim/1.0.1/iframe-shim","arale/widget/1.0.3/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events","arale/widget/1.0.3/templatable","gallery/handlebars/1.0.0/handlebars","./data-source","./filter","./autocomplete.tpl"],function(t,e,i){function s(t){return"[object String]"===Object.prototype.toString.call(t)}function a(t,e){if(!t)return e;if(r.isFunction(t))return t.call(this,e);if(s(t)){for(var i=t.split("."),a=e;i.length;){var n=i.shift();if(!a[n])break;a=a[n]}return a}return e}function n(t,e){var i=this.highlightIndex,s=0,a=e||this.matchKey||"",n="";if(r.isArray(i)){for(var l=0,u=i.length;u>l;l++){var o,c,d=i[l];if(r.isArray(d)?(o=d[0],c=d[1]-d[0]):(o=d,c=1),o>s&&(n+=a.substring(s,o)),a.length>o&&(n+='<span class="'+t+'-item-hl">'+a.substr(o,c)+"</span>"),s=o+c,s>=a.length)break}return a.length>s&&(n+=a.substring(s,a.length)),new h.SafeString(n)}return a}var r=t("$"),l=t("arale/overlay/1.0.1/overlay"),u=t("arale/widget/1.0.3/templatable"),h=t("gallery/handlebars/1.0.0/handlebars"),o=t("./data-source"),c=t("./filter"),d=t("./autocomplete.tpl"),f={UP:38,DOWN:40,LEFT:37,RIGHT:39,ENTER:13,ESC:27,BACKSPACE:8},g=l.extend({Implements:u,attrs:{trigger:{value:null,getter:function(t){return r(t)}},classPrefix:"ui-autocomplete",align:{baseXY:[0,"100%"]},template:d,submitOnEnter:!0,dataSource:[],locator:"data",filter:void 0,inputFilter:function(t){return t},disabled:!1,selectFirst:!1,delay:100,selectedIndex:void 0,inputValue:"",data:[]},events:{"mousedown [data-role=item]":function(t){var e=this.items.index(t.currentTarget);this.set("selectedIndex",e),this.selectItem(),this._firstMousedown=!0},mousedown:function(){this._secondMousedown=!0},"mouseenter [data-role=item]":function(t){var e=this.get("classPrefix")+"-item-hover";this.currentItem&&this.currentItem.removeClass(e),r(t.currentTarget).addClass(e)},"mouseleave [data-role=item]":function(t){var e=this.get("classPrefix")+"-item-hover";r(t.currentTarget).removeClass(e)}},templateHelpers:{highlightItem:n},parseElement:function(){this.model={classPrefix:this.get("classPrefix"),items:[]},g.superclass.parseElement.call(this)},setup:function(){var t=this.get("trigger"),e=this;g.superclass.setup.call(this),this.dataSource=new o({source:this.get("dataSource")}).on("data",this._filterData,this),this._initFilter(),this._blurHide([t]),this._tweakAlignDefaultValue(),t.attr("autocomplete","off").on("blur.autocomplete",r.proxy(this._blurEvent,this)).on("keydown.autocomplete",r.proxy(this._keydownEvent,this)).on("keyup.autocomplete",function(){clearTimeout(e._timeout),e._timeout=setTimeout(function(){e._timeout=null,e._keyupEvent.call(e)},e.get("delay"))})},destroy:function(){this._clear(),this.element.remove(),g.superclass.destroy.call(this)},hide:function(){this._timeout&&clearTimeout(this._timeout),this.dataSource.abort(),g.superclass.hide.call(this)},selectItem:function(){this.hide();var t=this.currentItem,e=this.get("selectedIndex"),i=this.get("data")[e];if(t){var s=t.attr("data-value");this.get("trigger").val(s),this.set("inputValue",s),this.trigger("itemSelect",i),this._clear()}},setInputValue:function(t){if(this.get("inputValue")!==t){this._start=!0,this.set("inputValue",t);var e=this.get("trigger");e.val()!==t&&e.val(t)}},_onRenderInputValue:function(t){if(this._start&&t){var e=this.queryValue;this.queryValue=this.get("inputFilter").call(this,t),this.queryValue&&this.queryValue!==e&&(this.dataSource.abort(),this.dataSource.getData(this.queryValue))}else this.queryValue="";""!==t&&this.queryValue||(this.set("data",[]),this.hide()),delete this._start},_filterData:function(t){var e=this.get("filter"),i=this.get("locator");t=a(i,t),t=e.func.call(this,t,this.queryValue,e.options),this.set("data",t)},_onRenderData:function(t){this._clear(),this.model.items=t,this.renderPartial("[data-role=items]"),this.items=this.$("[data-role=items]").children(),this.currentItem=null,this.get("selectFirst")&&this.set("selectedIndex",0),r.trim(this.$("[data-role=items]").text())?this.show():this.hide()},_onRenderSelectedIndex:function(t){if(-1!==t){var e=this.get("classPrefix")+"-item-hover";this.currentItem&&this.currentItem.removeClass(e),this.currentItem=this.items.eq(t).addClass(e),this.trigger("indexChange",t,this.lastIndex),this.lastIndex=t}},_initFilter:function(){var t=this.get("filter");t=void 0===t?"url"===this.dataSource.get("type")?null:{name:"startsWith",func:c.startsWith,options:{key:"value"}}:r.isPlainObject(t)?c[t.name]?{name:t.name,func:c[t.name],options:t.options}:null:r.isFunction(t)?{func:t}:c[t]?{name:t,func:c[t]}:null,t||(t={name:"default",func:c["default"]}),this.set("filter",t)},_blurEvent:function(){r.browser.msie||(this._secondMousedown?this._firstMousedown&&(this.get("trigger").focus(),this.hide()):this.hide(),delete this._firstMousedown,delete this._secondMousedown)},_keyupEvent:function(){if(!this.get("disabled")&&this._keyupStart){delete this._keyupStart;var t=this.get("trigger").val();this.setInputValue(t)}},_keydownEvent:function(t){if(!this.get("disabled"))switch(delete this._keyupStart,t.which){case f.ESC:this.hide();break;case f.UP:this._keyUp(t);break;case f.DOWN:this._keyDown(t);break;case f.LEFT:case f.RIGHT:break;case f.ENTER:this._keyEnter(t);break;default:this._keyupStart=!0}},_keyUp:function(t){if(t.preventDefault(),this.get("data").length){if(!this.get("visible"))return this.show(),void 0;this._step(-1)}},_keyDown:function(t){if(t.preventDefault(),this.get("data").length){if(!this.get("visible"))return this.show(),void 0;this._step(1)}},_keyEnter:function(t){this.get("visible")&&(this.selectItem(),this.get("submitOnEnter")||t.preventDefault())},_step:function(t){var e=this.get("selectedIndex");-1===t?e>0?this.set("selectedIndex",e-1):this.set("selectedIndex",this.items.length-1):1===t&&(this.items.length-1>e?this.set("selectedIndex",e+1):this.set("selectedIndex",0))},_clear:function(){this.$("[data-role=items]").empty(),this.set("selectedIndex",-1),delete this.items,delete this.lastIndex,delete this.currentItem},_tweakAlignDefaultValue:function(){var t=this.get("align");t.baseElement=this.get("trigger"),this.set("align",t)}});i.exports=g}),define("arale/autocomplete/1.2.0/data-source",["arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events","$"],function(t,e,i){function s(t){return"[object String]"===Object.prototype.toString.call(t)}function a(t){return t.replace(/^([a-z])/,function(t,e){return e.toUpperCase()})}var n=t("arale/base/1.0.1/base"),r=t("$"),l=n.extend({attrs:{source:null,type:"array"},initialize:function(t){l.superclass.initialize.call(this,t),this.id=0,this.callbacks=[];var e=this.get("source");if(s(e))this.set("type","url");else if(r.isArray(e))this.set("type","array");else if(r.isPlainObject(e))this.set("type","object");else{if(!r.isFunction(e))throw Error("Source Type Error");this.set("type","function")}},getData:function(t){return this["_get"+a(this.get("type")||"")+"Data"](t)},abort:function(){this.callbacks=[]},_done:function(t){this.trigger("data",t)},_getUrlData:function(t){var e,i=this,s={query:t?encodeURIComponent(t):"",timestamp:(new Date).getTime()},a=this.get("source").replace(/{{(.*?)}}/g,function(t,e){return s[e]}),n="callback_"+this.id++;this.callbacks.push(n),e=/^(https?:\/\/)/.test(a)?{dataType:"jsonp"}:{dataType:"json"},r.ajax(a,e).success(function(t){r.inArray(n,i.callbacks)>-1&&(delete i.callbacks[n],i._done(t))}).error(function(){r.inArray(n,i.callbacks)>-1&&(delete i.callbacks[n],i._done({}))})},_getArrayData:function(){var t=this.get("source");return this._done(t),t},_getObjectData:function(){var t=this.get("source");return this._done(t),t},_getFunctionData:function(t){function e(t){i._done(t)}var i=this,s=this.get("source"),a=s.call(this,t,e);a&&this._done(a)}});i.exports=l}),define("arale/autocomplete/1.2.0/filter",["$"],function(t,e,i){function s(t,e){if(r.isPlainObject(t)){var i=e&&e.key||"value";return t[i]||""}return t}function a(t,e){for(var i=[],s=t.split(""),a=0,n=e.split(""),r=0,l=s.length;l>r;r++){var u=s[r];if(u==n[a]){if(a===n.length-1){i.push([r-n.length+1,r+1]),a=0;continue}a++}else a=0}return i}function n(t){return(t||"").replace(u,"\\$1")}var r=t("$"),l={"default":function(t,e,i){var a=[];return r.each(t,function(t,e){var n={},l=s(e,i);r.isPlainObject(e)&&(n=r.extend({},e)),n.matchKey=l,a.push(n)}),a},startsWith:function(t,e,i){var a=[],l=e.length,u=RegExp("^"+n(e));return l?(r.each(t,function(t,e){var n={},h=s(e,i);r.isPlainObject(e)&&(n=r.extend({},e)),u.test(h)&&(n.matchKey=h,l>0&&(n.highlightIndex=[[0,l]]),a.push(n))}),a):[]},stringMatch:function(t,e,i){e=e||"";var n=[],l=e.length;return l?(r.each(t,function(t,l){var u={},h=s(l,i);r.isPlainObject(l)&&(u=r.extend({},l)),h.indexOf(e)>-1&&(u.matchKey=h,u.highlightIndex=a(h,e),n.push(u))}),n):[]}};i.exports=l;var u=/(\[|\[|\]|\^|\$|\||\(|\)|\{|\}|\+|\*|\?)/g}),define("arale/autocomplete/1.2.0/autocomplete.tpl",[],'<div class="{{classPrefix}}">\n    <ul class="{{classPrefix}}-ctn" data-role="items">\n        {{#each items}}\n            <li data-role="item" class="{{../classPrefix}}-item" data-value="{{matchKey}}">{{highlightItem ../classPrefix matchKey}}</li>\n        {{/each}}\n    </ul>\n</div>\n');
define("arale/base/1.0.1/base",["arale/class/1.0.0/class","arale/events/1.0.0/events","./aspect","./attribute"],function(t,r,e){var n=t("arale/class/1.0.0/class"),i=t("arale/events/1.0.0/events"),a=t("./aspect"),s=t("./attribute");e.exports=n.create({Implements:[i,a,s],initialize:function(t){this.initAttrs(t)},destroy:function(){this.off();for(var t in this)this.hasOwnProperty(t)&&delete this[t]}})}),define("arale/base/1.0.1/aspect",[],function(t,r){function e(t,r,e,s){for(var o,c,u=r.split(a);o=u.shift();)c=n(this,o),c.__isAspected||i.call(this,o),this.on(t+":"+o,e,s);return this}function n(t,r){var e=t[r];if(!e)throw Error("Invalid method name: "+r);return e}function i(t){var r=this[t];this[t]=function(){var e=Array.prototype.slice.call(arguments),n=["before:"+t].concat(e);this.trigger.apply(this,n);var i=r.apply(this,arguments);return this.trigger("after:"+t,i),i},this[t].__isAspected=!0}r.before=function(t,r,n){return e.call(this,"before",t,r,n)},r.after=function(t,r,n){return e.call(this,"after",t,r,n)};var a=/\s+/}),define("arale/base/1.0.1/attribute",[],function(t,r){function e(t){return"[object String]"===O.call(t)}function n(t){return"[object Function]"===O.call(t)}function i(t){return null!=t&&t==t.window}function a(t){if(!t||"[object Object]"!==O.call(t)||t.nodeType||i(t))return!1;try{if(t.constructor&&!A.call(t,"constructor")&&!A.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}for(var e in t);return void 0===e||A.call(t,e)}function s(t){for(var r in t)if(t.hasOwnProperty(r))return!1;return!0}function o(t,r){var e,n;for(e in r)if(r.hasOwnProperty(e)){if(n=r[e],w(n))n=n.slice();else if(a(n)){var i=t[e];a(i)||(i={}),n=o(i,n)}t[e]=n}return t}function c(t){return t.charAt(0).toUpperCase()+t.substring(1)}function u(t,r){for(var e=[],n=t.constructor.prototype;n;)n.hasOwnProperty("attrs")||(n.attrs={}),f(r,n.attrs,n),s(n.attrs)||e.unshift(n.attrs),n=n.constructor.superclass;for(var i={},a=0,c=e.length;c>a;a++)i=o(i,g(e[a]));return i}function f(t,r,e,n){for(var i=0,a=t.length;a>i;i++){var s=t[i];e.hasOwnProperty(s)&&(r[s]=n?r.get(s):e[s])}}function l(t,r){for(var e in r)if(r.hasOwnProperty(e)){var n="_onChange"+c(e);t[n]&&t.on("change:"+e,t[n])}}function h(t,r){for(var e in r)if(r.hasOwnProperty(e)){var i,a=r[e].value;n(a)&&(i=e.match(j))&&(t[i[1]](v(i[2]),a),delete r[e])}}function v(t){var r=t.match(P),e=r[1]?"change:":"";return e+=r[2].toLowerCase()+r[3]}function p(t,r,e){var n={silent:!0};t.__initializingAttrs=!0;for(var i in e)e.hasOwnProperty(i)&&r[i].setter&&t.set(i,e[i].value,n);delete t.__initializingAttrs}function g(t,r){t=o({},t);for(var e in t){var n=t[e];a(n)&&!r&&y(n,m)||(t[e]={value:n})}return t}function y(t,r){for(var e=0,n=r.length;n>e;e++)if(t.hasOwnProperty(r[e]))return!0;return!1}function b(t){return null==t||(e(t)||w(t))&&0===t.length||a(t)&&s(t)}function d(t,r){if(t===r)return!0;if(b(t)&&b(r))return!0;var e=O.call(t);if(e!=O.call(r))return!1;switch(e){case"[object String]":return t==r+"";case"[object Number]":return t!=+t?r!=+r:0==t?1/t==1/r:t==+r;case"[object Date]":case"[object Boolean]":return+t==+r;case"[object RegExp]":return t.source==r.source&&t.global==r.global&&t.multiline==r.multiline&&t.ignoreCase==r.ignoreCase;case"[object Array]":var n=""+t,i=""+r;return-1===n.indexOf("[object")&&-1===i.indexOf("[object")&&n===i}if("object"!=typeof t||"object"!=typeof r)return!1;if(a(t)&&a(r)){if(!d(_(t),_(r)))return!1;for(var s in t)if(t[s]!==r[s])return!1;return!0}return!1}r.initAttrs=function(t,r){r&&(t=t?o(r,t):r);var e,n=this.propsInAttrs||[],i=u(this,n),a=o({},i);t&&(e=g(t,!0),o(a,e)),l(this,a),this.attrs=a,p(this,a,e),h(this,a),f(n,this,this.attrs,!0)},r.get=function(t){var r=this.attrs[t]||{},e=r.value;return r.getter?r.getter.call(this,e,t):e},r.set=function(t,r,n){var i={};e(t)?i[t]=r:(i=t,n=r),n||(n={});var s=n.silent,c=this.attrs,u=this.__changedAttrs||(this.__changedAttrs={});for(t in i)if(i.hasOwnProperty(t)){var f=c[t]||(c[t]={});if(r=i[t],f.readOnly)throw Error("This attribute is readOnly: "+t);f.setter&&(r=f.setter.call(this,r,t));var l=this.get(t);a(l)&&a(r)&&(r=o(o({},l),r)),c[t].value=r,this.__initializingAttrs||d(l,r)||(s?u[t]=[r,l]:this.trigger("change:"+t,r,l,t))}return this},r.change=function(){var t=this.__changedAttrs;if(t){for(var r in t)if(t.hasOwnProperty(r)){var e=t[r];this.trigger("change:"+r,e[0],e[1],r)}delete this.__changedAttrs}return this};var O=Object.prototype.toString,A=Object.prototype.hasOwnProperty,w=Array.isArray||function(t){return"[object Array]"===O.call(t)},_=Object.keys;_||(_=function(t){var r=[];for(var e in t)t.hasOwnProperty(e)&&r.push(e);return r});var j=/^(on|before|after)([A-Z].*)$/,P=/^(Change)?([A-Z])(.*)/,m=["value","getter","setter","readOnly"]});define("arale/base/1.1.0/base",["arale/class/1.1.0/class","arale/events/1.1.0/events","./aspect","./attribute"],function(t,r,e){function n(t,r){for(var e in r)if(r.hasOwnProperty(e)){var n="_onChange"+i(e);t[n]&&t.on("change:"+e,t[n])}}function i(t){return t.charAt(0).toUpperCase()+t.substring(1)}var a=t("arale/class/1.1.0/class"),s=t("arale/events/1.1.0/events"),o=t("./aspect"),c=t("./attribute");e.exports=a.create({Implements:[s,o,c],initialize:function(t){this.initAttrs(t),n(this,this.attrs)},destroy:function(){this.off();for(var t in this)this.hasOwnProperty(t)&&delete this[t];this.destroy=function(){}}})}),define("arale/base/1.1.0/aspect",[],function(t,r){function e(t,r,e,s){for(var o,c,u=r.split(a);o=u.shift();)c=n(this,o),c.__isAspected||i.call(this,o),this.on(t+":"+o,e,s);return this}function n(t,r){var e=t[r];if(!e)throw Error("Invalid method name: "+r);return e}function i(t){var r=this[t];this[t]=function(){var e=Array.prototype.slice.call(arguments),n=["before:"+t].concat(e);if(this.trigger.apply(this,n)!==!1){var i=r.apply(this,arguments),a=["after:"+t,i].concat(e);return this.trigger.apply(this,a),i}},this[t].__isAspected=!0}r.before=function(t,r,n){return e.call(this,"before",t,r,n)},r.after=function(t,r,n){return e.call(this,"after",t,r,n)};var a=/\s+/}),define("arale/base/1.1.0/attribute",[],function(t,r){function e(t){return"[object String]"===O.call(t)}function n(t){return"[object Function]"===O.call(t)}function i(t){return null!=t&&t==t.window}function a(t){if(!t||"[object Object]"!==O.call(t)||t.nodeType||i(t))return!1;try{if(t.constructor&&!j.call(t,"constructor")&&!j.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}var e;if(d)for(e in t)return j.call(t,e);for(e in t);return void 0===e||j.call(t,e)}function s(t){if(!t||"[object Object]"!==O.call(t))return!1;for(var r in t)if(t.hasOwnProperty(r))return!1;return!0}function o(t,r){var e,n;for(e in r)if(r.hasOwnProperty(e)){if(n=r[e],w(n))n=n.slice();else if(a(n)){var i=t[e];a(i)||(i={}),n=o(i,n)}t[e]=n}return t}function c(t,r,e){for(var n=[],i=r.constructor.prototype;i;)i.hasOwnProperty("attrs")||(i.attrs={}),f(e,i.attrs,i),s(i.attrs)||n.unshift(i.attrs),i=i.constructor.superclass;for(var a=0,c=n.length;c>a;a++)o(t,p(n[a]))}function u(t,r){o(t,p(r,!0))}function f(t,r,e,n){for(var i=0,a=t.length;a>i;i++){var s=t[i];e.hasOwnProperty(s)&&(r[s]=n?r.get(s):e[s])}}function l(t,r){for(var e in r)if(r.hasOwnProperty(e)){var i,a=r[e].value;n(a)&&(i=e.match(_))&&(t[i[1]](h(i[2]),a),delete r[e])}}function h(t){var r=t.match(P),e=r[1]?"change:":"";return e+=r[2].toLowerCase()+r[3]}function v(t,r,e){var n={silent:!0};t.__initializingAttrs=!0;for(var i in e)e.hasOwnProperty(i)&&r[i].setter&&t.set(i,e[i],n);delete t.__initializingAttrs}function p(t,r){var e={};for(var n in t){var i=t[n];e[n]=!r&&a(i)&&g(i,m)?i:{value:i}}return e}function g(t,r){for(var e=0,n=r.length;n>e;e++)if(t.hasOwnProperty(r[e]))return!0;return!1}function y(t){return null==t||(e(t)||w(t))&&0===t.length||s(t)}function b(t,r){if(t===r)return!0;if(y(t)&&y(r))return!0;var e=O.call(t);if(e!=O.call(r))return!1;switch(e){case"[object String]":return t==r+"";case"[object Number]":return t!=+t?r!=+r:0==t?1/t==1/r:t==+r;case"[object Date]":case"[object Boolean]":return+t==+r;case"[object RegExp]":return t.source==r.source&&t.global==r.global&&t.multiline==r.multiline&&t.ignoreCase==r.ignoreCase;case"[object Array]":var n=""+t,i=""+r;return-1===n.indexOf("[object")&&-1===i.indexOf("[object")&&n===i}if("object"!=typeof t||"object"!=typeof r)return!1;if(a(t)&&a(r)){if(!b(A(t),A(r)))return!1;for(var s in t)if(t[s]!==r[s])return!1;return!0}return!1}r.initAttrs=function(t){var r=this.attrs={},e=this.propsInAttrs||[];c(r,this,e),t&&u(r,t),v(this,r,t),l(this,r),f(e,this,r,!0)},r.get=function(t){var r=this.attrs[t]||{},e=r.value;return r.getter?r.getter.call(this,e,t):e},r.set=function(t,r,n){var i={};e(t)?i[t]=r:(i=t,n=r),n||(n={});var s=n.silent,c=n.override,u=this.attrs,f=this.__changedAttrs||(this.__changedAttrs={});for(t in i)if(i.hasOwnProperty(t)){var l=u[t]||(u[t]={});if(r=i[t],l.readOnly)throw Error("This attribute is readOnly: "+t);l.setter&&(r=l.setter.call(this,r,t));var h=this.get(t);!c&&a(h)&&a(r)&&(r=o(o({},h),r)),u[t].value=r,this.__initializingAttrs||b(h,r)||(s?f[t]=[r,h]:this.trigger("change:"+t,r,h,t))}return this},r.change=function(){var t=this.__changedAttrs;if(t){for(var r in t)if(t.hasOwnProperty(r)){var e=t[r];this.trigger("change:"+r,e[0],e[1],r)}delete this.__changedAttrs}return this},r._isPlainObject=a;var d,O=Object.prototype.toString,j=Object.prototype.hasOwnProperty;(function(){function t(){this.x=1}var r=[];t.prototype={valueOf:1,y:1};for(var e in new t)r.push(e);d="x"!==r[0]})();var w=Array.isArray||function(t){return"[object Array]"===O.call(t)},A=Object.keys;A||(A=function(t){var r=[];for(var e in t)t.hasOwnProperty(e)&&r.push(e);return r});var _=/^(on|before|after)([A-Z].*)$/,P=/^(Change)?([A-Z])(.*)/,m=["value","getter","setter","readOnly"]});
define("arale/calendar/0.8.5/calendar",["$","gallery/moment/2.0.0/moment","arale/overlay/1.0.1/overlay","arale/position/1.0.0/position","arale/iframe-shim/1.0.1/iframe-shim","arale/widget/1.0.3/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events","arale/widget/1.0.3/templatable","gallery/handlebars/1.0.0/handlebars","./calendar-tpl","./model"],function(e,a,t){function n(e,a){for(var t,n=a.get("mode"),r=["date","month","year"],l=0;r.length>l;l++)n[r[l]]&&(t=r[l]);if(t){var i="[data-value="+a.get(t).current.value+"]";e.find(".focused-element").removeClass("focused-element"),e.find(i).addClass("focused-element")}}var r=e("$"),l=e("gallery/moment/2.0.0/moment"),i=e("arale/overlay/1.0.1/overlay"),o=e("arale/widget/1.0.3/templatable"),s="i18n!lang",h=e(s)||{},c=e("./calendar-tpl"),d=e("./model"),u={trigger:null,triggerType:"click",format:"YYYY-MM-DD",output:{value:"",getter:function(e){return e=e?e:this.get("trigger"),r(e)}},align:{getter:function(){var e=this.get("trigger");return e?{selfXY:[0,0],baseElement:e,baseXY:[0,r(e).height()+10]}:{selfXY:[0,0],baseXY:[0,0]}}},startDay:"Sun",showTime:!1,hideOnSelect:!0,focus:{value:"",getter:function(e){return e=e?e:r(this.get("trigger")).val(),e?l(e,this.get("format")):l()}},range:null,template:c,model:{getter:function(){if(!this.hasOwnProperty("model")){var e={focus:this.get("focus"),range:this.get("range"),showTime:this.get("showTime"),startDay:this.get("startDay")};this.model=new d(e)}return this.model}}},m=i.extend({Implements:[o],attrs:u,events:{"click [data-role=mode-year]":"_changeMode","click [data-role=prev-year]":"prevYear","click [data-role=next-year]":"nextYear","click [data-role=mode-month]":"_changeMode","click [data-role=prev-month]":"prevMonth","click [data-role=next-month]":"nextMonth","click [data-role=previous-10-year]":"_selectYear","click [data-role=next-10-year]":"_selectYear","click [data-role=year]":"_selectYear","click [data-role=month]":"_selectMonth","click [data-role=day]":"_selectDay","click [data-role=date]":"_selectDate","click [data-role=today]":"_selectToday"},templateHelpers:{_:function(e){return h[e]||e}},setup:function(){m.superclass.setup.call(this);var e=this,a=r(this.get("trigger"));a.on(this.get("triggerType"),function(){e.show(),n(e.element,e.model)}),a.on("keydown",function(a){e._keyControl(a)}),a.on("blur",function(){e.hide()}),e.element.on("mousedown",function(e){if(r.browser.msie&&9>parseInt(r.browser.version,10)){var t=a[0];t.onbeforedeactivate=function(){window.event.returnValue=!1,t.onbeforedeactivate=null}}e.preventDefault()});var t=this.model;t.on("changeStartday changeMode",function(){e.renderPartial("[data-role=data-container]"),e.renderPartial("[data-role=pannel-container]"),e.renderPartial("[data-role=month-year-container]"),n(e.element,e.model)}),t.on("changeMonth changeYear",function(){var a=t.get("mode");(a.date||a.year)&&e.renderPartial("[data-role=data-container]"),e.renderPartial("[data-role=month-year-container]"),n(e.element,e.model)}),t.on("changeRange",function(){e.renderPartial("[data-role=data-container]")}),t.on("refresh",function(){n(e.element,e.model)})},show:function(){m.superclass.show.call(this);var e=this.get("output"),a=e.val();a&&this.setFocus(l(a,this.get("format")))},range:function(e){this.model.changeRange(e)},prevYear:function(){this.model.changeYear(-1)},nextYear:function(){this.model.changeYear(1)},prevMonth:function(){this.model.changeMonth(-1)},nextMonth:function(){this.model.changeMonth(1)},setFocus:function(e){this.model.selectDate(e),this.model.changeMode("date"),n(this.element,this.model)},_selectYear:function(e){var a=r(e.target);"year"===a.data("role")?this.model.changeMode("date",{year:a.data("value")}):this.model.changeMode("year",{year:a.data("value")})},_selectMonth:function(e){var a=r(e.target);this.model.changeMode("date",{month:a.data("value")})},_selectDay:function(e){var a=r(e.target);this.model.changeStartDay(a.data("value"))},_selectDate:function(e){var a=r(e.target),t=this.model.selectDate(a.data("value"));this._fillDate(t)},_selectToday:function(){var e=l().format("YYYY-MM-DD"),a=this.model.selectDate(e);this._fillDate(a)},_changeMode:function(e){var a=r(e.target).data("role").substring(5);this.model.changeMode(a)},_keyControl:function(e){var a={68:"date",77:"month",89:"year"};if(e.keyCode in a)return this.model.changeMode(a[e.keyCode]),e.preventDefault(),!1;var t={13:"enter",27:"esc",37:"left",38:"up",39:"right",40:"down"};if(e.keyCode in t){e.preventDefault();var n=t[e.keyCode],r=this.model.get("mode");e.shiftKey&&"down"===n?this.nextYear():e.shiftKey&&"up"===n?this.prevYear():e.shiftKey&&"right"===n?this.nextMonth():e.shiftKey&&"left"===n?this.prevMonth():"esc"===n?this.hide():r.date?this._keyControlDate(n):r.month?this._keyControlMonth(n):r.year&&this._keyControlYear(n)}},_keyControlDate:function(e){if("enter"===e){var a=this.model.selectDate();return this._fillDate(a),void 0}var t={right:1,left:-1,up:-7,down:7};this.model.changeDate(t[e])},_keyControlMonth:function(e){if("enter"===e){var a=this.model.selectDate();return this.model.changeMode("date",{month:a.month()}),void 0}var t={right:1,left:-1,up:-3,down:3};this.model.changeMonth(t[e])},_keyControlYear:function(e){if("enter"===e){var a=this.model.selectDate();return this.model.changeMode("date",{year:a.year()}),void 0}var t={right:1,left:-1,up:-3,down:3};this.model.changeYear(t[e])},_fillDate:function(e){if(!this.model.isInRange(e))return this.trigger("selectDisabledDate",e),this;this.trigger("selectDate",e);var a=this.get("trigger");if(!a)return this;var t=this.get("output");if(t[0].value===void 0)return this;var n=e.format(this.get("format"));t.val(n),this.get("hideOnSelect")&&this.hide()}});m.autoRender=function(e){e.trigger=e.element,e.element="",new m(e)},t.exports=m}),define("arale/calendar/0.8.5/calendar-tpl",["gallery/handlebars/1.0.0/handlebars"],function(e,a,t){var n=e("gallery/handlebars/1.0.0/handlebars");(function(){var e=n.template;n.templates=n.templates||{},t.exports=e(function(e,a,t,n,r){function l(e,a){var n,r,l="";return l+="\n        ",r=t.each.call(e,(n=e.day,null==n||n===!1?n:n.items),{hash:{},inverse:w.noop,fn:w.program(2,i,a),data:a}),(r||0===r)&&(l+=r),l+="\n        "}function i(e,a){var n,r,l="";return l+='\n        <li class="ui-calendar-day ui-calendar-day-',(n=t.value)?n=n.call(e,{hash:{},data:a}):(n=e.value,n=typeof n===_?n.apply(e):n),l+=D(n)+'" data-role="day" data-value="',(n=t.value)?n=n.call(e,{hash:{},data:a}):(n=e.value,n=typeof n===_?n.apply(e):n),l+=D(n)+'">',r={hash:{},data:a},l+=D((n=t._,n?n.call(e,e.label,r):k.call(e,"_",e.label,r)))+"</li>\n        "}function o(e,a){var n,r,l="";return l+="\n        ",r=t.each.call(e,(n=e.date,null==n||n===!1?n:n.items),{hash:{},inverse:w.noop,fn:w.program(5,s,a),data:a}),(r||0===r)&&(l+=r),l+="\n        "}function s(e,a){var n,r="";return r+='\n        <ul class="ui-calendar-date-column">\n            ',n=t.each.call(e,e,{hash:{},inverse:w.noop,fn:w.program(6,h,a),data:a}),(n||0===n)&&(r+=n),r+="\n        </ul>\n        "}function h(e,a){var n,r="";return r+='\n            <li class="ui-calendar-day-',(n=t.day)?n=n.call(e,{hash:{},data:a}):(n=e.day,n=typeof n===_?n.apply(e):n),r+=D(n)+" ",(n=t.className)?n=n.call(e,{hash:{},data:a}):(n=e.className,n=typeof n===_?n.apply(e):n),r+=D(n)+"\n            ",n=t.unless.call(e,e.available,{hash:{},inverse:w.noop,fn:w.program(7,c,a),data:a}),(n||0===n)&&(r+=n),r+='\n            "\n            data-role="date" data-value="',(n=t.value)?n=n.call(e,{hash:{},data:a}):(n=e.value,n=typeof n===_?n.apply(e):n),r+=D(n)+'"\n            >',(n=t.label)?n=n.call(e,{hash:{},data:a}):(n=e.label,n=typeof n===_?n.apply(e):n),r+=D(n)+"</li>\n            "}function c(){return"disabled-date"}function d(e,a){var n,r,l="";return l+="\n        ",r=t.each.call(e,(n=e.month,null==n||n===!1?n:n.items),{hash:{},inverse:w.noop,fn:w.program(10,u,a),data:a}),(r||0===r)&&(l+=r),l+="\n        "}function u(e,a){var n,r="";return r+='\n        <ul class="ui-calendar-month-column">\n            ',n=t.each.call(e,e,{hash:{},inverse:w.noop,fn:w.program(11,m,a),data:a}),(n||0===n)&&(r+=n),r+="\n        </ul>\n        "}function m(e,a){var n,r,l="";return l+='\n            <li data-role="month" data-value="',(n=t.value)?n=n.call(e,{hash:{},data:a}):(n=e.value,n=typeof n===_?n.apply(e):n),l+=D(n)+'">',r={hash:{},data:a},l+=D((n=t._,n?n.call(e,e.label,r):k.call(e,"_",e.label,r)))+"</li>\n            "}function f(e,a){var n,r,l="";return l+="\n        ",r=t.each.call(e,(n=e.year,null==n||n===!1?n:n.items),{hash:{},inverse:w.noop,fn:w.program(14,v,a),data:a}),(r||0===r)&&(l+=r),l+="\n        "}function v(e,a){var n,r="";return r+='\n        <ul class="ui-calendar-year-column">\n            ',n=t.each.call(e,e,{hash:{},inverse:w.noop,fn:w.program(15,g,a),data:a}),(n||0===n)&&(r+=n),r+="\n        </ul>\n        "}function g(e,a){var n,r,l="";return l+='\n            <li data-role="',(n=t.role)?n=n.call(e,{hash:{},data:a}):(n=e.role,n=typeof n===_?n.apply(e):n),l+=D(n)+'" data-value="',(n=t.value)?n=n.call(e,{hash:{},data:a}):(n=e.value,n=typeof n===_?n.apply(e):n),l+=D(n)+'">',r={hash:{},data:a},l+=D((n=t._,n?n.call(e,e.label,r):k.call(e,"_",e.label,r)))+"</li>\n            "}function y(e){var a,t="";return t+='\n        <li class="ui-calendar-time" colspan="2" data-role="time"><span class="ui-calendar-hour">'+D((a=e.time,a=null==a||a===!1?a:a.hour,typeof a===_?a.apply(e):a))+"</span> : "+D((a=e.time,a=null==a||a===!1?a:a.minute,typeof a===_?a.apply(e):a))+"</li>\n        "}this.compilerInfo=[2,">= 1.0.0-rc.3"],t=t||e.helpers,r=r||{};var p,M,Y,b="",_="function",D=this.escapeExpression,k=t.helperMissing,w=this;return b+='<div class="ui-calendar">\n    <ul class="ui-calendar-navigation" data-role="navigation-container">\n        <li class="ui-calendar-previous-year" data-role="prev-year">&lt;&lt;</li>\n        <li class="ui-calendar-previous-month" data-role="prev-month">&lt;</li>\n        <li class="ui-calendar-month-year" data-role="month-year-container">\n        <span class="month" data-role="mode-month" data-value="'+D((p=a.month,p=null==p||p===!1?p:p.current,p=null==p||p===!1?p:p.value,typeof p===_?p.apply(a):p))+'">',Y={hash:{},data:r},b+=D((p=t._,p?p.call(a,(p=a.month,p=null==p||p===!1?p:p.current,null==p||p===!1?p:p.label),Y):k.call(a,"_",(p=a.month,p=null==p||p===!1?p:p.current,null==p||p===!1?p:p.label),Y)))+'</span>\n        <span class="year" data-role="mode-year">'+D((p=a.year,p=null==p||p===!1?p:p.current,p=null==p||p===!1?p:p.label,typeof p===_?p.apply(a):p))+'</span>\n        </li>\n        <li class="ui-calendar-next-month" data-role="next-month">&gt;</li>\n        <li class="ui-calendar-next-year" data-role="next-year">&gt;&gt;</li>\n    </ul>\n\n    <ul class="ui-calendar-control" data-role="pannel-container">\n        ',M=t["if"].call(a,(p=a.mode,null==p||p===!1?p:p.date),{hash:{},inverse:w.noop,fn:w.program(1,l,r),data:r}),(M||0===M)&&(b+=M),b+='\n    </ul>\n\n    <div class="ui-calendar-data-container" data-role="data-container">\n        ',M=t["if"].call(a,(p=a.mode,null==p||p===!1?p:p.date),{hash:{},inverse:w.noop,fn:w.program(4,o,r),data:r}),(M||0===M)&&(b+=M),b+="\n\n        ",M=t["if"].call(a,(p=a.mode,null==p||p===!1?p:p.month),{hash:{},inverse:w.noop,fn:w.program(9,d,r),data:r}),(M||0===M)&&(b+=M),b+="\n\n        ",M=t["if"].call(a,(p=a.mode,null==p||p===!1?p:p.year),{hash:{},inverse:w.noop,fn:w.program(13,f,r),data:r}),(M||0===M)&&(b+=M),b+='\n    </div>\n\n    <ul class="ui-calendar-footer" data-role="time-container">\n        <li class="ui-calendar-today" data-role="today">',Y={hash:{},data:r},b+=D((p=t._,p?p.call(a,(p=a.message,null==p||p===!1?p:p.today),Y):k.call(a,"_",(p=a.message,null==p||p===!1?p:p.today),Y)))+"</li>\n        ",M=t["if"].call(a,(p=a.mode,null==p||p===!1?p:p.time),{hash:{},inverse:w.noop,fn:w.program(17,y,r),data:r}),(M||0===M)&&(b+=M),b+="\n    </ul>\n</div>\n"})})()}),define("arale/calendar/0.8.5/model",["$","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events","gallery/moment/2.0.0/moment"],function(e,a,t){function n(e){if(e=(""+(e||0)).toLowerCase(),h.isNumeric(e))return e=parseInt(e);for(var a=0;f.length>a;a++)if(0===f[a].indexOf(e)){e=a;break}return e}function r(e){var a=[];for(r=0;m.length>r;r++)a.push({value:r,label:m[r]});for(var t={value:e,label:m[e]},n=[],r=0;a.length/3>r;r++)n.push(a.slice(3*r,3*r+3));return{current:t,items:n}}function l(e){for(var a=[{value:e-10,label:". . .",role:"previous-10-year"}],t=e-6;e+4>t;t++)a.push({value:t,label:t,role:"year"});a[7]={value:e,label:e,role:"year",current:!0},a.push({value:e+10,label:". . .",role:"next-10-year"});var n=[];for(t=0;a.length/3>t;t++)n.push(a.slice(3*t,3*t+3));var r={value:e,label:e};return{current:r,items:n}}function i(e){e=n(e);for(var a=[],t=e;7>t;t++)a.push({label:v[t],value:t});for(t=0;e>t;t++)a.push({label:v[t],value:t});var r={value:e,label:v[e]};return{current:r,items:a}}function o(e,a,t){var r,l,i,o=[];a=n(a);var h=function(e,a){o.push({value:e.format("YYYY-MM-DD"),label:e.date(),day:e.day(),className:a,available:s(e,t)})},c=e.clone().date(1),d=c.clone().add("months",-1),u=c.clone().add("months",1);if(r=c.day()-a,0>r&&(r+=7),0!=r)for(i=d.daysInMonth(),f=r-1;f>=0;f--)l=d.date(i-f),h(l,"previous-month");for(i=c.daysInMonth(),f=1;i>=f;f++)l=c.date(f),h(l,"current-month");if(r=35-o.length,0!=r)for(0>r&&(r+=7),f=1;r>=f;f++)l=u.date(f),h(l,"next-month");for(var m=[],f=0;o.length/7>f;f++)m.push(o.slice(7*f,7*f+7));var v={value:e.format("YYYY-MM-DD"),label:e.date()};return{current:v,items:m}}function s(e,a){if(null==a)return!0;if(h.isArray(a)){var t=a[0],n=a[1],r=!0;return t&&(r=r&&e>=d(t)),n&&(r=r&&d(n)>=e),r}return h.isFunction(a)?a(e):!0}var h=e("$"),c=e("arale/base/1.0.1/base"),d=e("gallery/moment/2.0.0/moment"),u=c.extend({attrs:{year:{setter:function(e){return l(e)}},month:{setter:function(e){return r(e)}},day:{setter:function(){return i(this.startDay)}},date:{setter:function(e){return o(e,this.startDay,this.range)}},mode:{setter:function(e){var a={date:!1,month:!1,year:!1};return a[e]=!0,a}},message:null},initialize:function(e){u.superclass.initialize.call(this),this.startDay=e.startDay||0,this.activeTime=d(e.focus).clone(),this.range=e.range||null;var a=e.message||{};a.today="Today",this.set("message",a),this.set("mode","date"),this._refresh()},changeYear:function(e){this.activeTime.add("years",e),this._refresh(),this.trigger("changeYear")},changeMonth:function(e){this.activeTime.add("months",e),this._refresh(),this.trigger("changeMonth")},changeDate:function(e){var a=this.activeTime.format("YYYY-MM");this.activeTime.add("days",e),this._refresh();var t=this.activeTime.format("YYYY-MM");a!=t&&this.get("mode").date&&this.trigger("changeMonth")},changeStartDay:function(e){this.startDay=e,this._refresh(),this.trigger("changeStartday")},changeMode:function(e,a){a||(a={}),"month"in a&&this.activeTime.month(a.month),"year"in a&&this.activeTime.year(a.year),this.get("mode")[e]?this.set("mode","date"):this.set("mode",e),this._refresh(),this.trigger("changeMode")},changeRange:function(e){this.range=e,this._refresh(),this.trigger("changeRange")},selectDate:function(e){if(e){var a=this.activeTime.format("YYYY-MM");this.activeTime=d(e),this._refresh();var t=this.activeTime.format("YYYY-MM");a!=t&&this.get("mode").date&&this.trigger("changeMonth")}return this.activeTime.clone()},isInRange:function(e){return s(e,this.range)},toJSON:function(){var e={},a=this.attrs;for(var t in a)e[t]=this.get(t);return e},_refresh:function(){this.set("year",this.activeTime.year()),this.set("month",this.activeTime.month()),this.set("date",this.activeTime.clone()),this.set("day"),this.trigger("refresh")},range:null,activeTime:null,startDay:0}),m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],f=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],v=["Su","Mo","Tu","We","Th","Fr","Sa"];t.exports=u});
define("arale/class/1.0.0/class",[],function(t,n,e){function r(t){return this instanceof r||!l(t)?void 0:i(t)}function o(t){var n,e;for(n in t)e=t[n],r.Mutators.hasOwnProperty(n)?r.Mutators[n].call(this,e):this.prototype[n]=e}function i(t){return t.extend=r.extend,t.implement=o,t}function u(){}function s(t,n,e){for(var r in n)if(n.hasOwnProperty(r)){if(e&&-1===h(e,r))continue;"prototype"!==r&&(t[r]=n[r])}}function c(t){if(y){var n=y();if(n){var e=n.uri.split(/[\/\\]/).pop();Object.defineProperties?Object.defineProperties(t,{__module:{value:n},__filename:{value:e}}):(t.__module=n,t.__filename=e)}}}e.exports=r,r.create=function(t,n){function e(){t.apply(this,arguments),this.constructor===e&&this.initialize&&this.initialize.apply(this,arguments)}return l(t)||(n=t,t=null),n||(n={}),t||(t=n.Extends||r),n.Extends=t,t!==r&&s(e,t,t.StaticsWhiteList),o.call(e,n),i(e)},r.extend=function(t){return t||(t={}),t.Extends=this,r.create(t)},r.Mutators={Extends:function(t){var n=this.prototype,e=a(t.prototype);s(e,n),e.constructor=this,this.prototype=e,this.superclass=t.prototype,c(e)},Implements:function(t){f(t)||(t=[t]);for(var n,e=this.prototype;n=t.shift();)s(e,n.prototype||n)},Statics:function(t){s(this,t)}};var a=Object.__proto__?function(t){return{__proto__:t}}:function(t){return u.prototype=t,new u},p=Object.prototype.toString,f=Array.isArray;f||(f=function(t){return"[object Array]"===p.call(t)});var l=function(t){return"[object Function]"===p.call(t)},h=Array.prototype.indexOf?function(t,n){return t.indexOf(n)}:function(t,n){for(var e=0,r=t.length;r>e;e++)if(t[e]===n)return e;return-1},y=e.constructor._getCompilingModule});
define("arale/class/1.1.0/class",[],function(t,n,r){function o(t){return this instanceof o||!f(t)?void 0:i(t)}function e(t){var n,r;for(n in t)r=t[n],o.Mutators.hasOwnProperty(n)?o.Mutators[n].call(this,r):this.prototype[n]=r}function i(t){return t.extend=o.extend,t.implement=e,t}function s(){}function c(t,n,r){for(var o in n)if(n.hasOwnProperty(o)){if(r&&-1===l(r,o))continue;"prototype"!==o&&(t[o]=n[o])}}r.exports=o,o.create=function(t,n){function r(){t.apply(this,arguments),this.constructor===r&&this.initialize&&this.initialize.apply(this,arguments)}return f(t)||(n=t,t=null),n||(n={}),t||(t=n.Extends||o),n.Extends=t,t!==o&&c(r,t,t.StaticsWhiteList),e.call(r,n),i(r)},o.extend=function(t){return t||(t={}),t.Extends=this,o.create(t)},o.Mutators={Extends:function(t){var n=this.prototype,r=u(t.prototype);c(r,n),r.constructor=this,this.prototype=r,this.superclass=t.prototype},Implements:function(t){p(t)||(t=[t]);for(var n,r=this.prototype;n=t.shift();)c(r,n.prototype||n)},Statics:function(t){c(this,t)}};var u=Object.__proto__?function(t){return{__proto__:t}}:function(t){return s.prototype=t,new s},a=Object.prototype.toString,p=Array.isArray||function(t){return"[object Array]"===a.call(t)},f=function(t){return"[object Function]"===a.call(t)},l=Array.prototype.indexOf?function(t,n){return t.indexOf(n)}:function(t,n){for(var r=0,o=t.length;o>r;r++)if(t[r]===n)return r;return-1}});
define("arale/detector/1.0.1/detector",["./versioning"],function(e,n,r){function i(e){return Object.prototype.toString.call(e)}function o(e){return"[object Object]"===i(e)}function t(e){return"[object Function]"===i(e)}function s(e){return"[object Array]"===i(e)}function a(e,n){if(s(e))for(var r=0,i=e.length;i>r&&n.call(e,e[r],r)!==!1;r++);}function u(e){if(!l.test(e))return null;var n,r,i,o,t;-1!==e.indexOf("trident/")&&(n=/\btrident\/([0-9.]+)/.exec(e),n&&n.length>=2&&(i=n[1],v_version=n[1].split("."),v_version[0]=parseInt(v_version[0],10)+4,t=v_version.join("."))),n=l.exec(e),o=n[1];var s=n[1].split(".");return t===void 0&&(t=o),s[0]=parseInt(s[0],10)-4,r=s.join("."),i===void 0&&(i=r),{browserVersion:t,browserMode:o,engineVersion:i,engineMode:r,compatible:i!==r}}function c(e,n,r){r===void 0&&(r=w);var s=t(n)?n.call(null,r):n;if(!s)return null;var a={name:e,version:"-1",codename:""},u=i(s);if(s===!0)return a;if("[object String]"===u){if(-1!==r.indexOf(s))return a}else{if(o(s))return s.hasOwnProperty("version")&&(a.version=s.version),a;if(s.exec){var c=s.exec(r);if(c)return a.version=c.length>=2&&c[1]?c[1].replace(/_/g,"."):"-1",a}}}function b(e,n,r,i){var o=g;a(n,function(n){var r=c(n[0],n[1],e);return r?(o=r,!1):void 0}),r.call(i,o.name,o.version)}var f=e("./versioning"),d={},w=navigator.userAgent||"";navigator.platform||"",navigator.vendor||"";var v=window.external,l=/\b(?:msie|ie) ([0-9.]+)/,p=[["nokia",function(e){return-1!==e.indexOf("nokia ")?/\bnokia ([0-9]+)?/:/\bnokia[\d]/.test(e)?/\bnokia(\d+)/:"nokia"}],["wp",function(e){return-1!==e.indexOf("windows phone ")||-1!==e.indexOf("xblwp")||-1!==e.indexOf("zunewp")||-1!==e.indexOf("windows ce")}],["pc","windows"],["ipad","ipad"],["ipod","ipod"],["iphone","iphone"],["mac","macintosh"],["mi",function(e){return-1!==e.indexOf("mi-one plus")?{version:"1s"}:/\bmi ([0-9.as]+)/}],["aliyun","aliyunos"],["meizu",/\bm([0-9]+)\b/],["nexus",/\bnexus ([0-9.]+)/],["android","android"],["blackberry","blackberry"]],x=[["wp",function(e){return-1!==e.indexOf("windows phone ")?/\bwindows phone (?:os )?([0-9.]+)/:-1!==e.indexOf("xblwp")?/\bxblwp([0-9.]+)/:-1!==e.indexOf("zunewp")?/\bzunewp([0-9.]+)/:"windows phone"}],["windows",/\bwindows nt ([0-9.]+)/],["macosx",/\bmac os x ([0-9._]+)/],["ios",/\bcpu(?: iphone)? os ([0-9._]+)/],["yunos",/\baliyunos ([0-9.]+)/],["android",/\bandroid[ -]([0-9.]+)/],["chromeos",/\bcros i686 ([0-9.]+)/],["linux","linux"],["windowsce",/\bwindows ce(?: ([0-9.]+))?/],["symbian",/\bsymbianos\/([0-9.]+)/],["blackberry","blackberry"]],m=[["trident",l],["webkit",/\bapplewebkit\/([0-9.+]+)/],["gecko",/\bgecko\/(\d+)/],["presto",/\bpresto\/([0-9.]+)/]],h=[["360",function(){if(v)try{return v.twGetVersion(v.twGetSecurityID(window))}catch(e){try{return-1!==v.twGetRunPath.toLowerCase().indexOf("360se")||!!v.twGetSecurityID(window)}catch(e){}}return/\b360(?:se|ee|chrome)/}],["mx",function(){if(v)try{return(v.mxVersion||v.max_version).split(".")}catch(e){}return/\bmaxthon(?:[ \/]([0-9.]+))?/}],["sg",/ se ([0-9.x]+)/],["tw",function(){if(v)try{return-1!==v.twGetRunPath.toLowerCase().indexOf("theworld")}catch(e){}return"theworld"}],["green","greenbrowser"],["qq",/\bqqbrowser\/([0-9.]+)/],["tt",/\btencenttraveler ([0-9.]+)/],["lb",function(e){if(-1===e.indexOf("lbbrowser"))return!1;var n="-1";if(window.external&&window.external.LiebaoGetVersion)try{n=window.external.LiebaoGetVersion()}catch(r){}return{version:n}}],["tao",/\btaobrowser\/([0-9.]+)/],["fs",/\bcoolnovo\/([0-9.]+)/],["sy","saayaa"],["baidu",/\bbidubrowser[ \/]([0-9.x]+)/],["mi",/\bmiuibrowser\/([0-9.]+)/],["ie",l],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//],["firefox",/\bfirefox\/([0-9.ab]+)/],["opera",/\bopera.+version\/([0-9.ab]+)/],["uc",function(e){return-1!==e.indexOf("ucbrowser")?/\bucbrowser\/([0-9.]+)/:/\bucweb([0-9.]+)/}]],g={name:"na",version:"-1"},y=function(e){e=(e||"").toLowerCase();var n={};b(e,p,function(e,r){var i=new f(r);n.device={name:e,version:i},n.device[e]=i},n),b(e,x,function(e,r){var i=new f(r);n.os={name:e,version:i},n.os[e]=i},n);var r=u(e);return b(e,m,function(e,i){var o=i;r&&(i=r.engineVersion||r.engineMode,o=r.engineMode);var t=new f(i),s=new f(o);n.engine={name:e,version:t,mode:s,compatible:r?r.compatible:!1},n.engine[e]=t},n),b(e,h,function(i,o){var t=o;r&&("ie"===i&&(o=r.browserVersion),t=r.browserMode);var s=new f(o),a=new f(t);-1!==e.indexOf("android")&&"safari"===i&&(i="android"),n.browser={name:i,version:s,mode:a,compatible:r?r.compatible:!1},n.browser[i]=s},n),n};d=y(w),d.detect=y,r.exports=d}),define("arale/detector/1.0.1/versioning",[],function(e,n,r){function i(e,n,r){if(e+="",n+="",e===n)return 0;for(var i=e.split(o),t=n.split(o),s=Math[r?"max":"min"](i.length,t.length),a=0;s>a;a++){if(i[a]=i[a]===void 0?0:parseInt(i[a],10),t[a]=t[a]===void 0?0:parseInt(t[a],10),i[a]>t[a])return 1;if(i[a]<t[a])return-1}return 0}var o=".",t=function(e){this._version=e+""};t.compare=function(e,n){return i(e,n,!0)},t.eq=function(e,n){return 0===i(e,n,!1)},t.gt=function(e,n){return i(e,n,!0)>0},t.gte=function(e,n){return i(e,n,!0)>=0},t.lt=function(e,n){return 0>i(e,n,!0)},t.lte=function(e,n){return 0>=i(e,n,!0)},t.prototype={eq:function(e){return t.eq(this._version,e)},gt:function(e){return t.gt(this._version,e)},gte:function(e){return t.gte(this._version,e)},lt:function(e){return t.lt(this._version,e)},lte:function(e){return t.lte(this._version,e)},valueOf:function(){return parseFloat(this._version.split(o).slice(0,2).join(o),10)},toString:function(e){return e===void 0?this._version:this._version.split(o).slice(0,e).join(o)}},r.exports=t});
define("arale/detector/1.1.0/detector",[],function(e,n,r){function o(e){return Object.prototype.toString.call(e)}function i(e){return"[object Object]"===o(e)}function t(e){return"[object Function]"===o(e)}function a(e){return"[object Array]"===o(e)}function s(e,n){if(a(e))for(var r=0,o=e.length;o>r&&n.call(e,e[r],r)!==!1;r++);}function c(e){if(!w.test(e))return null;var n,r,o,i,t;-1!==e.indexOf("trident/")&&(n=/\btrident\/([0-9.]+)/.exec(e),n&&n.length>=2&&(o=n[1],v_version=n[1].split("."),v_version[0]=parseInt(v_version[0],10)+4,t=v_version.join("."))),n=w.exec(e),i=n[1];var a=n[1].split(".");return t===void 0&&(t=i),a[0]=parseInt(a[0],10)-4,r=a.join("."),o===void 0&&(o=r),{browserVersion:t,browserMode:i,engineVersion:o,engineMode:r,compatible:o!==r}}function b(e,n,r){r===void 0&&(r=l);var a=t(n)?n.call(null,r):n;if(!a)return null;var s={name:e,version:"-1",codename:""},c=o(a);if(a===!0)return s;if("[object String]"===c){if(-1!==r.indexOf(a))return s}else{if(i(a))return a.hasOwnProperty("version")&&(s.version=a.version),s;if(a.exec){var b=a.exec(r);if(b)return s.version=b.length>=2&&b[1]?b[1].replace(/_/g,"."):"-1",s}}}function u(e,n,r,o){var i=h;s(n,function(n){var r=b(n[0],n[1],e);return r?(i=r,!1):void 0}),r.call(o,i.name,i.version)}var d={},l=navigator.userAgent||"";navigator.platform||"",navigator.vendor||"";var f=window.external,w=/\b(?:msie|ie) ([0-9.]+)/,v=[["nokia",function(e){return-1!==e.indexOf("nokia ")?/\bnokia ([0-9]+)?/:/\bnokia[\d]/.test(e)?/\bnokia(\d+)/:"nokia"}],["wp",function(e){return-1!==e.indexOf("windows phone ")||-1!==e.indexOf("xblwp")||-1!==e.indexOf("zunewp")||-1!==e.indexOf("windows ce")}],["pc","windows"],["ipad","ipad"],["ipod","ipod"],["iphone","iphone"],["mac","macintosh"],["mi",function(e){return-1!==e.indexOf("mi-one plus")?{version:"1s"}:/\bmi ([0-9.as]+)/}],["aliyun","aliyunos"],["meizu",/\bm([0-9]+)\b/],["nexus",/\bnexus ([0-9.]+)/],["android","android"],["blackberry","blackberry"]],p=[["wp",function(e){return-1!==e.indexOf("windows phone ")?/\bwindows phone (?:os )?([0-9.]+)/:-1!==e.indexOf("xblwp")?/\bxblwp([0-9.]+)/:-1!==e.indexOf("zunewp")?/\bzunewp([0-9.]+)/:"windows phone"}],["windows",/\bwindows nt ([0-9.]+)/],["macosx",/\bmac os x ([0-9._]+)/],["ios",/\bcpu(?: iphone)? os ([0-9._]+)/],["yunos",/\baliyunos ([0-9.]+)/],["android",/\bandroid[ -]([0-9.]+)/],["chromeos",/\bcros i686 ([0-9.]+)/],["linux","linux"],["windowsce",/\bwindows ce(?: ([0-9.]+))?/],["symbian",/\bsymbianos\/([0-9.]+)/],["blackberry","blackberry"]],x=[["trident",w],["webkit",/\bapplewebkit\/([0-9.+]+)/],["gecko",/\bgecko\/(\d+)/],["presto",/\bpresto\/([0-9.]+)/]],m=[["360",function(){if(f)try{return f.twGetVersion(f.twGetSecurityID(window))}catch(e){try{return-1!==f.twGetRunPath.toLowerCase().indexOf("360se")||!!f.twGetSecurityID(window)}catch(e){}}return/\b360(?:se|ee|chrome)/}],["mx",function(){if(f)try{return(f.mxVersion||f.max_version).split(".")}catch(e){}return/\bmaxthon(?:[ \/]([0-9.]+))?/}],["sg",/ se ([0-9.x]+)/],["tw",function(){if(f)try{return-1!==f.twGetRunPath.toLowerCase().indexOf("theworld")}catch(e){}return"theworld"}],["green","greenbrowser"],["qq",/\bqqbrowser\/([0-9.]+)/],["tt",/\btencenttraveler ([0-9.]+)/],["lb",function(e){if(-1===e.indexOf("lbbrowser"))return!1;var n="-1";if(window.external&&window.external.LiebaoGetVersion)try{n=window.external.LiebaoGetVersion()}catch(r){}return{version:n}}],["tao",/\btaobrowser\/([0-9.]+)/],["fs",/\bcoolnovo\/([0-9.]+)/],["sy","saayaa"],["baidu",/\bbidubrowser[ \/]([0-9.x]+)/],["mi",/\bmiuibrowser\/([0-9.]+)/],["ie",w],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["android",function(e){return-1!==e.indexOf("android")?/\bversion\/([0-9.]+(?: beta)?)/:void 0}],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//],["firefox",/\bfirefox\/([0-9.ab]+)/],["opera",/\bopera.+version\/([0-9.ab]+)/],["uc",function(e){return-1!==e.indexOf("ucbrowser")?/\bucbrowser\/([0-9.]+)/:/\bucweb([0-9.]+)/}]],h={name:"na",version:"-1"},g=function(e){e=(e||"").toLowerCase();var n={};u(e,v,function(e,r){var o=parseFloat(r);n.device={name:e,version:o,fullVersion:r},n.device[e]=o},n),u(e,p,function(e,r){var o=parseFloat(r);n.os={name:e,version:o,fullVersion:r},n.os[e]=o},n);var r=c(e);return u(e,x,function(e,o){var i=o;r&&(o=r.engineVersion||r.engineMode,i=r.engineMode);var t=parseFloat(o);n.engine={name:e,version:t,fullVersion:o,mode:parseFloat(i),fullMode:i,compatible:r?r.compatible:!1},n.engine[e]=t},n),u(e,m,function(e,o){var i=o;r&&("ie"===e&&(o=r.browserVersion),i=r.browserMode);var t=parseFloat(o);n.browser={name:e,version:t,fullVersion:o,mode:parseFloat(i),fullMode:i,compatible:r?r.compatible:!1},n.browser[e]=t},n),n};d=g(l),d.detect=g,r.exports=d});
define("arale/dialog/1.0.1/dialog",["$","arale/overlay/1.0.1/overlay","arale/position/1.0.0/position","arale/iframe-shim/1.0.1/iframe-shim","arale/widget/1.0.3/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events","arale/overlay/1.0.1/mask","arale/widget/1.0.3/templatable","gallery/handlebars/1.0.0/handlebars","./dialog-tpl.js"],function(e,t,i){function s(e){null==e.attr("tabindex")&&e.attr("tabindex","-1")}function a(e){var t=e[0].contentWindow.document;return t.body.scrollHeight&&t.documentElement.scrollHeight?Math.min(t.body.scrollHeight,t.documentElement.scrollHeight):t.documentElement.scrollHeight?t.documentElement.scrollHeight:t.body.scrollHeight?t.body.scrollHeight:void 0}var n=e("$"),r=e("arale/overlay/1.0.1/overlay"),l=e("arale/overlay/1.0.1/mask"),o=e("arale/events/1.0.0/events"),h=e("arale/widget/1.0.3/templatable"),c=".dialog",f="300px",d=r.extend({Implements:h,attrs:{template:e("./dialog-tpl"),trigger:{value:null,getter:function(e){return n(e)}},classPrefix:"ui-dialog",content:{value:"",setter:function(e){return/^(https?:\/\/|\/|\.\/|\.\.\/)/.test(e)&&(this._type="iframe"),e}},hasMask:!0,closeTpl:"×",width:500,height:null,effect:"none",zIndex:999,autoFit:!0,align:{selfXY:["50%","50%"],baseXY:["50%","50%"]}},parseElement:function(){this.model={classPrefix:this.get("classPrefix")},d.superclass.parseElement.call(this),this.contentElement=this.$("[data-role=content]"),this.contentElement.css({background:"#fff",height:"100%",zoom:1}),this.$("[data-role=close]").hide()},events:{"click [data-role=close]":function(e){e.preventDefault(),this.hide()}},show:function(){return"iframe"===this._type&&(!this.get("height")&&this.element.css("height",f),this._showIframe()),d.superclass.show.call(this),this},hide:function(){return"iframe"===this._type&&this.iframe&&(this.iframe.attr({src:"javascript:'';"}),this.iframe.remove(),this.iframe=null),d.superclass.hide.call(this),clearInterval(this._interval),delete this._interval,this},destroy:function(){return this.get("trigger")&&this.get("trigger").off("click"+c+this.cid),n(document).off("keyup."+c+this.cid),this.element.remove(),l.hide(),clearInterval(this._interval),d.superclass.destroy.call(this)},setup:function(){d.superclass.setup.call(this),this._setupTrigger(),this._setupMask(),this._setupKeyEvents(),this._setupFocus(),s(this.element),s(this.get("trigger")),this.activeTrigger=this.get("trigger").eq(0)},_onRenderContent:function(e){if("iframe"!==this._type){var t;try{t=n(e)}catch(i){t=[]}t[0]?this.contentElement.empty().append(t):this.contentElement.empty().html(e)}},_onRenderCloseTpl:function(e){""===e?this.$("[data-role=close]").html(e).hide():this.$("[data-role=close]").html(e).show()},_onRenderVisible:function(e){e?"fade"===this.get("effect")?this.element.fadeIn(300):this.element.show():this.element.hide()},_onRenderZIndex:function(e){return l.set("zIndex",parseInt(e,10)-1),d.superclass._onRenderZIndex.call(this,e)},_setupTrigger:function(){var e=this;this.get("trigger").on("click"+c+this.cid,function(t){t.preventDefault(),e.activeTrigger=n(this),e.show()})},_setupMask:function(){this.before("show",function(){this.get("hasMask")&&l.show()}),this.after("hide",function(){this.get("hasMask")&&l.hide()})},_setupFocus:function(){this.after("show",function(){this.element.focus()}),this.after("hide",function(){this.activeTrigger&&this.activeTrigger.focus()})},_setupKeyEvents:function(){var e=this;n(document).on("keyup."+c+this.cid,function(t){27===t.keyCode&&e.get("visible")&&e.hide()})},_showIframe:function(){var e=this;this.iframe||this._createIframe(),this.iframe.attr({src:this._fixUrl(),name:"dialog-iframe"+(new Date).getTime()}),this.iframe.one("load",function(){e.get("visible")&&(e.get("autoFit")&&(clearInterval(e._interval),e._interval=setInterval(function(){e._syncHeight()},300)),e._syncHeight(),e._setPosition(),e.trigger("complete:show"))})},_fixUrl:function(){var e=this.get("content").match(/([^?#]*)(\?[^#]*)?(#.*)?/);return e.shift(),e[1]=(e[1]&&"?"!==e[1]?e[1]+"&":"?")+"t="+(new Date).getTime(),e.join("")},_createIframe:function(){var e=this;this.iframe=n("<iframe>",{src:"javascript:'';",scrolling:"no",frameborder:"no",allowTransparency:"true",css:{border:"none",width:"100%",display:"block",height:"100%",overflow:"hidden"}}).appendTo(this.contentElement),o.mixTo(this.iframe[0]),this.iframe[0].on("close",function(){e.hide()})},_syncHeight:function(){var e;if(this.get("height"))clearInterval(this._interval),delete this._interval;else{try{this._errCount=0,e=a(this.iframe)+"px"}catch(t){this._errCount=(this._errCount||0)+1,this._errCount>=6&&(e=f,clearInterval(this._interval),delete this._interval)}this.element.css("height",e),this.element[0].className=this.element[0].className}}});i.exports=d}),define("arale/dialog/1.0.1/dialog-tpl",["gallery/handlebars/1.0.0/handlebars"],function(e,t,i){var s=e("gallery/handlebars/1.0.0/handlebars");(function(){var e=s.template;s.templates=s.templates||{},i.exports=e(function(e,t,i,s,a){this.compilerInfo=[2,">= 1.0.0-rc.3"],i=i||e.helpers,a=a||{};var n,r="",l="function",o=this.escapeExpression;return r+='<div class="',(n=i.classPrefix)?n=n.call(t,{hash:{},data:a}):(n=t.classPrefix,n=typeof n===l?n.apply(t):n),r+=o(n)+'">\n    <div class="',(n=i.classPrefix)?n=n.call(t,{hash:{},data:a}):(n=t.classPrefix,n=typeof n===l?n.apply(t):n),r+=o(n)+'-close" title="关闭本框" data-role="close"></div>\n    <div class="',(n=i.classPrefix)?n=n.call(t,{hash:{},data:a}):(n=t.classPrefix,n=typeof n===l?n.apply(t):n),r+=o(n)+'-content" data-role="content"></div>\n</div>\n'})})()});
define("arale/dialog/1.0.2/dialog",["$","arale/overlay/1.0.1/overlay","arale/position/1.0.0/position","arale/iframe-shim/1.0.1/iframe-shim","arale/widget/1.0.3/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events","arale/overlay/1.0.1/mask","arale/widget/1.0.3/templatable","gallery/handlebars/1.0.0/handlebars","./dialog-tpl.js"],function(e,t,i){function s(e){null==e.attr("tabindex")&&e.attr("tabindex","-1")}function a(e){var t=e[0].contentWindow.document;return t.body.scrollHeight&&t.documentElement.scrollHeight?Math.min(t.body.scrollHeight,t.documentElement.scrollHeight):t.documentElement.scrollHeight?t.documentElement.scrollHeight:t.body.scrollHeight?t.body.scrollHeight:void 0}var n=e("$"),r=e("arale/overlay/1.0.1/overlay"),l=e("arale/overlay/1.0.1/mask"),h=e("arale/events/1.0.0/events"),o=e("arale/widget/1.0.3/templatable"),c=".dialog",f="300px",d=r.extend({Implements:o,attrs:{template:e("./dialog-tpl"),trigger:{value:null,getter:function(e){return n(e)}},classPrefix:"ui-dialog",content:{value:"",setter:function(e){return/^(https?:\/\/|\/|\.\/|\.\.\/)/.test(e)&&(this._type="iframe"),e}},hasMask:!0,closeTpl:"×",width:500,height:null,effect:"none",zIndex:999,autoFit:!0,align:{selfXY:["50%","50%"],baseXY:["50%","50%"]}},parseElement:function(){this.model={classPrefix:this.get("classPrefix")},d.superclass.parseElement.call(this),this.contentElement=this.$("[data-role=content]"),this.contentElement.css({background:"#fff",height:"100%",zoom:1}),this.$("[data-role=close]").hide()},events:{"click [data-role=close]":function(e){e.preventDefault(),this.hide()}},show:function(){return"iframe"===this._type&&(!this.get("height")&&this.element.css("height",f),this._showIframe()),d.superclass.show.call(this),this},hide:function(){return"iframe"===this._type&&this.iframe&&(this.iframe.attr({src:"javascript:'';"}),this.iframe.remove(),this.iframe=null),d.superclass.hide.call(this),clearInterval(this._interval),delete this._interval,this},destroy:function(){return this.get("trigger")&&this.get("trigger").off("click"+c+this.cid),n(document).off("keyup."+c+this.cid),this.element.remove(),this.get("hasMask")&&l.hide(),clearInterval(this._interval),d.superclass.destroy.call(this)},setup:function(){d.superclass.setup.call(this),this._setupTrigger(),this._setupMask(),this._setupKeyEvents(),this._setupFocus(),s(this.element),s(this.get("trigger")),this.activeTrigger=this.get("trigger").eq(0)},_onRenderContent:function(e){if("iframe"!==this._type){var t;try{t=n(e)}catch(i){t=[]}t[0]?this.contentElement.empty().append(t):this.contentElement.empty().html(e)}},_onRenderCloseTpl:function(e){""===e?this.$("[data-role=close]").html(e).hide():this.$("[data-role=close]").html(e).show()},_onRenderVisible:function(e){e?"fade"===this.get("effect")?this.element.fadeIn(300):this.element.show():this.element.hide()},_setupTrigger:function(){var e=this;this.get("trigger").on("click"+c+this.cid,function(t){t.preventDefault(),e.activeTrigger=n(this),e.show()})},_setupMask:function(){var e,t=this.get("hasMask"),i=parseInt(this.get("zIndex"),10);this.before("show",function(){t&&(e=l.get("zIndex"),l.set("zIndex",i-1).show())}),this.after("hide",function(){t&&l.set("zIndex",e).hide()})},_setupFocus:function(){this.after("show",function(){this.element.focus()}),this.after("hide",function(){this.activeTrigger&&this.activeTrigger.focus()})},_setupKeyEvents:function(){var e=this;n(document).on("keyup."+c+this.cid,function(t){27===t.keyCode&&e.get("visible")&&e.hide()})},_showIframe:function(){var e=this;this.iframe||this._createIframe(),this.iframe.attr({src:this._fixUrl(),name:"dialog-iframe"+(new Date).getTime()}),this.iframe.one("load",function(){e.get("visible")&&(e.get("autoFit")&&(clearInterval(e._interval),e._interval=setInterval(function(){e._syncHeight()},300)),e._syncHeight(),e._setPosition(),e.trigger("complete:show"))})},_fixUrl:function(){var e=this.get("content").match(/([^?#]*)(\?[^#]*)?(#.*)?/);return e.shift(),e[1]=(e[1]&&"?"!==e[1]?e[1]+"&":"?")+"t="+(new Date).getTime(),e.join("")},_createIframe:function(){var e=this;this.iframe=n("<iframe>",{src:"javascript:'';",scrolling:"no",frameborder:"no",allowTransparency:"true",css:{border:"none",width:"100%",display:"block",height:"100%",overflow:"hidden"}}).appendTo(this.contentElement),h.mixTo(this.iframe[0]),this.iframe[0].on("close",function(){e.hide()})},_syncHeight:function(){var e;if(this.get("height"))clearInterval(this._interval),delete this._interval;else{try{this._errCount=0,e=a(this.iframe)+"px"}catch(t){this._errCount=(this._errCount||0)+1,this._errCount>=6&&(e=f,clearInterval(this._interval),delete this._interval)}this.element.css("height",e),this.element[0].className=this.element[0].className}}});i.exports=d}),define("arale/dialog/1.0.2/dialog-tpl",["gallery/handlebars/1.0.0/handlebars"],function(e,t,i){var s=e("gallery/handlebars/1.0.0/handlebars");(function(){var e=s.template;s.templates=s.templates||{},i.exports=e(function(e,t,i,s,a){this.compilerInfo=[2,">= 1.0.0-rc.3"],i=i||e.helpers,a=a||{};var n,r="",l="function",h=this.escapeExpression;return r+='<div class="',(n=i.classPrefix)?n=n.call(t,{hash:{},data:a}):(n=t.classPrefix,n=typeof n===l?n.apply(t):n),r+=h(n)+'">\n    <div class="',(n=i.classPrefix)?n=n.call(t,{hash:{},data:a}):(n=t.classPrefix,n=typeof n===l?n.apply(t):n),r+=h(n)+'-close" title="关闭本框" data-role="close"></div>\n    <div class="',(n=i.classPrefix)?n=n.call(t,{hash:{},data:a}):(n=t.classPrefix,n=typeof n===l?n.apply(t):n),r+=h(n)+'-content" data-role="content"></div>\n</div>\n'})})()});
define("arale/easing/1.0.0/easing",["$"],function(n,t,e){var u=Math.PI,r=Math.pow,o=Math.sin,c=1.70158,a={easeNone:function(n){return n},easeIn:function(n){return n*n},easeOut:function(n){return(2-n)*n},easeBoth:function(n){return 1>(n*=2)?.5*n*n:.5*(1- --n*(n-2))},easeInStrong:function(n){return n*n*n*n},easeOutStrong:function(n){return 1- --n*n*n*n},easeBothStrong:function(n){return 1>(n*=2)?.5*n*n*n*n:.5*(2-(n-=2)*n*n*n)},backIn:function(n){return 1===n&&(n-=.001),n*n*((c+1)*n-c)},backOut:function(n){return(n-=1)*n*((c+1)*n+c)+1},backBoth:function(n){var t=c,e=(t*=1.525)+1;return 1>(n*=2)?.5*n*n*(e*n-t):.5*((n-=2)*n*(e*n+t)+2)},elasticIn:function(n){var t=.3,e=t/4;return 0===n||1===n?n:-(r(2,10*(n-=1))*o(2*(n-e)*u/t))},elasticOut:function(n){var t=.3,e=t/4;return 0===n||1===n?n:r(2,-10*n)*o(2*(n-e)*u/t)+1},elasticBoth:function(n){var t=.45,e=t/4;return 0===n||2===(n*=2)?n:1>n?-.5*r(2,10*(n-=1))*o(2*(n-e)*u/t):.5*r(2,-10*(n-=1))*o(2*(n-e)*u/t)+1},bounceIn:function(n){return 1-a.bounceOut(1-n)},bounceOut:function(n){var t,e=7.5625;return t=1/2.75>n?e*n*n:2/2.75>n?e*(n-=1.5/2.75)*n+.75:2.5/2.75>n?e*(n-=2.25/2.75)*n+.9375:e*(n-=2.625/2.75)*n+.984375},bounceBoth:function(n){return.5>n?.5*a.bounceIn(2*n):.5*a.bounceOut(2*n-1)+.5}};e.exports=a;var i=n("$");i.extend(i.easing,a)});
define("arale/events/1.0.0/events",[],function(){function t(){}var e=/\s+/;t.prototype.on=function(t,n,r){var i,s,o;if(!n)return this;i=this.__events||(this.__events={}),t=t.split(e);while(s=t.shift())o=i[s]||(i[s]=[]),o.push(n,r);return this},t.prototype.off=function(t,r,i){var s,o,u,a;if(!(s=this.__events))return this;if(!(t||r||i))return delete this.__events,this;t=t?t.split(e):n(s);while(o=t.shift()){u=s[o];if(!u)continue;if(!r&&!i){delete s[o];continue}for(a=u.length-2;a>=0;a-=2)r&&u[a]!==r||i&&u[a+1]!==i||u.splice(a,2)}return this},t.prototype.trigger=function(t){var n,r,i,s,o,u,a=[],f;if(!(n=this.__events))return this;t=t.split(e);for(o=1,u=arguments.length;o<u;o++)a[o-1]=arguments[o];while(r=t.shift()){if(i=n.all)i=i.slice();if(s=n[r])s=s.slice();if(s)for(o=0,u=s.length;o<u;o+=2)s[o].apply(s[o+1]||this,a);if(i){f=[r].concat(a);for(o=0,u=i.length;o<u;o+=2)i[o].apply(i[o+1]||this,f)}}return this},t.mixTo=function(e){e=e.prototype||e;var n=t.prototype;for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])};var n=Object.keys;return n||(n=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),t});define("arale/events/1.1.0/events",[],function(){function t(){}function e(t,e,r,s){var n;if(t)for(var i=0,o=t.length;o>i;i+=2)n=t[i].apply(t[i+1]||r,e),n===!1&&s.status&&(s.status=!1)}var r=/\s+/;t.prototype.on=function(t,e,s){var n,i,o;if(!e)return this;for(n=this.__events||(this.__events={}),t=t.split(r);i=t.shift();)o=n[i]||(n[i]=[]),o.push(e,s);return this},t.prototype.off=function(t,e,n){var i,o,f,u;if(!(i=this.__events))return this;if(!(t||e||n))return delete this.__events,this;for(t=t?t.split(r):s(i);o=t.shift();)if(f=i[o])if(e||n)for(u=f.length-2;u>=0;u-=2)e&&f[u]!==e||n&&f[u+1]!==n||f.splice(u,2);else delete i[o];return this},t.prototype.trigger=function(t){var s,n,i,o,f,u,a=[],h={status:!0};if(!(s=this.__events))return this;for(t=t.split(r),f=1,u=arguments.length;u>f;f++)a[f-1]=arguments[f];for(;n=t.shift();)(i=s.all)&&(i=i.slice()),(o=s[n])&&(o=o.slice()),e(o,a,this,h),e(i,[n].concat(a),this,h);return h.status},t.mixTo=function(e){e=e.prototype||e;var r=t.prototype;for(var s in r)r.hasOwnProperty(s)&&(e[s]=r[s])};var s=Object.keys;return s||(s=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e}),t});
define("arale/iframe-shim/1.0.1/iframe-shim",["$","arale/position/1.0.0/position"],function(e,t,i){function r(e){this.target=n(e).eq(0)}function o(){}function s(e){var t={display:"none",border:"none",opacity:0,position:"absolute"},i=e.css("zIndex");return i&&i>0&&(t.zIndex=i-1),n("<iframe>",{src:"javascript:''",frameborder:0,css:t}).insertBefore(e)}var n=e("$"),a=e("arale/position/1.0.0/position");r.prototype.sync=function(){var e=this.target,t=this.iframe;if(!e.length)return this;var i=e.outerHeight(),r=e.outerWidth();return i&&r&&!e.is(":hidden")?(t||(t=this.iframe=s(e)),t.css({height:i,width:r}),a.pin(t[0],e[0]),t.show()):t&&t.hide(),this},r.prototype.destroy=function(){this.iframe&&(this.iframe.remove(),delete this.iframe),delete this.target},n.browser.msie&&"6.0"===n.browser.version?i.exports=r:(o.prototype.sync=o,o.prototype.destroy=o,i.exports=o)});
define("arale/iframe-shim/1.0.2/iframe-shim",["$","arale/position/1.0.1/position"],function(e,t,i){function r(e){this.target=s(e).eq(0)}function o(){}function n(e){var t={display:"none",border:"none",opacity:0,position:"absolute"},i=e.css("zIndex");return i&&i>0&&(t.zIndex=i-1),s("<iframe>",{src:"javascript:''",frameborder:0,css:t}).insertBefore(e)}var s=e("$"),a=e("arale/position/1.0.1/position"),h=-1!==(window.navigator.userAgent||"").toLowerCase().indexOf("msie 6");r.prototype.sync=function(){var e=this.target,t=this.iframe;if(!e.length)return this;var i=e.outerHeight(),r=e.outerWidth();return i&&r&&!e.is(":hidden")?(t||(t=this.iframe=n(e)),t.css({height:i,width:r}),a.pin(t[0],e[0]),t.show()):t&&t.hide(),this},r.prototype.destroy=function(){this.iframe&&(this.iframe.remove(),delete this.iframe),delete this.target},h?i.exports=r:(o.prototype.sync=function(){return this},o.prototype.destroy=o,i.exports=o)});
define("arale/overlay/1.0.1/overlay",["$","arale/position/1.0.0/position","arale/iframe-shim/1.0.1/iframe-shim","arale/widget/1.0.3/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events"],function(a,b,c){function j(a){return d.contains(document.documentElement,a)}function k(a){d(h.blurOverlays).each(function(b,c){if(c&&c.get("visible")){for(var e=0;c._relativeElements.length>e;e++){var f=d(c._relativeElements[e])[0];if(f===a.target||d.contains(f,a.target))return}c.hide()}})}function l(a,b){for(var c=0;b.length>c;c++)if(a===b[c])return b.splice(c,1),b}var d=a("$"),e=a("arale/position/1.0.0/position"),f=a("arale/iframe-shim/1.0.1/iframe-shim"),g=a("arale/widget/1.0.3/widget"),h=g.extend({attrs:{width:"",height:"",zIndex:99,visible:!1,align:{selfXY:[0,0],baseElement:e.VIEWPORT,baseXY:[0,0]},parentNode:document.body},show:function(){return this.rendered||this.render(),this.set("visible",!0),this},hide:function(){return this.set("visible",!1),this},setup:function(){var a=this;this._setupShim(),this._setupResize(),this.after("show",function(){a._setPosition()})},destroy:function(){return l(this,h.allOverlays),l(this,h.blurOverlays),h.superclass.destroy.call(this)},_setPosition:function(a){if(j(this.element[0])){a||(a=this.get("align"));var b="none"===this.element.css("display");return b&&this.element.css({visibility:"hidden",display:"block"}),e.pin({element:this.element,x:a.selfXY[0],y:a.selfXY[1]},{element:a.baseElement,x:a.baseXY[0],y:a.baseXY[1]}),b&&this.element.css({visibility:"",display:"none"}),this}},_setupShim:function(){var a=new f(this.element);this.after("hide _setPosition",a.sync,a);var b=["width","height"];for(var c in b)b.hasOwnProperty(c)&&this.on("change:"+c,a.sync,a);this.before("destroy",a.destroy,a)},_setupResize:function(){h.allOverlays.push(this)},_blurHide:function(a){a=d.makeArray(a),a.push(this.element),this._relativeElements=a,h.blurOverlays.push(this)},_onRenderWidth:function(a){this.element.css("width",a)},_onRenderHeight:function(a){this.element.css("height",a)},_onRenderZIndex:function(a){this.element.css("zIndex",a)},_onRenderAlign:function(a){this._setPosition(a)},_onRenderVisible:function(a){this.element[a?"show":"hide"]()}});h.blurOverlays=[],d(document).on("click",function(a){k(a)});var i;h.allOverlays=[],d(window).resize(function(){i&&clearTimeout(i),i=setTimeout(function(){d(h.allOverlays).each(function(a,b){b&&b.get("visible")&&b._setPosition()})},80)}),c.exports=h});define("arale/overlay/1.1.0/overlay",["$","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.0/widget","arale/base/1.1.0/base","arale/class/1.1.0/class","arale/events/1.1.0/events"],function(e,t,i){function s(e){return l.contains(document.documentElement,e)}function n(e){l(u.blurOverlays).each(function(t,i){if(i&&i.get("visible")){for(var s=0;i._relativeElements.length>s;s++){var n=l(i._relativeElements[s])[0];if(n===e.target||l.contains(n,e.target))return}i.hide()}})}function r(e,t){for(var i=0;t.length>i;i++)if(e===t[i])return t.splice(i,1),t}var l=e("$"),a=e("arale/position/1.0.1/position"),o=e("arale/iframe-shim/1.0.2/iframe-shim"),h=e("arale/widget/1.1.0/widget"),u=h.extend({attrs:{width:"",height:"",zIndex:99,visible:!1,align:{selfXY:[0,0],baseElement:a.VIEWPORT,baseXY:[0,0]},parentNode:document.body},show:function(){return this.rendered||this.render(),this.set("visible",!0),this},hide:function(){return this.set("visible",!1),this},setup:function(){var e=this;this._setupShim(),this._setupResize(),this.after("show",function(){e._setPosition()})},destroy:function(){return r(this,u.allOverlays),r(this,u.blurOverlays),u.superclass.destroy.call(this)},_setPosition:function(e){if(s(this.element[0])&&(e||(e=this.get("align")),e)){var t="none"===this.element.css("display");return t&&this.element.css({visibility:"hidden",display:"block"}),a.pin({element:this.element,x:e.selfXY[0],y:e.selfXY[1]},{element:e.baseElement,x:e.baseXY[0],y:e.baseXY[1]}),t&&this.element.css({visibility:"",display:"none"}),this}},_setupShim:function(){var e=new o(this.element);this.after("hide _setPosition",e.sync,e);var t=["width","height"];for(var i in t)t.hasOwnProperty(i)&&this.on("change:"+i,e.sync,e);this.before("destroy",e.destroy,e)},_setupResize:function(){u.allOverlays.push(this)},_blurHide:function(e){e=l.makeArray(e),e.push(this.element),this._relativeElements=e,u.blurOverlays.push(this)},_onRenderWidth:function(e){this.element.css("width",e)},_onRenderHeight:function(e){this.element.css("height",e)},_onRenderZIndex:function(e){this.element.css("zIndex",e)},_onRenderAlign:function(e){this._setPosition(e)},_onRenderVisible:function(e){this.element[e?"show":"hide"]()}});u.blurOverlays=[],l(document).on("click",function(e){n(e)});var c;u.allOverlays=[],l(window).resize(function(){c&&clearTimeout(c),c=setTimeout(function(){l(u.allOverlays).each(function(e,t){t&&t.get("visible")&&t._setPosition()})},80)}),i.exports=u});
define("arale/placeholder/1.0.1/placeholder",["$"],function(e,t,a){var l,r=e("$"),n=function(e){function t(t){var a={},l=/^jQuery\d+$/;return e.each(t.attributes,function(e,t){t.specified&&!l.test(t.name)&&(a[t.name]=t.value)}),a}function a(t,a){var l=this,r=e(l);if((l.value==r.attr("placeholder")||""==l.value)&&r.hasClass("placeholder"))if(r.data("placeholder-password")){if(r=r.hide().next().show().attr("id",r.removeAttr("id").data("placeholder-id")),t===!0)return r[0].value=a;r.focus()}else l.value="",r.removeClass("placeholder"),l==document.activeElement&&l.select()}function l(){var l,r=this,n=e(r),o=this.id;if(""==e(r).val()){if("password"==r.type){if(!n.data("placeholder-textinput")){try{l=n.clone().attr({type:"text"})}catch(i){l=e("<input>").attr(e.extend(t(this),{type:"text"}))}l.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":o}).bind("focus.placeholder",a),n.data({"placeholder-textinput":l,"placeholder-id":o}).before(l)}n=n.removeAttr("id").hide().prev().attr("id",o).show()}n.addClass("placeholder"),n[0].value=n.attr("placeholder")}else n.removeClass("placeholder")}var r,n,o="placeholder"in document.createElement("input"),i="placeholder"in document.createElement("textarea"),c={},u=e.valHooks;if(o&&i)n=c.placeholder=function(){return this},n.input=n.textarea=!0;else{if(n=c.placeholder=function(){var e=this;return e.filter((o?"textarea":":input")+"[placeholder]").unbind({"focus.placeholder":a,"blur.placeholder":l}).bind({"focus.placeholder":a,"blur.placeholder":l}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},n.input=o,n.textarea=i,r={get:function(t){var a=e(t);return a.data("placeholder-enabled")&&a.hasClass("placeholder")?"":t.value},set:function(t,r){var n=e(t);return n.data("placeholder-enabled")?(""==r?(t.value=r,t!=document.activeElement&&l.call(t)):n.hasClass("placeholder")?a.call(t,!0,r)||(t.value=r):t.value=r,n):t.value=r}},!o){var d=u.input;u.input=d?{get:function(){return d.get&&d.get.apply(this,arguments),r.get.apply(this,arguments)},set:function(){return d.set&&d.set.apply(this,arguments),r.set.apply(this,arguments)}}:r}if(!i){var d=u.textarea;u.textarea=d?{get:function(){return d.get&&d.get.apply(this,arguments),r.get.apply(this,arguments)},set:function(){return d.set&&d.set.apply(this,arguments),r.set.apply(this,arguments)}}:r}e(function(){e(document).delegate("form","submit.placeholder",function(){var t=e(".placeholder",this).each(a);setTimeout(function(){t.each(l)},10)})}),e(window).bind("beforeunload.placeholder",function(){e(".placeholder").each(function(){this.value=""})})}return n}(r);l=n.input&&n.textarea?function(){}:function(e){e||(e=r("input, textarea")),e&&n.call(r(e))},l(),a.exports=l});
define("arale/popup/1.1.0/popup",["$","arale/overlay/1.1.0/overlay","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.0/widget","arale/base/1.1.0/base","arale/class/1.1.0/class","arale/events/1.1.0/events"],function(e,t,i){var s=e("$"),n=e("arale/overlay/1.1.0/overlay"),r=n.extend({attrs:{trigger:{value:null,getter:function(e){return s(e)}},triggerType:"hover",delegateNode:{value:null,getter:function(e){var t=s(e);return t.length||(t=this.get("trigger").parent()),t}},align:{value:{baseXY:[0,"100%"],selfXY:[0,0]},setter:function(e){return e?(e.baseElement?this._specifiedBaseElement=!0:this.activeTrigger&&(e.baseElement=this.activeTrigger),e):void 0},getter:function(e){return s.extend({},e,this._specifiedBaseElement?{}:{baseElement:this.activeTrigger})}},delay:70,disabled:!1,effect:"",duration:250},setup:function(){r.superclass.setup.call(this),this._bindTrigger(),this._blurHide(this.get("trigger")),this.activeTrigger=this.get("trigger").eq(0)},show:function(){return this.get("disabled")?void 0:r.superclass.show.call(this)},_bindTrigger:function(){var e=this.get("triggerType");"click"===e?this._bindClick():"focus"===e?this._bindFocus():this._bindHover()},_bindClick:function(){function e(e){t.get("disabled")||t.get("trigger").each(function(i,n){e==n?(n._active=!0,t.activeTrigger=s(n)):n._active=!1})}var t=this;this.delegateEvents(this.get("delegateNode"),"click "+this.get("trigger").selector,function(t){var i=t.currentTarget;"a"===i.tagName.toLowerCase()&&t.preventDefault(),i._active===!0?this.hide():(e(i),this.show())}),this.before("hide",function(){e()})},_bindFocus:function(){var e=this,t=this.get("trigger"),i=this.get("delegateNode");this.delegateEvents(i,"focus "+t.selector,function(e){this.activeTrigger=s(e.currentTarget),this.show()}),this.delegateEvents(i,"blur "+t.selector,function(){setTimeout(function(){!e._downOnElement&&e.hide(),e._downOnElement=!1},this.get("delay"))}),this.delegateEvents("mousedown",function(){this._downOnElement=!0})},_bindHover:function(){function e(){clearTimeout(t),t=null,this.get("visible")&&(i=setTimeout(function(){o.hide()},a))}var t,i,n=this.get("trigger"),r=this.get("delegateNode"),a=this.get("delay"),o=this;return 0>a?(this._bindTooltip(),void 0):(this.delegateEvents(r,"mouseenter "+n.selector,function(e){clearTimeout(i),i=null,this.activeTrigger=s(e.currentTarget),t=setTimeout(function(){o.show()},a)}),this.delegateEvents(r,"mouseleave "+n.selector,e),this.delegateEvents("mouseenter",function(){clearTimeout(i)}),this.delegateEvents("mouseleave",e),void 0)},_bindTooltip:function(){var e=this.get("trigger"),t=this.get("delegateNode");this.delegateEvents(t,"mouseenter "+e.selector,function(e){this.activeTrigger=s(e.currentTarget),this.show()}),this.delegateEvents(t,"mouseleave "+e.selector,function(){this.hide()})},_onRenderVisible:function(e){var t=-1!==this.get("effect").indexOf("fade"),i=-1!==this.get("effect").indexOf("slide"),s={};i&&(s.height=e?"show":"hide"),t&&(s.opacity=e?"show":"hide"),t||i?this.element.stop(!0,!0).animate(s,this.get("duration")).css({visibility:"visible"}):this.element[e?"show":"hide"]()}});i.exports=r});
define("arale/position/1.0.0/position",["$"],function(e,t){function u(e){e=h(e)||{},e.nodeType&&(e={element:e});var t=h(e.element)||r;if(t.nodeType!==1)throw new Error("posObject.element is invalid.");var n={element:t,x:e.x||0,y:e.y||0},o=t===r||t._id==="VIEWPORT";return n.offset=function(){return s?{left:0,top:0}:o?{left:i(document).scrollLeft(),top:i(document).scrollTop()}:i(t).offset()},n.size=function(){var e=o?i(window):i(t);return{width:e.outerWidth(),height:e.outerHeight()}},n}function a(e){e.x=f(e.x,e,"width"),e.y=f(e.y,e,"height")}function f(e,t,n){e+="",e=e.replace(/px/gi,""),/\D/.test(e)&&(e=e.replace(/(?:top|left)/gi,"0%").replace(/center/gi,"50%").replace(/(?:bottom|right)/gi,"100%")),e.indexOf("%")!==-1&&(e=e.replace(/(\d+(?:\.\d+)?)%/gi,function(e,r){return t.size()[n]*(r/100)}));if(/[+\-*\/]/.test(e))try{e=(new Function("return "+e))()}catch(r){throw new Error("Invalid position value: "+e)}return c(e)}function l(e){var t=e.offsetParent();t[0]===document.documentElement&&(t=i(document.body)),o&&t.css("zoom",1);var n=t[0]===document.body?{left:0,top:0}:t.offset();return n.top+=c(t.css("border-top-width")),n.left+=c(t.css("border-left-width")),n}function c(e){return parseFloat(e,10)||0}function h(e){return i(e)[0]}var n=t,r={_id:"VIEWPORT",nodeType:1},i=e("$"),s=!1,o=i.browser.msie&&i.browser.version==6;n.pin=function(e,t){e=u(e),t=u(t);var n=i(e.element);n.css("position")!=="fixed"||o?(n.css("position","absolute"),s=!1):s=!0,a(e),a(t);var r=l(n),f=t.offset(),c=f.top+t.y-e.y-r.top,h=f.left+t.x-e.x-r.left;n.css({left:h,top:c})},n.center=function(e,t){n.pin({element:e,x:"50%",y:"50%"},{element:t,x:"50%",y:"50%"})},n.VIEWPORT=r});define("arale/position/1.0.1/position",["$"],function(e,t){function n(e){e=f(e)||{},e.nodeType&&(e={element:e});var t=f(e.element)||u;if(1!==t.nodeType)throw Error("posObject.element is invalid.");var n={element:t,x:e.x||0,y:e.y||0},o=t===u||"VIEWPORT"===t._id;return n.offset=function(){return p?{left:0,top:0}:o?{left:d(document).scrollLeft(),top:d(document).scrollTop()}:l(d(t)[0])},n.size=function(){var e=o?d(window):d(t);return{width:e.outerWidth(),height:e.outerHeight()}},n}function o(e){e.x=i(e.x,e,"width"),e.y=i(e.y,e,"height")}function i(e,t,n){if(e+="",e=e.replace(/px/gi,""),/\D/.test(e)&&(e=e.replace(/(?:top|left)/gi,"0%").replace(/center/gi,"50%").replace(/(?:bottom|right)/gi,"100%")),-1!==e.indexOf("%")&&(e=e.replace(/(\d+(?:\.\d+)?)%/gi,function(e,o){return t.size()[n]*(o/100)})),/[+\-*\/]/.test(e))try{e=Function("return "+e)()}catch(o){throw Error("Invalid position value: "+e)}return c(e)}function r(e){var t=e.offsetParent();t[0]===document.documentElement&&(t=d(document.body)),m&&t.css("zoom",1);var n;return n=t[0]===document.body&&"static"===t.css("position")?{top:0,left:0}:l(t[0]),n.top+=c(t.css("border-top-width")),n.left+=c(t.css("border-left-width")),n}function c(e){return parseFloat(e,10)||0}function f(e){return d(e)[0]}function l(e){var t=e.getBoundingClientRect(),n=document.documentElement;return{left:t.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||document.body.clientLeft||0),top:t.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||document.body.clientTop||0)}}var s=t,u={_id:"VIEWPORT",nodeType:1},d=e("$"),p=!1,a=(window.navigator.userAgent||"").toLowerCase(),m=-1!==a.indexOf("msie 6");s.pin=function(e,t){e=n(e),t=n(t);var i=d(e.element);"fixed"!==i.css("position")||m?(i.css("position","absolute"),p=!1):p=!0,o(e),o(t);var c=r(i),f=t.offset(),l=f.top+t.y-e.y-c.top,s=f.left+t.x-e.x-c.left;i.css({left:s,top:l})},s.center=function(e,t){s.pin({element:e,x:"50%",y:"50%"},{element:t,x:"50%",y:"50%"})},s.VIEWPORT=u});
define("arale/select/0.9.3/select",["arale/overlay/1.0.1/overlay","$","arale/position/1.0.0/position","arale/iframe-shim/1.0.1/iframe-shim","arale/widget/1.0.3/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events","arale/widget/1.0.3/templatable","gallery/handlebars/1.0.0/handlebars","./select.tpl"],function(e,t,s){function i(e,t){var s,i=[],l=e.options,a=l.length,r=!1;for(s=0;a>s;s++){var n,c={},d=l[s],h=["text","value","defaultSelected","selected"];for(n in h){var o=h[n];c[o]=d[o]}c.defaultSelected=d.defaultSelected?"true":"false",d.selected?(c.selected="true",r=!0):c.selected="false",i.push(c)}return r||(newModel[0].selected="true"),{select:i,classPrefix:t}}function l(e,t){var s,i,l,a,r=[],n=[];for(s=0,l=e.length;l>s;s++){var c=e[s];c.selected?(c.selected=c.defaultSelected="true",n.push(s)):c.selected=c.defaultSelected="false",r.push(c)}if(n.length>0)for(n.pop(),i=0,a=n.length;a>i;i++)r[i].selected="false";else r[0].selected="true";return{select:r,classPrefix:t}}function a(e,t){var s;return s=n.isNumeric(e)?e:"string"==typeof e?t.index(t.parent().find(e)):t.index(e)}var r=e("arale/overlay/1.0.1/overlay"),n=e("$"),c=e("arale/widget/1.0.3/templatable"),d=e("./select.tpl"),h=r.extend({Implements:c,attrs:{trigger:{value:null,getter:function(e){return n(e).eq(0)}},classPrefix:"ui-select",template:d,align:{baseXY:[0,"100%-1px"]},name:"",value:"",length:0,selectedIndex:-1,multiple:!1,disabled:!1,selectSource:null},events:{"click [data-role=item]":function(e){var t=n(e.currentTarget);this.select(t)},"mouseenter [data-role=item]":function(e){n(e.currentTarget).addClass(this.get("classPrefix")+"-hover")},"mouseleave [data-role=item]":function(e){n(e.currentTarget).removeClass(this.get("classPrefix")+"-hover")}},initAttrs:function(e,t){h.superclass.initAttrs.call(this,e,t);var s=this.get("trigger");if("select"==s[0].tagName.toLowerCase()){var a=s.attr("name");a&&this.set("name",a),this.set("selectSource",s);var r='<a href="#" class="'+this.get("classPrefix")+'-trigger"></a>',c=n(r);this.set("trigger",c),s.after(c).hide(),this.model=i(s[0],this.get("classPrefix"))}else{var a=this.get("name");if(a){var d=n("input[name="+a+"]").eq(0);d[0]||(d=n('<input type="hidden" id="select-'+a+'" name="'+a+'" />').insertBefore(s)),this.set("selectSource",d)}this.model=l(this.model,this.get("classPrefix"))}},setup:function(){var e=this,t=this.get("trigger").on("click",{self:this},this._trigger_click).on("mouseenter",function(){t.addClass(e.get("classPrefix")+"-trigger-hover")}).on("mouseleave",function(){t.removeClass(e.get("classPrefix")+"-trigger-hover")});this.options=this.$("[data-role=content]").children(),this.select("[data-selected=true]"),this.set("length",this.options.length),this._tweakAlignDefaultValue(),this._blurHide(t),h.superclass.setup.call(this)},render:function(){return h.superclass.render.call(this),this._setTriggerWidth(),this},show:function(){return h.superclass.show.call(this),this._setPosition(),this},_setTriggerWidth:function(){var e=this.get("trigger"),t=this.element.outerWidth(),s=parseInt(e.css("padding-left"),10),i=parseInt(e.css("padding-right"),10),l=parseInt(e.css("border-left-width"),10),a=parseInt(e.css("border-right-width"),10);e.css("width",t-s-i-l-a)},_tweakAlignDefaultValue:function(){var e=this.get("align");"VIEWPORT"===e.baseElement._id&&(e.baseElement=this.get("trigger")),this.set("align",e)},_trigger_click:function(e){var t=e.data.self;e.preventDefault(),t.get("disabled")||t.show()},destroy:function(){this.element.remove(),h.superclass.destroy.call(this)},select:function(e){var t=a(e,this.options),s=this.get("selectedIndex");if(this.set("selectedIndex",t),s!==t){var i=this.options.eq(t);this.trigger("change",i)}return this.hide(),this},syncModel:function(e){this.model=l(e,this.get("classPrefix")),this.renderPartial("[data-role=content]"),this.options=this.$("[data-role=content]").children(),this.set("length",this.options.length),this.set("selectedIndex",-1),this.set("value","");var t=a("[data-selected=true]",this.options);return this.get("selectedIndex"),this.set("selectedIndex",t),this._setTriggerWidth(),this},getOption:function(e){var t=a(e,this.options);return this.options.eq(t)},addOption:function(e){var t=this.model.select;return t.push(e),this.syncModel(t),this},removeOption:function(e){var t=a(e,this.options),s=this.get("selectedIndex"),i=this.options.eq(t);return i.remove(),this.options=this.$("[data-role=content]").children(),this.set("length",this.options.length),t===s?this.set("selectedIndex",0):s>t&&this.set("selectedIndex",s-1),this},_onRenderSelectedIndex:function(e){if(-1!=e){var t=this.options.eq(e),s=this.currentItem,i=t.attr("data-value");if(!s||t[0]!=s[0]){var l=this.get("selectSource");l&&(l[0].value=i),s&&s.attr("data-selected","false").removeClass(this.get("classPrefix")+"-selected"),t.attr("data-selected","true").addClass(this.get("classPrefix")+"-selected"),this.set("value",i);var a=this.get("trigger"),r=a.find("[data-role=trigger-content]");r.length?r.html(t.html()):a.html(t.html()),this.currentItem=t}}},_onRenderDisabled:function(e){var t=this.get("classPrefix")+"-disabled",s=this.get("trigger");s[e?"addClass":"removeClass"](t);var i=this.options.eq(this.get("selectedIndex"));this.trigger("disabledChange",i,e)}});s.exports=h}),define("arale/select/0.9.3/select.tpl",[],'<div class="{{classPrefix}}">\n    <ul class="{{classPrefix}}-content" data-role="content">\n        {{#each select}}\n        <li data-role="item" class="{{../classPrefix}}-item" data-value="{{value}}" data-defaultSelected="{{defaultSelected}}" data-selected="{{selected}}">{{{text}}}</li>\n        {{/each}}\n    </ul>\n</div>\n');
define("arale/switchable/0.9.12/plugins/effects",["$"],function(a,b,c){var d=a("$"),e="scrollx",f="scrolly",g="fade";c.exports={isNeeded:function(){return"none"!==this.get("effect")},install:function(){var a=this.panels;a.show();var b=this.get("effect"),c=this.get("step");if(0===b.indexOf("scroll")){var f=this.content,i=a.eq(0);f.css("position","relative"),"static"===f.parent().css("position")&&f.parent().css("position","relative"),b===e&&(a.css("float","left"),f.width("9999px"));var j=this.get("viewSize");if(j[0]||(j[0]=i.outerWidth()*c,j[1]=i.outerHeight()*c,this.set("viewSize",j)),!j[0])throw new Error("Please specify viewSize manually")}else if(b===g){var k=this.get("activeIndex"),l=k*c,m=l+c-1;a.each(function(a,b){var c=a>=l&&m>=a;d(b).css({opacity:c?1:0,position:"absolute",zIndex:c?9:1})})}this._switchPanel=function(a){var b=this.get("effect"),c=d.isFunction(b)?b:h[b];c.call(this,a)}}};var h={fade:function(a){if(this.get("step")>1)throw new Error('Effect "fade" only supports step === 1');var b=a.fromPanels.eq(0),c=a.toPanels.eq(0),d=this.anim;if(d&&d.stop(!1,!0),c.css("opacity",1),b[0]){var e=this.get("duration"),f=this.get("easing"),g=this;this.anim=b.animate({opacity:0},e,f,function(){g.anim=null,c.css("zIndex",9),b.css("zIndex",1)})}else c.css("zIndex",9)},scroll:function(a){var b=this.get("effect")===e,c=this.get("viewSize")[b?0:1]*a.toIndex,d={};if(d[b?"left":"top"]=-c+"px",this.anim&&this.anim.stop(),a.fromIndex>-1){var f=this,g=this.get("duration"),h=this.get("easing");this.anim=this.content.animate(d,g,h,function(){f.anim=null})}else this.content.css(d)}};h[f]=h.scroll,h[e]=h.scroll,c.exports.Effects=h}),define("arale/switchable/0.9.12/plugins/autoplay",["$"],function(a,b,c){function e(a,b){function d(){d.stop(),c=setTimeout(a,b)}b=b||200;var c;return d.stop=function(){c&&(clearTimeout(c),c=0)},d}function g(a){var b=f.scrollTop(),c=b+f.height(),d=a.offset().top,e=d+a.height();return c>d&&e>b}var d=a("$");c.exports={attrs:{autoplay:!0,interval:5e3,pauseOnScroll:!0,pauseOnHover:!0},isNeeded:function(){return this.get("autoplay")},install:function(){function i(){j(),h.paused=!1,c=setInterval(function(){h.paused||h.next()},d)}function j(){c&&(clearInterval(c),c=null),h.paused=!0}var c,a=this.element,b="."+this.cid,d=this.get("interval"),h=this;i(),this.stop=j,this.start=i,this.get("pauseOnScroll")&&(this._scrollDetect=e(function(){h[g(a)?"start":"stop"]()}),f.on("scroll"+b,this._scrollDetect)),this.get("pauseOnHover")&&this.element.hover(j,i)},destroy:function(){var a="."+this.cid;this.stop(),this._scrollDetect&&(this._scrollDetect.stop(),f.off("scroll"+a))}};var f=d(window)}),define("arale/switchable/0.9.12/plugins/circular",["./effects","$"],function(a,b,c){function h(a,b,c){var e=this.get("step"),f=this.get("length"),g=a?f-1:0,h=g*e,i=(g+1)*e,j=a?c:-c*f,k=a?-c*f:c*f,l=d(this.panels.get().slice(h,i));return l.css("position","relative"),l.css(b,k+"px"),j}function i(a,b,c){var e=this.get("step"),f=this.get("length"),g=a?f-1:0,h=g*e,i=(g+1)*e,j=d(this.panels.get().slice(h,i));j.css("position",""),j.css(b,""),this.content.css(b,a?-c*(f-1):"")}var d=a("$"),e="scrollx",f="scrolly",g=a("./effects").Effects;c.exports={isNeeded:function(){var a=this.get("effect"),b=this.get("circular");return b&&(a===e||a===f)},install:function(){this.set("scrollType",this.get("effect")),this.set("effect","scrollCircular")}},g.scrollCircular=function(a){var b=a.toIndex,c=a.fromIndex,d=this.get("length"),f=this.get("_isNext"),g=0===c&&b===d-1&&!f,j=c===d-1&&0===b&&f,k=g||!j&&c>b,l=g||j,m=this.get("scrollType")===e,n=m?"left":"top",o=this.get("viewSize")[m?0:1],p=-o*b;this.anim&&this.anim.stop(!1,!0),l&&(p=h.call(this,k,n,o));var q={};if(q[n]=p+"px",c>-1){var r=this.get("duration"),s=this.get("easing"),t=this;this.anim=this.content.animate(q,r,s,function(){t.anim=null,l&&i.call(t,k,n,o)})}else this.content.css(q)}}),define("arale/switchable/0.9.12/plugins/multiple",[],function(a,b,c){c.exports={isNeeded:function(){return this.get("multiple")},methods:{switchTo:function(a){this._switchTo(a,a)},_switchTrigger:function(a){this.triggers.eq(a).toggleClass(this.get("activeTriggerClass"))},_triggerIsValid:function(){return!0},_switchPanel:function(a){a.toPanels.toggle()}}}}),define("arale/switchable/0.9.12/const",[],function(a,b,c){c.exports=function(a){return{UI_SWITCHABLE:a||"",NAV_CLASS:a?a+"-nav":"",CONTENT_CLASS:a?a+"-content":"",TRIGGER_CLASS:a?a+"-trigger":"",PANEL_CLASS:a?a+"-panel":"",ACTIVE_CLASS:a?a+"-active":"",PREV_BTN_CLASS:a?a+"-prev-btn":"",NEXT_BTN_CLASS:a?a+"-next-btn":"",DISABLED_BTN_CLASS:a?a+"-disabled-btn":""}}}),define("arale/switchable/0.9.12/switchable",["./plugins/effects","./plugins/autoplay","./plugins/circular","./plugins/multiple","./const","$","arale/easing/1.0.0/easing","arale/widget/1.0.3/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events"],function(a,b,c){function l(a,b,c){for(var e=d("<ul>"),f=0;a>f;f++){var g=f===b?c:"";d("<li>",{"class":g,html:f+1}).appendTo(e)}return e}var d=a("$");a("arale/easing/1.0.0/easing");var e=a("arale/widget/1.0.3/widget"),f="ui-switchable",g=a("./plugins/effects"),h=a("./plugins/autoplay"),i=a("./plugins/circular"),j=a("./plugins/multiple"),k=e.extend({attrs:{triggers:{value:[],getter:function(a){return d(a)}},panels:{value:[],getter:function(a){return d(a)}},classPrefix:f,hasTriggers:!0,triggerType:"hover",delay:100,effect:"none",easing:"linear",duration:500,activeIndex:0,step:1,length:{readOnly:!0,getter:function(){return this.panels.length/this.get("step")}},viewSize:[],activeTriggerClass:f+"-active"},setup:function(){this._initConstClass(),this._parseRole(),this._initElement(),this._initPanels(),this._initTriggers(),this._initPlugins()},_initConstClass:function(){var b=this.get("classPrefix");this.CONST=a("./const")(b)},_parseRole:function(a){if(a=a||this._getDatasetRole()){var b=this.get("triggers"),c=this.get("panels");0===b.length&&(a.trigger||a.nav)&&(b=a.trigger||a.nav.find("> *")),0===c.length&&(a.panel||a.content)&&(c=a.panel||a.content.find("> *")),this.set("triggers",b),this.set("panels",c)}},_getDatasetRole:function(a){var b=this.element,a=a||{},c=!1,e=["trigger","panel","nav","content"];return d.each(e,function(e,f){var g=d("[data-role="+f+"]",b);g.length&&(a[f]=g,c=!0)}),c?a:null},_initElement:function(){this.element.addClass(this.CONST.UI_SWITCHABLE)},_initPanels:function(){var a=this.panels=this.get("panels");if(0===a.length)throw new Error("panels.length is ZERO");this.content=a.parent().addClass(this.CONST.CONTENT_CLASS),a.addClass(this.CONST.PANEL_CLASS)},_initTriggers:function(){var a=this.triggers=this.get("triggers");0===a.length&&this.get("hasTriggers")?(this.nav=l(this.get("length"),this.get("activeIndex"),this.get("activeTriggerClass")).appendTo(this.element),this.triggers=this.nav.children()):this.nav=a.parent(),this.triggers.addClass(this.CONST.TRIGGER_CLASS),this.nav.addClass(this.CONST.NAV_CLASS),this.triggers.each(function(a,b){d(b).data("value",a)}),this._bindTriggers()},_initPlugins:function(){this._plugins=[],this._plug(g),this._plug(h),this._plug(i),this._plug(j)},_bindTriggers:function(){function b(b){a._onFocusTrigger(b.type,d(this).data("value"))}function c(){clearTimeout(a._switchTimer)}var a=this;"click"===this.get("triggerType")?this.triggers.click(b):this.triggers.hover(b,c)},_onFocusTrigger:function(a,b){var c=this;"click"===a?this.switchTo(b):this._switchTimer=setTimeout(function(){c.switchTo(b)},this.get("delay"))},switchTo:function(a){return this.set("activeIndex",a),this},_onRenderActiveIndex:function(a,b){this._triggerIsValid(a,b)&&this._switchTo(a,b)},_switchTo:function(a,b){this.trigger("switch",a,b),this._switchTrigger(a,b),this._switchPanel(this._getPanelInfo(a,b)),this.trigger("switched",a,b)},_triggerIsValid:function(a,b){return a!==b},_switchTrigger:function(a,b){var c=this.triggers;1>c.length||(c.eq(b).removeClass(this.get("activeTriggerClass")),c.eq(a).addClass(this.get("activeTriggerClass")))},_switchPanel:function(a){a.fromPanels.hide(),a.toPanels.show()},_getPanelInfo:function(a,b){var f,g,c=this.panels.get(),e=this.get("step");if(b>-1){var h=b*e,i=(b+1)*e;f=c.slice(h,i)}return g=c.slice(a*e,(a+1)*e),{toIndex:a,fromIndex:b,toPanels:d(g),fromPanels:d(f)}},prev:function(){var a=this.get("activeIndex"),b=(a-1+this.get("length"))%this.get("length");this.switchTo(b)},next:function(){var a=this.get("activeIndex"),b=(a+1)%this.get("length");this.switchTo(b)},_plug:function(a){if(a.isNeeded.call(this)){var b=a.attrs,c=a.methods;if(b)for(var d in b)!b.hasOwnProperty(d)||d in this.attrs||this.set(d,b[d]);if(c)for(var e in c)c.hasOwnProperty(e)&&(this[e]=c[e]);a.install&&a.install.call(this),this._plugins.push(a)}},destroy:function(){d.each(this._plugins,function(a,b){b.destroy&&b.destroy.call(this)}),k.superclass.destroy.call(this)}});c.exports=k});define("arale/tip/1.1.2/tip",["arale/popup/1.1.0/popup","$","arale/overlay/1.1.0/overlay","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.0/widget","arale/base/1.1.0/base","arale/class/1.1.0/class","arale/events/1.1.0/events"],function(e,t,a){var s=e("arale/popup/1.1.0/popup"),i=s.extend({attrs:{content:null,direction:"up",distance:8,arrowShift:22,pointPos:"50%"},_setAlign:function(){var e={},t=this.get("arrowShift"),a=this.get("distance"),s=this.get("pointPos"),i=this.get("direction");0>t&&(t="100%"+t),"up"===i?(e.baseXY=[s,0],e.selfXY=[t,"100%+"+a]):"down"===i?(e.baseXY=[s,"100%+"+a],e.selfXY=[t,0]):"left"===i?(e.baseXY=[0,s],e.selfXY=["100%+"+a,t]):"right"===i&&(e.baseXY=["100%+"+a,s],e.selfXY=[0,t]),this.set("align",e)},setup:function(){i.superclass.setup.call(this),this._setAlign()},_onRenderContent:function(e){var t=this.$('[data-role="content"]');"string"!=typeof e&&(e=e.call(this)),t&&t.html(e)}});a.exports=i});
define("arale/validator/0.9.2/validator",["./core","$","arale/widget/1.0.3/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events"],function(a,b,c){var d=a("./core"),f=(a("arale/widget/1.0.3/widget"),a("$")),g=d.extend({events:{"mouseenter .{{attrs.inputClass}}":"mouseenter","mouseleave .{{attrs.inputClass}}":"mouseleave","mouseenter .{{attrs.textareaClass}}":"mouseenter","mouseleave .{{attrs.textareaClass}}":"mouseleave","focus .{{attrs.itemClass}} input,textarea,select":"focus","blur .{{attrs.itemClass}} input,textarea,select":"blur"},attrs:{explainClass:"ui-form-explain",itemClass:"ui-form-item",itemHoverClass:"ui-form-item-hover",itemFocusClass:"ui-form-item-focus",itemErrorClass:"ui-form-item-error",inputClass:"ui-input",textareaClass:"ui-textarea",showMessage:function(a,b){this.getExplain(b).html(a),this.getItem(b).addClass(this.get("itemErrorClass"))},hideMessage:function(a,b){this.getExplain(b).html(b.attr("data-explain")||" "),this.getItem(b).removeClass(this.get("itemErrorClass"))}},setup:function(){g.superclass.setup.call(this);var a=this;this.on("autoFocus",function(b){a.set("autoFocusEle",b)})},addItem:function(a){g.superclass.addItem.apply(this,[].slice.call(arguments));var b=this.query(a.element);return b&&this._saveExplainMessage(b),this},_saveExplainMessage:function(a){var c=a.element,d=c.attr("data-explain");void 0===d&&c.attr("data-explain",this.getExplain(c).html())},getExplain:function(a){var b=this.getItem(a),c=b.find("."+this.get("explainClass"));if(0==c.length)var c=f('<div class="'+this.get("explainClass")+'"></div>').appendTo(b);return c},getItem:function(a){a=f(a);var b=a.parents("."+this.get("itemClass"));return b},mouseenter:function(a){this.getItem(a.target).addClass(this.get("itemHoverClass"))},mouseleave:function(a){this.getItem(a.target).removeClass(this.get("itemHoverClass"))},focus:function(a){var b=a.target,c=this.get("autoFocusEle");if(c&&c.get(0)==b){var d=this;return f(b).keyup(function(){d.set("autoFocusEle",null),d.focus({target:b})}),void 0}this.getItem(b).removeClass(this.get("itemErrorClass")),this.getItem(b).addClass(this.get("itemFocusClass")),this.getExplain(b).html(f(b).attr("data-explain"))},blur:function(a){this.getItem(a.target).removeClass(this.get("itemFocusClass"))}});c.exports=g});define("arale/widget/1.0.3/daparser",["$"],function(a,b){function g(a){return a.toLowerCase().replace(d,function(a,b){return(b+"").toUpperCase()})}function h(a){for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];if("string"!=typeof c)continue;e.test(c)?(c=c.replace(/'/g,'"'),a[b]=h(f(c))):a[b]=i(c)}return a}function i(a){if("false"===a.toLowerCase())a=!1;else if("true"===a.toLowerCase())a=!0;else if(/\d/.test(a)&&/[^a-z]/i.test(a)){var b=parseFloat(a);b+""===a&&(a=b)}return a}var c=a("$");b.parseElement=function(a,b){a=c(a)[0];var d={};if(a.dataset)d=c.extend({},a.dataset);else for(var e=a.attributes,f=0,i=e.length;i>f;f++){var j=e[f],k=j.name;0===k.indexOf("data-")&&(k=g(k.substring(5)),d[k]=j.value)}return b===!0?d:h(d)};var d=/-([a-z])/g,e=/^\s*[\[{].*[\]}]\s*$/,f=this.JSON?JSON.parse:c.parseJSON}),define("arale/widget/1.0.3/auto-render",["$"],function(a,b){var c=a("$"),d="data-widget-auto-rendered";b.autoRender=function(a){return new this(a).render()},b.autoRenderAll=function(a,e){"function"==typeof a&&(e=a,a=null),a=c(a||document.body);var f=[],g=[];a.find("[data-widget]").each(function(a,c){b.isDataApiOff(c)||(f.push(c.getAttribute("data-widget").toLowerCase()),g.push(c))}),f.length&&seajs.use(f,function(){for(var a=0;arguments.length>a;a++){var b=arguments[a],f=c(g[a]);f.attr(d)||(b.autoRender&&b.autoRender({element:f,renderType:"auto"}),f.attr(d,"true"))}e&&e()})};var e="off"===c(document.body).attr("data-api");b.isDataApiOff=function(a){var b=c(a).attr("data-api");return"off"===b||"on"!==b&&e}}),define("arale/widget/1.0.3/widget",["./daparser","./auto-render","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events","$"],function(a,b,c){function o(){return"widget-"+n++}function p(a){return"[object String]"===m.call(a)}function q(a){return"[object Function]"===m.call(a)}function r(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function t(a){return s(document.documentElement,a)}function u(a){return a.charAt(0).toUpperCase()+a.substring(1)}function y(a){return q(a.events)&&(a.events=a.events()),a.events}function z(a,b){var c=a.match(v),d=c[1]+h+b.cid,e=c[2]||void 0;return e&&e.indexOf("{{")>-1&&(e=A(e,b)),{type:d,selector:e}}function A(a,b){return a.replace(w,function(a,c){for(var f,d=c.split("."),e=b;f=d.shift();)e=e===b.attrs?b.get(f):e[f];return p(e)?e:x})}function B(a){return null==a||(p(a)||e.isArray(a))&&0===a.length||e.isPlainObject(a)&&r(a)}var d=a("arale/base/1.0.1/base"),e=a("$"),f=a("./daparser"),g=a("./auto-render"),h=".delegate-events-",i="_onRender",j="data-widget-cid",k={},l=d.extend({propsInAttrs:["element","template","model","events"],element:null,template:"<div></div>",model:null,events:null,attrs:{id:"",className:"",style:{},parentNode:document.body},initialize:function(a){this.cid=o();var b=this._parseDataAttrsConfig(a);this.initAttrs(a,b),this.parseElement(),this.initProps(),this.delegateEvents(),this.setup(),this._stamp()},_parseDataAttrsConfig:function(a){var b,c;return a&&(b=e(a.element)),b&&b[0]&&!g.isDataApiOff(b)&&(c=f.parseElement(b)),c},parseElement:function(){var a=this.element;if(a?this.element=e(a):this.get("template")&&this.parseElementFromTemplate(),!this.element||!this.element[0])throw new Error("element is invalid")},parseElementFromTemplate:function(){this.element=e(this.get("template"))},initProps:function(){},delegateEvents:function(a,b){if(a||(a=y(this)),a){if(p(a)&&q(b)){var c={};c[a]=b,a=c}for(var d in a)if(a.hasOwnProperty(d)){var e=z(d,this),f=e.type,g=e.selector;(function(a,b){var c=function(c){q(a)?a.call(b,c):b[a](c)};g?b.element.on(f,g,c):b.element.on(f,c)})(a[d],this)}return this}},undelegateEvents:function(a){var b={};return 0===arguments.length?b.type=h+this.cid:b=z(a,this),this.element.off(b.type,b.selector),this},setup:function(){},render:function(){this.rendered||(this._renderAndBindAttrs(),this.rendered=!0);var a=this.get("parentNode");return a&&!t(this.element[0])&&this.element.appendTo(a),this},_renderAndBindAttrs:function(){var a=this,b=a.attrs;for(var c in b)if(b.hasOwnProperty(c)){var d=i+u(c);if(this[d]){var e=this.get(c);B(e)||this[d](e,void 0,c),function(b){a.on("change:"+c,function(c,d,e){a[b](c,d,e)})}(d)}}},_onRenderId:function(a){this.element.attr("id",a)},_onRenderClassName:function(a){this.element.addClass(a)},_onRenderStyle:function(a){this.element.css(a)},_stamp:function(){var a=this.cid;this.element.attr(j,a),k[a]=this},$:function(a){return this.element.find(a)},destroy:function(){this.undelegateEvents(),delete k[this.cid],this.element&&(this.element.off(),this.element=null),l.superclass.destroy.call(this)}});e(window).unload(function(){for(var a in k)k[a].destroy()}),l.query=function(a){var c,b=e(a).eq(0);return b&&(c=b.attr(j)),k[c]},l.autoRender=g.autoRender,l.autoRenderAll=g.autoRenderAll,l.StaticsWhiteList=["autoRender"],c.exports=l;var m=Object.prototype.toString,n=0,s=e.contains||function(a,b){return!!(16&a.compareDocumentPosition(b))},v=/^(\S+)\s*(.*)$/,w=/{{([^}]+)}}/g,x="INVALID_SELECTOR"});define("arale/widget/1.1.0/widget",["arale/base/1.1.0/base","arale/class/1.1.0/class","arale/events/1.1.0/events","$","./daparser","./auto-render"],function(e,t,n){function r(){return"widget-"+A++}function i(e){return"[object String]"===y.call(e)}function a(e){return"[object Function]"===y.call(e)}function s(e){return b(document.documentElement,e)}function o(e){return e.charAt(0).toUpperCase()+e.substring(1)}function l(e){return a(e.events)&&(e.events=e.events()),e.events}function u(e,t){var n=e.match(O),r=n[1]+v+t.cid,i=n[2]||void 0;return i&&i.indexOf("{{")>-1&&(i=d(i,t)),{type:r,selector:i}}function d(e,t){return e.replace(R,function(e,n){for(var r,a=n.split("."),s=t;r=a.shift();)s=s===t.attrs?t.get(r):s[r];return i(s)?s:C})}function f(e){return null==e||void 0===e}var h=e("arale/base/1.1.0/base"),c=e("$"),m=e("./daparser"),p=e("./auto-render"),v=".delegate-events-",g="_onRender",E="data-widget-cid",w={},_=h.extend({propsInAttrs:["initElement","element","events"],element:null,events:null,attrs:{id:null,className:null,style:null,template:"<div></div>",model:null,parentNode:document.body},initialize:function(e){this.cid=r();var t=this._parseDataAttrsConfig(e);_.superclass.initialize.call(this,e?c.extend(t,e):t),this.parseElement(),this.initProps(),this.delegateEvents(),this.setup(),this._stamp(),this._isTemplate=!(e&&e.element)},_parseDataAttrsConfig:function(e){var t,n;return e&&(t=e.initElement?c(e.initElement):c(e.element)),t&&t[0]&&!p.isDataApiOff(t)&&(n=m.parseElement(t)),n},parseElement:function(){var e=this.element;if(e?this.element=c(e):this.get("template")&&this.parseElementFromTemplate(),!this.element||!this.element[0])throw Error("element is invalid")},parseElementFromTemplate:function(){this.element=c(this.get("template"))},initProps:function(){},delegateEvents:function(e,t,n){if(0===arguments.length?(t=l(this),e=this.element):1===arguments.length?(t=e,e=this.element):2===arguments.length?(n=t,t=e,e=this.element):(e||(e=this.element),this._delegateElements||(this._delegateElements=[]),this._delegateElements.push(c(e))),i(t)&&a(n)){var r={};r[t]=n,t=r}for(var s in t)if(t.hasOwnProperty(s)){var o=u(s,this),d=o.type,f=o.selector;(function(t,n){var r=function(e){a(t)?t.call(n,e):n[t](e)};f?c(e).on(d,f,r):c(e).on(d,r)})(t[s],this)}return this},undelegateEvents:function(e,t){if(t||(t=e,e=null),0===arguments.length){var n=v+this.cid;if(this.element&&this.element.off(n),this._delegateElements)for(var r in this._delegateElements)this._delegateElements.hasOwnProperty(r)&&this._delegateElements[r].off(n)}else{var i=u(t,this);e?c(e).off(i.type,i.selector):this.element&&this.element.off(i.type,i.selector)}return this},setup:function(){},render:function(){this.rendered||(this._renderAndBindAttrs(),this.rendered=!0);var e=this.get("parentNode");if(e&&!s(this.element[0])){var t=this.constructor.outerBoxClass;if(t){var n=this._outerBox=c("<div></div>").addClass(t);n.append(this.element).appendTo(e)}else this.element.appendTo(e)}return this},_renderAndBindAttrs:function(){var e=this,t=e.attrs;for(var n in t)if(t.hasOwnProperty(n)){var r=g+o(n);if(this[r]){var i=this.get(n);f(i)||this[r](i,void 0,n),function(t){e.on("change:"+n,function(n,r,i){e[t](n,r,i)})}(r)}}},_onRenderId:function(e){this.element.attr("id",e)},_onRenderClassName:function(e){this.element.addClass(e)},_onRenderStyle:function(e){this.element.css(e)},_stamp:function(){var e=this.cid;(this.initElement||this.element).attr(E,e),w[e]=this},$:function(e){return this.element.find(e)},destroy:function(){this.undelegateEvents(),delete w[this.cid],this.element&&(this.element.off(),this._isTemplate&&(this._outerBox||this.element).remove(),this.element=null),_.superclass.destroy.call(this)}});c(window).unload(function(){for(var e in w)w[e].destroy()}),_.query=function(e){var t,n=c(e).eq(0);return n&&(t=n.attr(E)),w[t]},_.autoRender=p.autoRender,_.autoRenderAll=p.autoRenderAll,_.StaticsWhiteList=["autoRender"],n.exports=_;var y=Object.prototype.toString,A=0,b=c.contains||function(e,t){return!!(16&e.compareDocumentPosition(t))},O=/^(\S+)\s*(.*)$/,R=/{{([^}]+)}}/g,C="INVALID_SELECTOR"}),define("arale/widget/1.1.0/daparser",["$"],function(e,t){function n(e){return e.toLowerCase().replace(s,function(e,t){return(t+"").toUpperCase()})}function r(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if("string"!=typeof n)continue;o.test(n)?(n=n.replace(/'/g,'"'),e[t]=r(l(n))):e[t]=i(n)}return e}function i(e){if("false"===e.toLowerCase())e=!1;else if("true"===e.toLowerCase())e=!0;else if(/\d/.test(e)&&/[^a-z]/i.test(e)){var t=parseFloat(e);t+""===e&&(e=t)}return e}var a=e("$");t.parseElement=function(e,t){e=a(e)[0];var i={};if(e.dataset)i=a.extend({},e.dataset);else for(var s=e.attributes,o=0,l=s.length;l>o;o++){var u=s[o],d=u.name;0===d.indexOf("data-")&&(d=n(d.substring(5)),i[d]=u.value)}return t===!0?i:r(i)};var s=/-([a-z])/g,o=/^\s*[\[{].*[\]}]\s*$/,l=this.JSON?JSON.parse:a.parseJSON}),define("arale/widget/1.1.0/auto-render",["$"],function(e,t){var n=e("$"),r="data-widget-auto-rendered";t.autoRender=function(e){return new this(e).render()},t.autoRenderAll=function(e,i){"function"==typeof e&&(i=e,e=null),e=n(e||document.body);var a=[],s=[];e.find("[data-widget]").each(function(e,n){t.isDataApiOff(n)||(a.push(n.getAttribute("data-widget").toLowerCase()),s.push(n))}),a.length&&seajs.use(a,function(){for(var e=0;arguments.length>e;e++){var t=arguments[e],a=n(s[e]);if(!a.attr(r)){var o={initElement:a,renderType:"auto"},l=a.attr("data-widget-role");o[l?l:"element"]=a,t.autoRender&&t.autoRender(o),a.attr(r,"true")}}i&&i()})};var i="off"===n(document.body).attr("data-api");t.isDataApiOff=function(e){var t=n(e).attr("data-api");return"off"===t||"on"!==t&&i}});
