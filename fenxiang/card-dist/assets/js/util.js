/**
 * 纷享资源脚本
 * @Author: 纷享网页前端部
 * @Date: 2014-11-03
 */
define("jslibs/util",["overlay","mask","events","confirmbox","widget","dialog","select","placeholder","store","assets/html/helper.html","json","moment","$"],function(a,b,c){var d=a("overlay"),e=a("mask"),f=a("events"),g=a("confirmbox"),h=a("widget"),i=a("dialog"),j=a("select"),k=a("placeholder"),l=a("store"),m=a("assets/html/helper.html"),n=a("json"),o=a("moment"),p=a("store"),q=a("$"),r=window,s=r.FS,t=s.tpl,u=t.store,v={},w=q(m);v.noAuthCount=0;var x=PUBLISH_MODEL||"product";_.extend(v,{ajax:function(){var a,b=[];return function(c,f){var g,h,i;return c=q.extend({timeout:35e3},c||{}),f=q.extend({mask:!1,maskCls:"",loadingType:0,keepMask:!1,errorAlertModel:"2",abortLast:!1,authorizedJump:!0},f||{}),f.abortLast&&_.each(b,function(a){a.requestPath==c.url&&a.xhr.abort()}),f.mask&&(f.mask===!0?(a?a.show():(a=e,a.show()),f.maskCls&&a.element.addClass(f.maskCls)):(h=q(f.mask),h&&h.is(":visible")&&(g=new d({template:'<div class="fs-ajax-part-mask"></div>',width:h.outerWidth(),height:h.outerHeight(),zIndex:1e4,style:"border:1px solid red;color:green;",align:{selfXY:[0,0],baseElement:h,baseXY:[0,0]}}).show(),f.maskCls&&g.element.addClass(f.maskCls))),_.some(b,function(a){return a.requestPath==c.url&&a.mask===f.mask?!0:void 0}))?void 0:(f.loadingType>0&&v.showGlobalLoading(f.loadingType),i=q.ajax(c),i.always(function(d,e){var h,j=!1;_.each(b,function(a,b){a.globalMask&&"pending"==a.xhr.state()&&(j=!0),a.xhr===i&&(h=b)}),f.keepMask&&(j=!0),f.mask!==!0||j||(a.hide(),f.maskCls&&a.element.removeClass(f.maskCls)),"number"==typeof h&&b.splice(h,1),f.keepMask||g&&g.element.remove()&&g.destroy(),f.loadingType>0&&v.hideGlobalLoading(f.loadingType),v.ajaxCallback(i,c,f,e)}),b.push({xhr:i,requestPath:c.url,globalMask:f.mask===!0,mask:f.mask}),i)}}(),api:function(a,b){var c=0;return a.type&&"get"==a.type.toLowerCase()?(a.netErrorRetry=function(d){5>c?(c++,setTimeout(function(){b||(b={}),b.autoPrependPath=!1,a.netErrorCount=c,v.api_once(a,b)},5e3)):d&&d()},v.api_once(a,b)):v.api_once(a,b)},api_once:function(a,b){var c,d,e,f,g,h,i,j;return b=q.extend({submitSelector:!1,autoPrependPath:!0},b||{}),b.submitSelector&&(i=q(b.submitSelector),j=i.html()),a=a||{},a.url?(b.autoPrependPath&&(a.url=s.API_PATH+a.url),d=a.apiCb||s.EMPTY_FN,e=a.success||s.EMPTY_FN,f=a.error||s.EMPTY_FN,g=a.complete||s.EMPTY_FN,a=_.extend({cache:!1,type:"post",dataType:"json",contentType:"application/json; charset=utf-8"},a,{success:function(a,b,c){return e.apply(this,[a,b,c])},error:function(){return f.apply(this,arguments)},complete:function(){return i&&i.removeClass("state-requesting").removeAttr("style").html(j),g.apply(this,arguments)}}),h=a.data,"post"==a.type&&h&&(a.data=n.stringify(h)),i?i.hasClass("state-requesting")||(i.addClass("state-requesting").width(i.width()+35).html('<span class="icon-requesting"><img src="'+s.BLANK_IMG+'" alt="loading" />&nbsp;&nbsp;</span>'+j+"中"),c=v.ajax(a,b)):c=v.ajax(a,b),c):!1},getResponseData:function(a,b){var c;return c=200==a.status?"json"==b.dataType?n.parse(a.responseText):{success:!0,message:"success",value:a.responseText}:{success:!1,errorStatus:a.status,message:a.statusText}},_hasMaintainingPrompt:!1,ajaxCallback:function(a,b,c,d){var e=v.getResponseData(a,b);if(v.hideGlobalError(),e.success){if(v.noAuthCount=0,e.value&&e.value.version&&e.value.version!=s.getAppStore("contactData").version)return v.showUpgradeTip(),void 0;if(v.hideGlobalError(),e.maintainingPrompt&&e.maintainingPrompt.length>0)if(v._hasMaintainingPrompt){if(e.maintainingPrompt==v._hasMaintainingPrompt)return;v.alert(e.maintainingPrompt,function(){v._hasMaintainingPrompt=!1}),v._hasMaintainingPrompt=e.maintainingPrompt}else v.alert(e.maintainingPrompt,function(){v._hasMaintainingPrompt=!1}),v._hasMaintainingPrompt=e.maintainingPrompt}else{if(b.netErrorRetry&&(!b.netErrorCount||b.netErrorCount&&b.netErrorCount<5)&&"timeout"==d)return a.abort(),b.netErrorRetry&&b.netErrorRetry(),!1;if(e.isAuthorized===!1&&c.authorizedJump&&(v.noAuthCount++,v.noAuthCount>3))return location.href=s.BASE_PATH+"/login.aspx?auto=1",!1;if(_.isUndefined(e.errorStatus)){if(-1==e.statusCode){v.showGlobalError("服务器连接异常，请确定您的网络连接状况");try{p.set("xhrerror",a.status+"---"+a.statusText+"---"+b.url)}catch(f){}return}if(c.errorAlertModel>1&&e.message&&e.message.length>0){var g=e.message.split("\r\n"),h=g.join("<br/>");v.alert((b&&b.errorMsgTitle||"")+h,function(){b.alertmsgcb&&b.alertmsgcb()})}}else if(0!=e.errorStatus){v.showGlobalError("服务器连接异常，请确定您的网络连接状况。");try{p.set("xhrerror",a.status+"---"+a.statusText+"---"+b.url)}catch(f){}}if(e.maintainingPrompt&&e.maintainingPrompt.length>0)if(v._hasMaintainingPrompt){if(e.maintainingPrompt==v._hasMaintainingPrompt)return;v.alert(e.maintainingPrompt,function(){v._hasMaintainingPrompt=!1}),v._hasMaintainingPrompt=e.maintainingPrompt}else v.alert(e.maintainingPrompt,function(){v._hasMaintainingPrompt=!1}),v._hasMaintainingPrompt=e.maintainingPrompt}},showGlobalError:function(a){var b=q("#fs-service-error");0==b.length&&(b=q('<div id="fs-service-error"></div>'),b.html('<div class="error-message"></div><span class="close-btn">×</span>'),b.appendTo("body"),b.on("click",".close-btn",function(){b.hide()})),q(".error-message",b).html(a),b.css({"margin-left":-(b.width()/2)+"px"}).show()},showUpgradeTip:function(){if(!window.store.get("upgradetipshown")){var a=q("#fs-upgrade-tip");0==a.length&&(a=q('<div id="fs-upgrade-tip"></div>'),a.html('<img src="'+s.ASSETS_PATH+"/images/upgrade.gif"+'"><span class="error-message">网页版已更新，建议您保存当前工作内容并刷新页面。</span><a class="btn-refresh" onclick="return false;" href="#">立即刷新</a><span class="close-btn">×</span>'),a.appendTo("body"),a.on("click",".close-btn",function(){a.hide()}).on("click",".btn-refresh",function(){window.location.reload()})),a.css({"margin-left":-(a.width()/2)+"px"}).show().animate({top:0},{duration:300}),window.store.set("upgradetipshown",1)}},hideGlobalError:function(){var a=q("#fs-service-error");a.hide()},getTplStore:function(a,b){return u[a]?u[a][b]:s.UNDEFINED},setTplStore:function(a,b){return u[a]=u[a]||{},_.extend(u[a],b)},clearTplStore:function(a,b){var c=u[a]||{};b?(c[b]=null,u[a]=c):u[a]=null},tplRouterReg:function(){var b,c=t.list,d=0,e=Backbone.Router.extend({routes:{"":"blank"},blank:function(){n("blank/blank.html","blank")}}),g=new e;t.navRouter=g,t.event=new f;var j=function(a){k(q("input,textarea",a))},l=function(a){v.clearTplStore(a)},m=function(a,b,c){var d=q(b),e=d.attr("tpltitle")||s.pageTitle;t.event.trigger("switch",a,d),d.addClass("fs-tpl-active").show(),document.title=e,i.hideAll(":not(.fixed-in-tpl-switch)"),q(".ui-select").each(function(){h.query(this).hide()}),q(r).resize(),q(r).scrollTop(0).trigger("scroll"),t.event.trigger("switched",a,d);var f=v.getTplQueryParams(),g=f&&f.datalighted||d.attr("data-lighted"),j=v.getNavRouterContants();q("#sub-tpl");var k=q(".hd-app-inner"),l=q(".hd-crm-inner"),m=q(".hd-apps-inner"),n=q(".app-top-nav-l"),o=q(".apps-top-nav-l"),p=q(".crm-top-nav-l");if(g&&2==g.split("|").length){var u=g.split("|"),w=u[0],x=u[1],y=u[1];if(w.indexOf("crm")>-1)k.hide(),l.show(),n.removeClass("tnavon state-active"),p.addClass("tnavon state-active"),m.hide(),o.removeClass("tnavon state-active");else if(w.indexOf(!1)){k.hide(),l.hide(),n.removeClass("tnavon state-active"),p.removeClass("tnavon state-active"),m.show(),o.addClass("tnavon state-active");var z=q.inArray(y,j.app);0>z&&(z=0),m.find(".tpl-nav-l").removeClass("tnavon state-active"),m.find(".tpl-nav-l").eq(z).addClass("tnavon state-active")}else l.hide(),k.show(),p.removeClass("tnavon state-active"),n.addClass("tnavon state-active"),m.hide(),o.removeClass("tnavon state-active");for(var A=0,B=j.crm.length;B>A;A++)j.crm[A]==x&&(k.hide(),l.show(),l.find(".tpl-nav-l").removeClass("tnavon state-active"),A>5?l.find(".tpl-nav-l").eq(6).addClass("tnavon state-active"):l.find(".tpl-nav-l").eq(A).addClass("tnavon state-active"));for(var A=0,B=j.oa.length;B>A;A++)j.oa[A]==x&&(l.hide(),k.show(),k.find(".tpl-nav-l").removeClass("tnavon state-active"),k.find(".tpl-nav-l").eq(A).addClass("tnavon state-active"));for(var A=0,B=j.app.length;B>A;A++)j.app[A]==y&&(l.hide(),k.hide(),m.show(),l.find(".tpl-nav-l").removeClass("tnavon state-active"),k.find(".tpl-nav-l").removeClass("tnavon state-active"),m.find(".tpl-nav-l").eq(A).addClass("tnavon state-active"),n.removeClass("tnavon state-active"),o.addClass("tnavon state-active"))}else l.hide(),k.show(),m.hide(),p.removeClass("tnavon state-active"),o.removeClass("tnavon state-active"),n.addClass("tnavon state-active");var C=c.split("/")[0];if(j.crm[C]){var D=j.crm[C];if(k&&k.hide(),l&&l.show(),l&&l.find(".tpl-nav-l").removeClass("tnavon state-active"),v.isCrmAdmin()){if(D.index>7){var E=q('<a href="'+D.href+'" id="'+D.tip+'" class="tpl-nav-l" >'+D.text+"</a>");q(".more-nav-link").prev().empty().append(E),q(".more-nav-list").find("#"+D.tip).addClass("state-selected"),0==q(".more-nav-list").find("#tip-crmsetting").length&&q(".more-nav-list").append(q('<li class="more-nav-item"><a href="#crmsettings/leaderssetting" id="tip-crmsetting" class="tpl-nav-l setting" >设置</a></li>'))}}else if(D.index>=8){var E=q('<a href="'+D.href+'" id="'+D.tip+'" class="tpl-nav-l" >'+D.text+"</a>");q(".more-nav-link").prev().show().empty().append(E),q(".more-nav-list").find("#"+D.tip).addClass("state-selected")}D.index>=7?l&&l.find(".tpl-nav-l").eq(6).addClass("tnavon state-active"):l&&l.find(".tpl-nav-l").eq(D.index-1).addClass("tnavon state-active")}},n=function(e,f){var g=s.version.split("."),h=q("#sub-tpl"),i=q(".sub-tpl-switch-mask",h),k=t.event;return b&&b.abort(),k.trigger("beforeswitch",f)?(0==i.length&&(i=q('<div class="sub-tpl-switch-mask"></div>'),i.css({position:"absolute",top:0,left:0,width:"100%",height:"100%","z-index":20}).hide().appendTo(h)),_.each(c,function(a,b){var c=a.el,d=a.isCached;if(d)c.removeClass("fs-tpl-active").hide();else{if(!k.trigger("beforeremove",b,c))return;c&&c.off()&&c.removeData()&&c.remove(),l(b),a.el=null,k.trigger("afterremove",b,c)}}),i.show(),d++,c[f]&&c[f].isCached?(m(f,c[f].el,e),i.hide(),void 0):(b=v.ajax({url:s.TPL_PATH+"/"+e+"?"+g[0]+"-"+g[3],type:"get",dataType:"html",success:function(b){var g,k=q(b),l=k.attr("tplname"),n=k.attr("js"),o=k.attr("css"),p=k.attr("iscached");k.attr("data-lighted");var r=d,s=(c[l]?c[l].el:null,[]);_.each(c,function(a){a.el&&a.el.removeClass("fs-tpl-active").hide()}),c[l]={el:k,isCached:!1},"true"===p&&(c[l].isCached=!0),k.appendTo(h);var t=v.getNavRouterContants().crm,u=t[f.split("-")[0]]&&t[f.split("-")[0]].href;if(u&&u.substring(1)==f.replace("-","/"))for(var w in t)if(t.hasOwnProperty(w)&&t[w].href!=u){var y=t[w].href.substr(1).replace("/","-");c[y]&&c[y].el&&c[y].el.remove(),delete c[y]}j(k,l),g=l.split("-"),(_.isUndefined(n)||"true"===n)&&(n="tpls/"+g.join("/")+"/"+g[g.length-1]+".js"),(_.isUndefined(o)||"true"===o)&&(o="tpls/"+g.join("/")+"/"+g[g.length-1]+".css"),"false"!==o&&s.push(o),"false"!==n&&s.push(n),s.length>0?a.async(s,function(a,b){if(_.isUndefined(b)&&(b=a),b.tplName=l,b.tplEl=k,"development"==x)b.init();else try{b.init()}catch(c){}r==d&&(m(l,k,e),i.hide())}):(m(l,k,e),i.hide())}}),void 0)):!1};return function(a,b){var c;c="#"==a.slice(0,1)?q('<a href="'+a+'"></a>'):q(a),c.each(function(){var a,c,d,e,f=q(this),h=f.attr("href"),i="#",j=f.attr("navname");b&&(e="true"),h=h.toLowerCase(),f.attr("href",h),h=h.slice(h.indexOf("#")+1),d=f.attr("router"),c=(d?d.slice(1):"")||h,-1!==h.indexOf("/=/")&&(h=h.slice(0,h.indexOf("/=/"))),a=h.split("/"),_.isUndefined(j)?j=a.join("-"):(j=j.toLowerCase(),f.attr("navname",j)),a[a.length]=a[a.length-1]+".html",i=a.join("/"),g.route(c,j,function(){n(i,j,e)})})}}(),asyncOrder:function(b,c){var d=0,e=[];b=[].concat(b);var f=function(){a.async(b[d],function(a){d==b.length-1?c(e):(d++,f()),e.push(a)})};f()},alert:function(a,b,c){var d,e;switch(c=_.extend({className:"fs-alert",title:" ",closeTpl:"×",content:w.filter(".fs-show").html(),zIndex:2e3,hasMask:!0,width:380,messageType:""},c||{}),c.messageType){case"info":d='<img class="icon-info icon-flag" src="'+s.BLANK_IMG+'" />',e="fs-alert-info-wrapper";break;case"success":d='<img class="icon-success icon-flag" src="'+s.BLANK_IMG+'" />',e="fs-alert-success-wrapper";break;case"failed":d='<img class="icon-failed icon-flag" src="'+s.BLANK_IMG+'" />',e="fs-alert-success-wrapper";break;default:d=""}g.alert('<div class="'+e+' fn-clear">'+d+'<span class="message-content">'+a+"</span></div>",b,c)},confirm:function(a,b,c,d){b||(b=" ");var e,f;switch(d=_.extend({className:"fs-confirm",closeTpl:"×",content:w.filter(".fs-show").html(),zIndex:2e3,hasMask:!0,messageType:"info"},d||{}),d.messageType){case"info":e='<img class="icon-info icon-flag" src="'+s.BLANK_IMG+'" />',f="fs-confirm-info-wrapper";break;case"success":e='<img class="icon-success icon-flag" src="'+s.BLANK_IMG+'" />',f="fs-confirm-success-wrapper";break;case"failed":e='<img class="icon-failed icon-flag" src="'+s.BLANK_IMG+'" />',f="fs-confirm-failed-wrapper";break;case"question":e='<img class="icon-question icon-flag" src="'+s.BLANK_IMG+'" />',f="fs-confirm-question-wrapper";break;default:e=""}g.confirm('<div class="'+f+' fn-clear">'+e+'<span class="message-content">'+a+"</span></div>",b,c,d)},digitUppercase:function(a){var b=["角","分"],c=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],d=[["元","万","亿"],["","拾","佰","仟"]],e=0>a?"欠":"";a=Math.abs(a);var f="",g=a+"",h=g.split("."),i=h[1];if(i&&i.length){var j=parseInt(i[0]);j&&(f+=c[j]+b[0]);var k=parseInt(i[1]);k&&(f+=c[k]+b[1])}f=f||"整",a=Math.floor(a);for(var l=0;l<d[0].length&&a>0;l++){for(var m="",n=0;n<d[1].length&&a>0;n++)m=c[a%10]+d[1][n]+m,a=Math.floor(a/10);f=m.replace(/(零.)*零$/,"").replace(/^$/,"零")+d[0][l]+f}return e+f.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")},getFileType:function(a,b){var c="common",d=a.name.toLowerCase();return/\.(?:jpg|jpeg|png|gif|bmp)$/.test(d)?c="jpg":/\.(?:doc|docx)$/.test(d)?c="doc":/\.(?:pdf)$/.test(d)?c="pdf":/\.(?:rar)$/.test(d)?c="rar":/\.(?:xls|xlsx)$/.test(d)?c="xls":/\.(?:zip)$/.test(d)?c="zip":/\.(?:ppt|pptx)$/.test(d)?c="ppt":/\.(?:txt)$/.test(d)&&(c="txt"),b&&(/\.(?:png)$/.test(d)?c="png":/\.(?:gif)$/.test(d)&&(c="gif")),c},getFileSize:function(a){var b=0,c="BYTE";return a>1073741824?(b=(a/1073741824).toFixed(0),c="GB"):a>1048576?(b=(a/1048576).toFixed(0),c="MB"):a>1024?(b=(a/1024).toFixed(0),c="KB"):(b=a,c="B"),b+c},placeholder:function(a){k(a)},localStore:function(a,b,c){var d;return _.isUndefined(a)||_.isUndefined(b)?!1:(d=l.get(a)||{},_.isUndefined(c)?d[b]:(d[b]=c,l.set(a,d),c))},getContactDataByType:function(a,b){var c=[],d=function(a){return a.isGroup&&a.children&&a.children.length>0&&_.each(a.children,function(b){b.groupName=a.name,b.groupId=a.id,b.isGroup&&b.children&&b.children.length>0&&d(b)}),a},e=function(b){"person"!=a||b.isGroup?"group"==a&&b.isGroup&&c.push({id:b.id,name:b.name,spell:b.spell,groupName:b.groupName,groupId:b.groupId}):c.push({id:b.id,name:b.name,spell:b.spell,groupName:b.groupName,groupId:b.groupId}),b.children&&b.children.length>0&&_.each(b.children,function(a){e(a)})};return a=a||"person",b=d(b),e(b),c},regDocEvent:function(a,b){var c=function(a){b.apply(this,arguments),a.stopPropagation()};return q("body").on(a,c),c},unRegDocEvent:function(a,b){q("body").off(a,b)},regGlobalClick:function(){var a=[];return q("body").on("click",function(b){a=_.filter(a,function(a){var c=a.element,d=a.handler;return q.contains(document.body,c.get(0))?(d?d(b):c.hide(),!0):!1})}),function(b,c){a.push({element:q(b),handler:c})}}(),deepClone:function(a){return a?n.parse(n.stringify(a)):a},setInputFocusOne:function(a){var b=q(a);b.hasClass("fs-input-focus")||b.get(0).focus()},getCursorPosition:function(a){var b={text:"",start:0,end:0};if(v.setInputFocusOne(a),a.setSelectionRange)b.start=a.selectionStart,b.end=a.selectionEnd,b.text=b.start!=b.end?a.value.substring(b.start,b.end):"";else if(document.selection){var c,d=document.selection.createRange(),e=document.body.createTextRange();for(e.moveToElementText(a),b.text=d.text,b.bookmark=d.getBookmark(),c=0;e.compareEndPoints("StartToStart",d)<0&&0!==d.moveStart("character",-1);c++)"\n"==a.value.charAt(c)&&c++;b.start=c,b.end=b.text.length+b.start}return b},setCursorPosition:function(a,b){var c,d;if(!b)return alert("You must get cursor position first."),!1;if(c=b.start,d=b.end,a.setSelectionRange)v.setInputFocusOne(a),a.setSelectionRange(c,d);else if(a.createTextRange){var e,f,g=a.createTextRange();for(e=c,f=0;e>f;f++)-1!=a.value.charAt(f).search(/[\r\n]/)&&(c-=.5);for(e=d,f=0;e>f;f++)-1!=a.value.charAt(f).search(/[\r\n]/)&&(d-=.5);g.moveEnd("textedit",-1),g.moveStart("character",c),g.moveEnd("character",d-c),g.select()}},appendInput:function(a,b){var c=q(a),d=c.get(0),e=c.val(),f=v.getCursorPosition(d);c.val(e.slice(0,f.start)+b+e.slice(f.end)),v.setCursorPosition(d,_.extend(f,{start:f.start+b.length,end:f.start+b.length}))},setCursorPositionEnd:function(a){var b=q(a),c=b.val(),d=v.getCursorPosition(b.get(0));b.get(0).focus(),v.setCursorPosition(b.get(0),_.extend(d,{start:c.length,end:c.length}))},getTplQueryParams:function(a){a=a||location.href;var b,c=null;return-1!==a.indexOf("/=/")&&(b=a.slice(a.indexOf("/=/")+3),b.length>0&&(c={},b=b.split("/"),_.each(b,function(a){var b=a.split("-");c[b[0]]=decodeURI(a.substring(a.indexOf("-")+1,a.length))}))),c},getTplQueryParams2:function(a){a=a||location.href;var b;if(-1===a.indexOf("/=/"))return void 0;b=a.slice(a.indexOf("/=/")+3);try{return JSON.parse(decodeURIComponent(b.substring(b.indexOf("-")+1,b.length)))||void 0}catch(c){return void 0}},getCurrentTplName:function(){var a=location.href,b="";return-1!==a.indexOf("/=/")&&(a=a.slice(0,a.indexOf("/=/"))),-1!==a.indexOf("#")&&(a=a.slice(a.indexOf("#")+1)),a.length>0&&(b=a.split("/"),b=b.join("-")),b},getCurrentEmp:function(){var a=void 0;return s.getAppStore("contactData")&&(a=s.getAppStore("contactData").currentMember),function(){return a}}(),regRefreshLink:function(a){var b=q(a);b.click(function(){var a=location.href,b=q(this).attr("href");a=a.slice(a.indexOf("#")+1),b=b.slice(b.indexOf("#")+1),a==b&&t.navRouter.navigate("",{trigger:!1})})},toggleAnimate:function(a){var b=q(a.element),c=a.startProperty,d=a.endProperty,e=_.extend({easing:"swing",duration:400},a.animateOpts||{}),f=a.count,g=e.complete||s.EMPTY_FN,h=0;v.asyncOrder(["jslibs/jquery.color-2.1.2.min"],function(){!function(){var a=arguments.callee;b.animate(c,_.extend(e,{complete:function(){return b.animate(d,_.extend(e,{complete:function(){return h++,f>h&&a(),g.apply(this,arguments)}})),g.apply(this,arguments)}}))}()})},showInputError:function(a){v.toggleAnimate({element:q(a),startProperty:{backgroundColor:"#ff0000",opacity:.33},endProperty:{backgroundColor:"white",opacity:1},animateOpts:{easing:"swing",duration:130},count:2})},hideWithAbs:function(a,b){b=!!b;var c=q(a);b?c.addClass("fn-hide-abs"):c.removeClass("fn-hide-abs")},getContactData:function(){var a,b=function(a,b){var c=[];return _.each(a,function(a){var d={name:a.name,nickName:a.nickName||a.name,spell:a.spell.toLowerCase(),type:b};"p"==b?(d.id=a.employeeID,d.gender=a.gender,d.groupIDs=a.groupIDs||[],d.workingState=a.workingState||"",d.profileImagePath=a.profileImage||"",d.profileImage=v.getAvatarLink(d.profileImagePath,2)):(isNaN(a.memberCount)||(d.memberCount=a.memberCount),d.id=a.id),c.push(d)}),c};return function(c){var d,e,f,g,h;return!c&&a?a:(d=v.deepClone(s.getAppStore("contactData")),_.isUndefined(d.inviteEmployeeID)?(e=d.currentMember||{},f=d.members,g=d.groups||[],e.length>0&&(e.spell=e.spell.toLowerCase()||""),e.type="p",e.id=e.employeeID,e.groupIDs=e.groupIDs||[],e.functionPermissions=d.functionPermissions,e.isAdmin=d.isAdmin,e.enterpriseAccount=d.enterpriseAccount,e.account=d.account,e.workingState=e.workingState||"",e.mobile=d.mobile,e.isPhoneBound=d.isPhoneBound,e.boundEmployeeExmail=d.boundEmployeeExmail,e.allCompanyDefaultString=d.allCompanyDefaultString||"全公司",e.isDemoAccount=d.isDemoAccount,e.exmailDomain=d.exmailDomain,e.modules=d.modules,e.uploadFileSizeLimit=d.uploadFileSizeLimit,e.inVipService=d.inVipService,g.push({name:d.allCompanyDefaultString||"全公司",nickName:d.allCompanyDefaultString||"全公司",memberCount:f.length,id:"999999",spell:"quangongsi"}),e.profileImagePath=e.profileImage||"",e.profileImage=v.getAvatarLink(e.profileImagePath,2),h={p:b(f,"p"),g:b(g,"g"),u:e,v:d.version},a||(a=h),h):{u:{id:d.inviteEmployeeID}})}}(),getCrmData:function(){var a;return function(b){var c,d;return!b&&a?a:(c=v.deepClone(s.getAppStore("contactData")),d={tags:c.tags,fBusinessTags:c.fBusinessTags,currentEmp:c.currentMember,functionPermissions:c.functionPermissions,isAllowExportData:c.isAllowExportData,isForbiddenCreateFCustomer:c.isForbiddenCreateFCustomer,isAllowDangerOperate:c.isAllowDangerOperate,isAllowSetOwnLeader:c.isAllowSetOwnLeader,leaderEmp:c.leaderEmp,myHighSeasResponse:c.myHighSeasResponse,salesStagesInUse:c.salesStagesInUse,userDefineFieldInUse:c.userDefineFieldInUse},a||(a=d),d)}}(),getContactDataById:function(a,b){var c=v.getContactData(),d=c[b];return _.find(d,function(b){return b.id==a})},getContactDataByName:function(a,b){var c=v.getContactData(),d=c[b];return _.find(d,function(b){return b.name==a})},getEmployeeListByCircleId:function(a){var b=s.getAppStore("contactData"),c=b.allMembers||[];return c[parseInt(a)]||null},fetchPersonalConfig:function(){v.fetchEnterpriseConfig()},getPersonalConfig:function(a){var b=s.enterpriseConfig||{},c=b[151]||"";return c.length>0?(c=n.parse(c),c[a]):void 0},setPersonalConfig:function(a,b){var c=s.enterpriseConfig[151]||"";c=c.length>0?n.parse(c):{},c[a]=b,s.enterpriseConfig[151]=n.stringify(c)},updatePersonalConfig:function(){var a=s.enterpriseConfig[151];v.api({type:"post",dataType:"json",url:"/GlobalInfo/SetEnterpriseConfig",data:{value:a,key:"151"}})},getCustomerConfig:function(){var a=s.enterpriseConfig||{},b=a[161]||"";return b.length>0?b=n.parse(b):null},setCustomerConfig:function(a){a=a.length?a:"",a=n.stringify(a),v.api({type:"post",dataType:"json",url:"/GlobalInfo/SetEnterpriseConfig",data:{value:a,key:"161"}});var b=s.enterpriseConfig||{};b[161]=a},getContactsConfig:function(){var a=s.enterpriseConfig||{},b=a[171]||"";return b.length>0?b=n.parse(b):null},setContactsConfig:function(a){a=a.length?a:"",a=n.stringify(a),v.api({type:"post",dataType:"json",url:"/GlobalInfo/SetEnterpriseConfig",data:{value:a,key:171}});var b=s.enterpriseConfig||{};b[171]=a},fetchEnterpriseConfig:function(){var a,b=s.getAppStore("contactData"),c={};b?(c=b.profiles||{},a={},c.length>0?(_.each(c,function(b){a[b.value]=b.value1}),s.enterpriseConfig=a):s.enterpriseConfig={}):s.enterpriseConfig={}},getEnterpriseConfig:function(a,b){var c=s.enterpriseConfig||{},d=c[a]||"";return b&&(d=0==d.length?null:n.parse(d)),d},setEnterpriseConfig:function(a,b,c){var d=s.enterpriseConfig||{};c&&(b=n.stringify(b)),d[a]=b,s.enterpriseConfig=d},updateEnterpriseConfig:function(a,b){var c=s.enterpriseConfig;v.api({type:"post",dataType:"json",url:"/GlobalInfo/SetEnterpriseConfig",data:{value:c[a],key:a},success:function(a){b&&b.call(this,a)}})},regTplNav:function(){var a=[];return t.event.on("switched",function(){var b=location.href;b=-1!=b.indexOf("#")?encodeURI(b.toLowerCase().slice(b.indexOf("#"))):"#",a=_.filter(a,function(a){return q.contains(document.body,a.element.get(0))?!0:!1}),_.each(a,function(a){var c=a.element,d=a.hlCls,e=a.href,f=a.lightModel,g=b;"ignore"==f&&-1!=g.indexOf("/=/")&&(g=g.slice(0,g.indexOf("/=/"))),g==e?c.addClass(d):c.removeClass(d)}),_.each(a,function(b){var c=b.element,d=b.hlCls,e=c.attr("lightnav");c.hasClass(d)&&e&&(e=e.split(","),_.each(e,function(b){_.each(a,function(a){var c=a.element,d=a.hlCls,e=a.href;"true"!==c.attr("notracenav")&&b==e&&c.addClass(d)})}))})}),function(b,c){var d=q(b);c=c||"depw-menu-aon",d.each(function(){var b,d,e={},f=q(this);b=f.attr("navhref")||f.attr("href"),d=f.attr("lightmodel")||"with",-1!=b.indexOf("#")&&(b=b.slice(b.indexOf("#"))),b=b.toLowerCase(),_.extend(e,{element:f,hlCls:c,href:encodeURI(b),lightModel:d}),a.push(e)})}}(),showTip:function(a){var b,c=arguments.callee.tip,e=function(){var a=c.element,b=q(".arrows-wrapper",a),d=c.get("align"),e=d.baseElement;return 0==b.length&&(b=q('<div class="arrows-wrapper"></div>').appendTo(a),b.html('<div class="arrows-inner"></div>')),c.set("align",{selfXY:[0,0],baseElement:e,baseXY:[0,e.outerHeight()+8]}),b.removeClass("arrows-t arrows-b arrows-l arrows-r").addClass("arrows-t"),c};a=_.extend({baseElement:null,content:"<div></div>",afterShow:s.EMPTY_FN},a||{}),a.baseElement=q(a.baseElement),c||(c=new d({template:'<div class="fs-tip"></div>',zIndex:1e3}).render(),v.regGlobalClick(c.element,function(){c.element.is(":visible")&&c.hide()}),arguments.callee.tip=c),b=c.element,b.html(a.content),c.set("align",{selfXY:[0,0],baseElement:a.baseElement,baseXY:[0,a.baseElement.outerHeight()+8]}),c.on("after:show",function(){a.afterShow.call(c,e),c.off("after:show",arguments.callee)}),c.show()},getSourceNameFromCode:function(a){var b;switch(a=parseInt(a)){case 1:b="纷享销客";break;case 2:case 201:case 202:case 301:case 302:b="手机网页版";break;case 3:b="桌面版";break;case 203:b="iPhone";break;case 204:b="iPad";break;case 303:b="Android";break;case 304:b="Android HD";break;case 501:b="网页版";break;case 502:b="企业QQ";break;default:b="未知"}return b},getAttachTypeName:function(a){var b=[];return _.each(a,function(a){2==a.value?_.find(b,function(a){return"图片"==a})||b.push("图片"):3==a.value?_.find(b,function(a){return"附件"==a})||b.push("附件"):1==a.value&&(_.find(b,function(a){return"录音"==a})||b.push("录音"))}),b},getFeedTypeName:function(a){var b;switch(a=parseInt(a)){case 1:b="分享";break;case 2:b="日志";break;case 3:b="指令";break;case 4:b="审批";break;case 5:b="销售记录";break;case 2003:b="企信通知";break;default:b="未知"}return b},getRemindType:function(a){var b;switch(a=parseInt(a)){case 1:b=2;break;case 2:b=3;break;case 3:b=4;break;case 4:b=5;break;case 5:b=6;break;case 2003:b=7;break;default:b=1}return b},getWorkStatusName:function(a){var b;switch(a=parseInt(a)){case 1:b="执行中";break;case 2:b="已完成";break;case 3:b="已取消";break;default:b=""}return b},getPlanTypeName:function(a){var b;switch(a=parseInt(a)){case 1:b="日志";break;case 2:b="周计划";break;case 3:b="月计划";break;default:b="未知"}return b},getApproveStatusName:function(a){var b;switch(a=parseInt(a)){case 1:b="待审批";break;case 2:b="同意";break;case 3:b="不同意";break;case 4:b="已取消";break;default:b=""}return b},getApproveOperationTypeName:function(a){var b;switch(a=parseInt(a)){case 1:b="同意";break;case 2:b="不同意";break;case 3:b="设置为已取消";break;default:b=""}return b},getWorkOperationTypeName:function(a){var b;switch(a=parseInt(a)){case 1:b="设置为已完成";break;case 2:b="设置为未完成";break;case 3:b="设置为已取消";break;case 4:b="点评工作";break;case 5:b="转他人执行";break;default:b=""}return b},getSmsRemindTypeName:function(a){var b;switch(a=parseInt(a)){case 1:b="不提醒";break;case 2:b="按时提醒";break;case 3:b="提前5分钟提醒";break;case 4:b="提前15分钟提醒";break;case 5:b="提前30分钟提醒";break;case 6:b="提前1小时提醒";break;case 7:b="提前2小时提醒";break;case 8:b="提前6小时提醒";break;case 9:b="提前1天提醒";break;case 10:b="提前2天提醒";break;default:b="未知"}return b},getPlanOperationType:function(a){var b;switch(a=parseInt(a)){case 1:b="点评";break;case 2:b="设置为已取消";break;default:b=""}return b},changeToChineseNum:function(a){var b;switch(a=parseInt(a)){case 0:b="零";break;case 1:b="一";break;case 2:b="二";break;case 3:b="三";break;case 4:b="四";break;case 5:b="五";break;case 6:b="六";break;case 7:b="七";break;case 8:b="八";break;case 9:b="九";break;case 10:b="十";break;default:b="未知"}return b},getPublishRange:function(a,b,c){var d=v.getContactData(),e=d.u,f=e.groupIDs,g=[],h={parseData:function(a){var b=[].concat(a);return b},createHtml:function(a){var b,c,d=a.id;return c=a.value+"（"+v.getContactDataById(d,"g").memberCount+"）",b=q('<li class="ui-autocomplete-item"><a class="fs-prevent-default" href="javascript:;" title="'+c+'">'+c+"</a></li>")},eqFields:["id","type"],renderCb:function(a,b){var c,d=this,e=q(b),f=q(".ui-autocomplete-item",e).slice(3);f.length>0&&(c=q('<li class="visible-h state-hidden"><a href="javascript:;">展开部门&#8230;</a></li>'),c.appendTo(e),c.on("click",function(a){c.hasClass("state-hidden")?(f.show(),q("a",c).html("收起部门&#8230;"),c.removeClass("state-hidden")):(f.hide(),q("a",c).html("展开部门&#8230;"),c.addClass("state-hidden")),d.show(),a.stopPropagation()}),f.hide())}};f.length>0&&_.each(f,function(a,b){var c=v.getContactDataById(a,"g");g[b]={id:a,value:c.name,type:"g"}}),h.store=g;var i=[],j={parseData:function(a){var b=[];return b=b.concat(a)},createHtml:function(a){var b;return b=q('<li class="ui-autocomplete-item"><a class="fs-prevent-default" title="'+a.value+'" href="javascript:;">'+a.value+"</a></li>")},eqFields:["id","type"]};if(f.length>0&&i.push({id:f.join(","),value:"我的所有部门",name:"我的所有部门",type:"mix",validity:"no",valueType:"g"}),c||i.push({id:999999,value:e.allCompanyDefaultString,name:e.allCompanyDefaultString,type:"mix",validity:"no",valueType:"g"}),i.push({id:e.id,value:"我自己",type:"p"}),j.store=i,!a)return[h,j];if("circle"==a)return i.pop(),[h,j];var k=v.getPersonalConfig(a+"Employees"),l=v.getPersonalConfig(a+"Ranges"),m=[],n={parseData:function(a){var b=[].concat(a);return b},createHtml:function(a){var b;return b=q('<li class="ui-autocomplete-item"><a class="fs-prevent-default" href="javascript:;" title="'+a.value+'">'+a.value+"</a></li>")},eqFields:["id","type"]},o=[],p={parseData:function(a){var b=[],c=a.value.split(","),d=a.ids.split("|"),e=d[0].split(","),f=d[1].split(",");return _.each(e,function(a){b.push({value:c[b.length],id:a,type:"g"})}),_.each(f,function(a){b.push({value:c[b.length],id:a,type:"p"})}),b},createHtml:function(a){var b;return b=q('<li class="ui-autocomplete-item"><a class="fs-prevent-default" title="'+a.value+'" href="javascript:;">'+a.value+"</a></li>")},eqFields:["id","type"]};return _.each(k,function(a,b){m[b]={id:a.dataID,value:a.name,type:"p"}}),_.each(l,function(a,b){o[b]={ids:a.dataIDs,value:a.names,type:"mix"}}),n.store=m,p.store=o,b?[n]:[h,j,n,p]},getPublishDefaultUser:function(a){var b=v.getPersonalConfig(a),c=[],d={parseData:function(a){var b=[].concat(a);return b},createHtml:function(a){var b;return b=q('<li class="ui-autocomplete-item"><a class="fs-prevent-default" href="javascript:;" title="'+a.value+'">'+a.value+"</a></li>")},eqFields:["id","type"]};return _.each(b,function(a){var b=v.getContactDataById(a.dataID,"p");b&&c.push({id:a.dataID,value:a.name,type:"p"})}),d.store=c,[d]},getAtFromInput:function(a){var b,c=q(a),d=_.str.trim(c.val());return d.length>0&&(b=d.match(/@[\u4e00-\u9fa5\w-]+/g)),b=_.map(b,function(a){return a.slice(1)})},getAtFromContent:function(a){var b;return a.length>0&&(b=a.match(/@[\u4e00-\u9fa5\w-]+/g)),b=_.map(b,function(a){return a.slice(1)})},getDateSummaryDesc:function(a,b,c){var d;return _.isUndefined(c)&&(c=b,b=o()),a=o(a),b=o(b),1==c?(d=parseInt(b.diff(a,"seconds")),60>d?10>d?"几秒前":d+"秒前":(d=parseInt(b.diff(a,"minutes")),60>d?1==d?"1分钟前":d+"分钟前":(d=parseInt(o(b).startOf("day").diff(o(a).startOf("day"),"days")),0==d?"今天 "+a.format("HH:mm"):1==d?"昨天 "+a.format("HH:mm"):(d=parseInt(o(b).startOf("year").diff(o(a).startOf("year"),"years")),0==d?a.format("MM月DD日 HH:mm"):a.format("YYYY年MM月DD日 HH:mm"))))):2==c?(d=parseInt(o(b).startOf("day").diff(o(a).startOf("day"),"days")),0==d?"今天 "+a.format("HH:mm"):-1==d?"明天 "+a.format("HH:mm"):-2==d?"后天 "+a.format("HH:mm"):1==d?"昨天 "+a.format("HH:mm"):2==d?"前天 "+a.format("HH:mm"):(d=parseInt(o(b).startOf("year").diff(o(a).startOf("year"),"years")),0==d?a.format("MM月DD日 HH:mm"):a.format("YYYY年MM月DD日 HH:mm"))):3==c?(d=parseInt(b.diff(a,"seconds")),60>d?10>d?"几秒前":d+"秒前":(d=parseInt(b.diff(a,"minutes")),60>d?1==d?"1分钟前":d+"分钟前":(d=parseInt(o(b).startOf("day").diff(o(a).startOf("day"),"days")),0==d?"今天 "+a.format("HH:mm"):1==d?"昨天 "+a.format("HH:mm"):(d=parseInt(o(b).startOf("year").diff(o(a).startOf("year"),"years")),0==d?a.format("MM月DD日"):a.format("YYYY年MM月DD日"))))):void 0},getFileUrl:function(a,b,c){var d=s.API_PATH+"/df/get?id="+a;return c&&(d+="&isAttachment="+c,b&&(d+="&name="+b)),d},getDfLink:function(a,b,c,d){var e;
return b=encodeURIComponent(b),d?a=a+"."+d:d=v.getFileExtText(a),e=c?s.API_PATH+"/df/get?id="+a+"&name="+b+"&isAttachment="+c+"&extendInfo="+d:s.API_PATH+"/df/get?id="+a},getDfGlobalLink:function(a,b,c,d){var e;return b=encodeURIComponent(b),d?a=a+"."+d:d=v.getFileExtText(a),e=c?s.API_PATH+"/DF/GetGlobal?id="+a+"&name="+b+"&isAttachment="+c+"&extendInfo="+d:s.API_PATH+"//DF/GetGlobal?id="+a},getAvatarLink:function(a,b){return a&&a.length>0?v.getDfLink(a+b+".jpg","",!1):s.ASSETS_PATH+"/images/employee_default_120_120.png"},getFileExtText:function(a){var b,c=a.lastIndexOf(".");return b=-1==c?"":a.slice(c+1)},getFileNamePath:function(a){var b,c=a.lastIndexOf(".");return b=-1==c?a:a.slice(0,c)},getUploadType:function(a){var b="";return b=/\.(?:jpg|jpeg|png|gif)$/i.test(a)?"img":"attach"},setFullScreen:function(a){var b=q("html");q("body"),a?(b.data("overflowY")||b.data("overflowY",b.css("overflow-y")),b.css("overflow-y","hidden")):b.css("overflow-y",b.data("overflowY")||"scroll")},toListTop:function(a,b,c){return _.some(a,c)?(a=_.reject(a,c),a.unshift(b)):a.unshift(b),a},getLocationInfo:function(a){var b="";return"中国"!=a.country&&(b+=a.country),a.province!=a.city&&(b+=a.province),_.each([a.city,a.district,a.street,a.streetNumber],function(a){a.length>0&&(b+=a)}),b},isNatureCode:function(a){var b,c=[],d=[],e=[];for(b=48;57>b;b++)c.push(b);for(b=65;90>b;b++)d.push(b);return e.push(32),e.push(13),_.contains([].concat(c,d,e),a)},mix:function(a,b){var c,d=Array.apply([],arguments),e=1,f="boolean"==typeof d[d.length-1]?d.pop():!0;for(1===d.length&&(a=this.window?{}:this,e=0);b=d[e++];)for(c in b)!b.hasOwnProperty(c)||!f&&c in a||(a[c]=b[c]);return a},getAttachSourceName:function(a){var b;switch(a=parseInt(a)){case 1:b="feed";break;case 2:b="reply";break;case 3:b="qx";break;case 4:b="email";break;default:b="unknown"}return b},isArrayElementEq:function(a,b){var c=!0;return a.length!=b.length?!1:(_.some(a,function(a){return _.contains(b,a)?void 0:(c=!1,!0)}),c)},excludeContactData:function(a,b){var c=v.getContactData();return a=[].concat(a),b=b||"p",_.reject(c[b],function(b){return _.some(a,function(a){return b.id==a})})},excludeDataByKey:function(a,b,c){return a=[].concat(a),_.reject(c,function(c){return _.some(a,function(a){return c[b]==a})})},hideAllFloatWins:function(){i.hideAll(),q(".fs-float-win").each(function(){h.query(this).hide()})},showSucessTip:function(){var a=new i({className:"fs-success-tip",content:"success",width:"auto",visibleWithAnimate:!0});return function(b){var c;a.rendered||a.render(),c=a.element,c.html('<img src="'+s.BLANK_IMG+'" class="icon-success" /><span class="tip-content">'+b+"</span>"),a.show(),setTimeout(function(){a.hide()},1e3)}}(),showGuideTip:function(){var a,b=[],c=function(a){var b=a.element,c=a.leftBracket,d=a.rightBracket,e=a.opts,f=b.outerWidth(),g=b.outerHeight(),h=b.offset();c.height(g+e.leftHeightIncrement),c.css({top:h.top+e.leftTopIncrement+"px",left:h.left-c.width()+e.leftLeftIncrement+"px"}),d.height(g+e.rightHeightIncrement),d.css({top:h.top+e.rightTopIncrement+"px",left:h.left+f+e.rightLeftIncrement+"px"})};return q(r).resize(function(){clearTimeout(a),a=setTimeout(function(){b=_.filter(b,function(a){return q.contains(q("body")[0],a.leftBracket[0])}),_.each(b,function(a){c(a)})},100)}),t.event.on("switched",function(){_.each(b,function(a){var b=a.element,d=a.leftBracket,e=a.rightBracket;b.is(":hidden")?(d.hide(),e.hide()):(d.show(),e.show(),c(a))})}),function(a,d){var e,f,g,h,i=q(a);d=_.extend({leftLeftIncrement:0,leftTopIncrement:0,leftHeightIncrement:0,rightLeftIncrement:0,rightTopIncrement:0,rightHeightIncrement:0,imageName:"",imageDescription:"",imagePlace:"right",imagePosition:{top:0,left:"16px"},renderCb:s.EMPTY_FN},d||{}),0==i.length||i.is(":hidden")||i.data("noguide")||"yes"==i.attr("noguide")||(f=q('<div class="fs-guide-left-bracket fs-guide-bracket"></div>'),g=q('<div class="fs-guide-right-bracket fs-guide-bracket"></div>'),f.appendTo("body"),g.appendTo("body"),e={element:i,leftBracket:f,rightBracket:g,opts:d},e[d.imagePlace+"Bracket"].html('<div class="fs-guide-image-wrapper"><img class="fs-guide-image" src="'+s.ASSETS_PATH+"/images/guide/"+d.imageName+'" alt="'+d.imageDescription+'" /></div>'),h=q(".fs-guide-image-wrapper",e[d.imagePlace+"Bracket"]),h.css(_.extend({position:"absolute"},d.imagePosition)),d.renderCb.call(this,h,f,g,i),c(e),b.push(e))}}(),autoAdjustPos:function(){var a,b=[],c=function(){var a=q(r).scrollTop(),c=q(this).data("prevWinScrollTop"),d=q(r).height();b=_.filter(b,function(a){return q.contains(document.body,a.element.get(0))}),_.each(b,function(b){var e=b.element,f=b.offsetTop,g=e.outerHeight(!0),h=e.data("refTop")||f;e.is(":visible")&&(a>=f?d>=g?(e.css("top",a-f+"px"),e.addClass("fixed-top")):a>c?(e.removeClass("fixed-top"),a>h+g-d+30?(e.css("top",a-f-g+d+"px"),e.addClass("fixed-bottom")):e.removeClass("fixed-bottom")):c>a&&(h=e.offset().top,e.data("refTop",h),e.removeClass("fixed-bottom"),a<=e.offset().top&&a>=f?(e.css("top",a-f+"px"),e.addClass("fixed-top")):e.removeClass("fixed-top")):(e.css("top","0px"),e.removeClass("fixed-top"),e.removeClass("fixed-bottom"),e.data("refTop",f)))}),q(r).data("prevWinScrollTop",a)},d=function(){var a=q("body"),b=q("#app-portal");return a.width()<b.width()?!1:!0},e=function(){_.each(b,function(a){var b=a.element;b.css("top","0px"),b.removeClass("fixed-top"),b.removeClass("fixed-bottom")})};return q(r).scroll(function(){d()?c():e()}).resize(function(){clearTimeout(a),a=setTimeout(function(){d()?c():e()},600)}),function(a){var d;if(a===!0)c();else if(d=q(a),d.length>0){d.css("position","relative");var e=d.width();e>0&&d.width(d.width()),b.push({element:d,offsetTop:d.offset().top})}}}(),_mnInitSelect:function(a){var b,c,d,e,f,g=q(a),h=null;return g.hasClass("mn-select-box")?(b=q(".mn-select-list",g),c=q(".mn-select-title",g),f=g.attr("select-cls")||"",g.addClass(f),d=[],q(".mn-select-item",b).each(function(){var a,b=q(this);a={value:b.data("value"),text:b.text()},b.data("selected")&&(a.selected=!0,h=a.value),b.data("disabled")&&(a.disabled=!0),d.push(a)}),e=new j({trigger:c,model:d,className:"mn-select-panel "+f,zIndex:1e4}).render(),q(".mn-select-list",g).remove(),g.data("value",h),e.on("change",function(a){g.data("value",a.data("value"))}),g.data("cpt",e),e):void 0},mnGetter:function(){return q(function(){q("body").on("click",".mn-checkbox-box",function(a){var b,c=q(this),d=q(a.target),e=[];c.hasClass("mn-disabled")||(_.isUndefined(c.data("defaultValue"))&&(b=v.mnGetter(c),c.data("defaultValue",b)),d.hasClass("mn-checkbox-item")&&(d.hasClass("mn-selected")?d.removeClass("mn-selected"):d.addClass("mn-selected"),q(".mn-selected",c).each(function(){e.push(q(this).data("value"))}),c.data("value",e)))}).on("click",".mn-checkbox-box .label-for",function(a){var b=q(this),c=b.closest(".mn-checkbox-box"),d=q(a.target);c.hasClass("mn-disabled")||d.is("label")&&q(".mn-checkbox-item",b).click()}).on("click",".mn-radio-box",function(a){var b,c,d=q(this),e=q(a.target);d.hasClass("mn-disabled")||(_.isUndefined(d.data("defaultValue"))&&(c=v.mnGetter(d),d.data("defaultValue",c)),e.hasClass("mn-radio-item")&&(b=e.data("value"),q(".mn-radio-item",d).removeClass("mn-selected"),e.addClass("mn-selected"),d.data("value",b)))}).on("click",".mn-radio-box .label-for",function(a){var b=q(this),c=b.closest(".mn-radio-box"),d=q(a.target);c.hasClass("mn-disabled")||d.is("label")&&q(".mn-radio-item",b).click()}).on("click",".mn-select-box",function(a){var b,c=q(this),d=q(a.target),e=c.data("cpt");c.hasClass("mn-disabled")||(_.isUndefined(c.data("defaultValue"))&&(b=v.mnGetter(c),c.data("defaultValue",b)),d.hasClass("mn-select-title")&&(e||(e=v._mnInitSelect(c),e.show())))})}),function(a){var b,c,d=q(a);return d.hasClass("mn-checkbox-box")?(b=d.data("value"),_.isUndefined(b)&&(b=[],q(".mn-selected",d).each(function(){b.push(q(this).data("value"))}))):d.hasClass("mn-radio-box")?(b=d.data("value"),_.isUndefined(b)&&(b=null,q(".mn-selected",d).each(function(){return b=q(this).data("value"),!1}))):d.hasClass("mn-select-box")&&(c=d.data("cpt"),b=d.data("value"),_.isUndefined(c)&&(b=null,q(".mn-select-item",d).each(function(){var a=q(this);return a.data("selected")?(b=a.data("value"),!1):void 0}))),b}}(),mnSetter:function(a,b){var c,d,e=q(a);_.isUndefined(e.data("defaultValue"))&&(d=v.mnGetter(a),e.data("defaultValue",d)),e.hasClass("mn-checkbox-box")?(b=[].concat(b),q(".mn-selected",e).removeClass("mn-selected"),_.each(b,function(a){q(".mn-checkbox-item",e).each(function(){var b=q(this);return b.data("value")==a?(b.addClass("mn-selected"),!1):void 0})}),e.data("value",b)):e.hasClass("mn-radio-box")?(q(".mn-selected",e).removeClass("mn-selected"),q(".mn-radio-item",e).each(function(){var a=q(this);return a.data("value")==b?(a.addClass("mn-selected"),!1):void 0}),e.data("value",b)):e.hasClass("mn-select-box")&&(c=e.data("cpt"),_.isUndefined(c)?q(".mn-select-item",e).each(function(){var a=q(this);a.data("selected",!1),a.data("value")==b&&(a.data("selected",!0),e.find(".mn-select-title").text(a.text()))}):c.options.each(function(a){var d=q(this);d.data("value")==b&&c.select(a)}),e.data("value",b))},mnDisable:function(a){var b,c=q(a);c.addClass("mn-disabled"),c.hasClass("mn-checkbox-box")?c.addClass("mn-disabled-checkbox-box"):c.hasClass("mn-radio-box")?c.addClass("mn-disabled-radio-box"):c.hasClass("mn-select-box")&&(c.addClass("mn-disabled-select-box"),b=c.data("cpt"),b&&b.set("disabled",!0))},mnEnable:function(a){var b,c=q(a);c.removeClass("mn-disabled"),c.hasClass("mn-checkbox-box")?c.removeClass("mn-disabled-checkbox-box"):c.hasClass("mn-radio-box")?c.removeClass("mn-disabled-radio-box"):c.hasClass("mn-select-box")&&(c.removeClass("mn-disabled-select-box"),b=c.data("cpt"),b&&b.set("disabled",!1))},mnReset:function(a){var b=q(a),c=b.data("defaultValue");_.isUndefined(c)||v.mnSetter(b,c)},mnSelect:function(a,b,c){var d,e,f=q(a),g=f.data("cpt");return f.hasClass("mn-select-box")?(g||(g=v._mnInitSelect(f)),e=v.mnGetter(f),d=g[b](c),("addOption"==b||"removeOption"==b)&&v.mnSetter(f,e),d):void 0},mnEvent:function(a,b,c){var d,e=q(a);e.hasClass("mn-checkbox-box")?"change"==b&&e.on("click",".mn-checkbox-item",function(){var a=q(this),b=v.mnGetter(e);c.call(a,b)}):e.hasClass("mn-radio-box")?"change"==b&&e.on("click",".mn-checkbox-item",function(){var a=q(this),b=v.mnGetter(e);c.call(a,b)}):e.hasClass("mn-select-box")&&(d=e.data("cpt"),d||(d=v._mnInitSelect(e)),"change"==b&&d.on("change",function(a){c.call(d,a.data("value"),a.text())}))},mnOffEvent:function(a,b){var c,d=q(a);d.hasClass("mn-checkbox-box")||d.hasClass("mn-radio-box")||d.hasClass("mn-select-box")&&(c=d.data("cpt"),c||(c=v._mnInitSelect(d)),"change"==b&&c.off("change"))},showGlobalLoading:function(a,b,c){a=a||1,c=c||"正在加载...";var e=h.query(".global-loading-"+a);e||(e=new d(_.extend({template:'<div class="global-loading-'+a+'">'+c+"</div>",width:236,zIndex:1101,align:{selfXY:["center",0],baseXY:["center",96]}},b||{}))),e.show()},hideGlobalLoading:function(a){a=a||1;var b=h.query(".global-loading-"+a);b&&b.hide()},remind:function(a,b){var c=a||1,d=b||"保存成功";if(1==c){var e=q(".global-remind-1");e.length<1?q("body").append("<div class = 'global-remind-1'>"+d+"</div>"):(e.text(d),e.show()),setTimeout(function(){q(".global-remind-1").hide()},1e3)}if(2==c){var f=h.query(".global-remind-2");f?q(".global-remind-2").text(d):(f=new i({template:"<div class = 'global-remind-2'>"+d+"</div>",hasMask:!1,width:"auto",zIndex:1101}),q("body").append("<div class = 'global-remind-mask'></div>")),q(".global-remind-mask").show(),f.show(),setTimeout(function(){f.hide(),q(".global-remind-mask").hide()},1e3)}},showMask:function(){var a=q(".global-mask");a.length<1&&q("body").append("<div class = 'global-mask'></div>"),a.show()},hideMask:function(){var a=q(".global-mask");a.length<1||a.hide()},isCrmAdmin:function(){var a=!1,b=s.getAppStore("contactData").functionPermissions;return _.map(b,function(b){31==b.value&&(a=!0)}),a},CONSTANT:{TAG_TYPE:{CUSTOMER:1,CONTACTS:2,EVENT:3,SALES_OPP:4,PRODUCT:5,COMPETITOR:6,CONTRACT:7,MARKETING:8,SALES_CLUE:9},SYS_TAG_TYPE:{CustomerState:101,RoleRelation:102,SalesAction:103,SalesOpportunitySource:104,SalesOpportunityType:105,CompetitorScale:106,ContractType:107,MarketingEventType:108,SalesClueSource:109,ProductLine:110,Competitiveness:111}},getTagsByType:function(a){var b=this.getCrmData().fBusinessTags,c=[];return _.each(b,function(b){b.type===a&&c.push(b)}),c},getUserDefineFieldByType:function(a){var b=this.getCrmData().userDefineFieldInUse,c=[];return _.each(b,function(b){b.type===a&&c.push(b)}),c},getNavRouterContants:function(){return{crm:{customers:{index:1,text:"客户",tip:"tip-product",href:"#customers/home"},contacts:{index:2,text:"联系人",tip:"tip-contact",href:"#contacts/contact"},opportunities:{index:3,text:"机会",tip:"tip-opportunitie",href:"#opportunities/salesopportunity"},contracts:{index:4,text:"合同",tip:"tip-contract",href:"#contracts/contract"},salesperformances:{index:5,text:"仪表盘",tip:"tip-salesperformance",href:"#salesperformances/salesperformance"},salestargets:{index:6,text:"预测",tip:"tip-salestarget",href:"#salestargets/salestarget"},crmsettings:{index:7,text:"设置",tip:"tip-crmsetting",href:"#crmsettings/leaderssetting"},marketings:{index:8,text:"市场",tip:"tip-marketing",href:"#marketings/marketing"},salesclues:{index:9,text:"线索",tip:"tip-salesclue",href:"#salesclues/salesclue"},competitors:{index:10,text:"对手",tip:"tip-competitor",href:"#competitors/competitor"},products:{index:11,text:"产品",tip:"tip-product",href:"#products/product"}},oa:["stream","plan","work","approve","locations","attach","entnetworkdisk"],app:["workmessage","reportdata"],other:["profile","circles","shortmessage","settings"]}},getContactsWays:function(){return[{value:1,text:"电话"},{value:2,text:"手机"},{value:3,text:"电子邮件"},{value:4,text:"传真"},{value:5,text:"新浪微博"},{value:6,text:"腾讯微博"},{value:7,text:"微信"},{value:8,text:"QQ"},{value:9,text:"MSN"}]},getPayWays:function(){return[{value:1,text:"支票"},{value:2,text:"现金"},{value:3,text:"邮政汇款"},{value:4,text:"电汇"},{value:5,text:"网上转账"},{value:6,text:"其他"}]},C_CONTACT_SOURCE:{},crmTableSortSet:function(a){a=q.extend({element:null,meEl:null,selectData:[{text:"发生变化的在最前面",value:"0"},{text:"按名称排序",value:"2"},{text:"表格列排序",value:"",selected:!0}],oThs:null,callback:function(){}},a||{}),a.oThs&&a.meEl.is(".sorting")&&(a.meEl.siblings().removeClass("sorting_asc").removeClass("sorting_desc"),_.each(a.oThs,function(b){var c=b.clasName,d=b.sortType;a.meEl.is(c)&&(a.meEl.is(".sorting_asc")?(a.callback({sortType:d[0]}),a.meEl.removeClass("sorting_asc").addClass("sorting_desc")):(a.callback({sortType:d[1]}),a.meEl.removeClass("sorting_desc").addClass("sorting_asc")),v.mnSelect(a.element,"syncModel",a.selectData))}))},addListTitle:function(a,b,c){var d=a.substring(a.length-c);return d!=b?b:""},disableCrmBtn:function(a){a.attr("disabled",!0).css({opacity:".5",cursor:"default"})},enableCrmBtn:function(a){a.removeAttr("disabled").css({opacity:"1",cursor:"pointer"})},bindDefineFieldInput:function(a,b){var c=null,d=null;"num"==b?a.on("input propertychange",function(a){c&&clearTimeout(c),c=null,c=setTimeout(function(){var b=q(a.target).val();b=b.substring(0,15);var c=b.length>0?b.indexOf(".")==b.length-1:!1,d=parseFloat(b);isNaN(d)?q(a.target).val(""):q(a.target).val(c?d+".":d)},10)}):"text"==b&&a.on("input propertychange",function(a){d&&clearTimeout(d),d=null,d=setTimeout(function(){q(a.target).val()},10)})},generateDefineField:function(a,b,c){a.html("");var d=[];return _.each(b,function(b){if(2==b.fieldType){var e=q('<li class="fn-clear"> <div class="selects-tit inputs-tit f-user-define-field-id" data-id="'+b.userDefineFieldID+'"> '+b.fieldDescription+' </div><div class="input-warp date-wrapper"></div></li>');a.append(e);var f=new c({element:e.find(".date-wrapper"),placeholder:"选择日期",formatStr:"YYYY年MM月DD日（dddd）",isCRM:!0});d.push({fieldName:b.fieldName,dateObj:f})}else if(1==b.fieldType){var e=q('<li class="fn-clear"> <div class="selects-tit inputs-tit f-user-define-field-text" data-id="'+b.userDefineFieldID+'" data-fieldname="'+b.fieldName+'"> '+b.fieldDescription+' </div><div class="inputs-warp"><textarea class="area-auto-height textarea-h19" placeholder="请填写'+b.fieldDescription+'"></textarea></div> </li>');a.append(e),v.bindDefineFieldInput(e.find("input"),"text")}else if(3==b.fieldType){var e=q('<li class="fn-clear"> <div class="selects-tit inputs-tit f-user-define-field-num" data-id="'+b.userDefineFieldID+'" data-fieldname="'+b.fieldName+'"> '+b.fieldDescription+' </div><div class="inputs-warp"><input class="dialog-input-text " placeholder="请填写'+b.fieldDescription+'"></div> </li>');a.append(e),v.bindDefineFieldInput(e.find("input").val(0),"num")}}),d},check:{_reg:{phoneReg:/^1[0-9]{10}$/,mailReg:/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+[\.][a-zA-Z0-9_-]+$/,passwordReg:/^[a-zA-Z0-9]{6,10}$/},checkPhone:function(a){return this._reg.phoneReg.test(a)},checkMail:function(a){return this._reg.mailReg.test(a)},checkPassword:function(a){return this._reg.passwordReg.test(a)}},countTime:function(a,b,c,d){if(!a.getValue())return"";var e=o(a.getValue()+" "+b.getValue(),"YYYYMMDD HH:mm"),f=o(c.getValue()+" "+d.getValue(),"YYYYMMDD HH:mm"),g=parseInt(f.diff(e,"minute")),h=g/60;return h>0?h:""},queryToJson:function(a){for(var b={},c=a.split("&"),d=0;d<c.length;d++)if(c[d]){var e=c[d].split("=");e.length>=1&&(b[e[0]]=e[1]||null)}return b},emoji:function(){var a=/\u2049\uFE0F|\u2049|\u2122|\u2139\uFE0F|\u2139|\u2194\uFE0F|\u2194|\u2195\uFE0F|\u2195|\u2196\uFE0F|\u2196|\u2197\uFE0F|\u2197|\u2198\uFE0F|\u2198|\u2199\uFE0F|\u2199|\u2600\uFE0F|\u2600|\u2601\uFE0F|\u2601|\u2611\uFE0F|\u2611|\u2614\uFE0F|\u2614|\u2615\uFE0F|\u2615|\u2648\uFE0F|\u2648|\u2649\uFE0F|\u2649|\u2650\uFE0F|\u2650|\u2651\uFE0F|\u2651|\u2652\uFE0F|\u2652|\u2653\uFE0F|\u2653|\u2660\uFE0F|\u2660|\u2663\uFE0F|\u2663|\u2665\uFE0F|\u2665|\u2666\uFE0F|\u2666|\u2668\uFE0F|\u2668|\u2693\uFE0F|\u2693|\u2702\uFE0F|\u2702|\u2705|\u2708\uFE0F|\u2708|\u2709\uFE0F|\u2709|\u2712\uFE0F|\u2712|\u2714\uFE0F|\u2714|\u2716\uFE0F|\u2716|\u2728|\u2733\uFE0F|\u2733|\u2734\uFE0F|\u2734|\u2744\uFE0F|\u2744|\u2747\uFE0F|\u2747|\u2753|\u2754|\u2755|\u2757\uFE0F|\u2757|\u2764\uFE0F|\u2764|\u2795|\u2796|\u2797|\u2934\uFE0F|\u2934|\u2935\uFE0F|\u2935|\u3030|\u3297\uFE0F|\u3297|\u3299\uFE0F|\u3299|\u00A9|\u00AE|\u203C\uFE0F|\u203C|\u21A9\uFE0F|\u21A9|\u21AA\uFE0F|\u21AA|\u231A\uFE0F|\u231A|\u231B\uFE0F|\u231B|\u23E9|\u23EA|\u23EB|\u23EC|\u23F0|\u23F3|\u24C2\uFE0F|\u24C2|\u25AA\uFE0F|\u25AA|\u25AB\uFE0F|\u25AB|\u25B6\uFE0F|\u25B6|\u25C0\uFE0F|\u25C0|\u25FB\uFE0F|\u25FB|\u25FC\uFE0F|\u25FC|\u25FD\uFE0F|\u25FD|\u25FE\uFE0F|\u25FE|\u260E\uFE0F|\u260E|\u261D\uFE0F|\u261D|\u263A\uFE0F|\u263A|\u264A\uFE0F|\u264A|\u264B\uFE0F|\u264B|\u264C\uFE0F|\u264C|\u264D\uFE0F|\u264D|\u264E\uFE0F|\u264E|\u264F\uFE0F|\u264F|\u267B\uFE0F|\u267B|\u267F\uFE0F|\u267F|\u26A0\uFE0F|\u26A0|\u26A1\uFE0F|\u26A1|\u26AA\uFE0F|\u26AA|\u26AB\uFE0F|\u26AB|\u26BD\uFE0F|\u26BD|\u26BE\uFE0F|\u26BE|\u26C4\uFE0F|\u26C4|\u26C5\uFE0F|\u26C5|\u26CE|\u26D4\uFE0F|\u26D4|\u26EA\uFE0F|\u26EA|\u26F2\uFE0F|\u26F2|\u26F3\uFE0F|\u26F3|\u26F5\uFE0F|\u26F5|\u26FA\uFE0F|\u26FA|\u26FD\uFE0F|\u26FD|\u270A|\u270B|\u270C\uFE0F|\u270C|\u270F\uFE0F|\u270F|\u274C|\u274E|\u27A1\uFE0F|\u27A1|\u27B0|\u27BF|\u2B05\uFE0F|\u2B05|\u2B06\uFE0F|\u2B06|\u2B07\uFE0F|\u2B07|\u2B1B\uFE0F|\u2B1B|\u2B1C\uFE0F|\u2B1C|\u2B50\uFE0F|\u2B50|\u2B55\uFE0F|\u2B55|\u303D\uFE0F|\u303D|\uD83C\uDC04\uFE0F|\uD83C\uDC04|\uD83C\uDCCF|\uD83C\uDD70|\uD83C\uDD71|\uD83C\uDD7E|\uD83C\uDD7F\uFE0F|\uD83C\uDD7F|\uD83C\uDD8E|\uD83C\uDD91|\uD83C\uDD92|\uD83C\uDD93|\uD83C\uDD94|\uD83C\uDD95|\uD83C\uDD96|\uD83C\uDD97|\uD83C\uDD98|\uD83C\uDD99|\uD83C\uDD9A|\uD83C\uDE01|\uD83C\uDE02|\uD83C\uDE1A\uFE0F|\uD83C\uDE1A|\uD83C\uDE2F\uFE0F|\uD83C\uDE2F|\uD83C\uDE32|\uD83C\uDE33|\uD83C\uDE34|\uD83C\uDE35|\uD83C\uDE36|\uD83C\uDE37|\uD83C\uDE38|\uD83C\uDE39|\uD83C\uDE3A|\uD83C\uDE50|\uD83C\uDE51|\uD83C\uDF00|\uD83C\uDF01|\uD83C\uDF02|\uD83C\uDF03|\uD83C\uDF04|\uD83C\uDF05|\uD83C\uDF06|\uD83C\uDF07|\uD83C\uDF08|\uD83C\uDF09|\uD83C\uDF0A|\uD83C\uDF0B|\uD83C\uDF0C|\uD83C\uDF0D|\uD83C\uDF0E|\uD83C\uDF0F|\uD83C\uDF10|\uD83C\uDF11|\uD83C\uDF12|\uD83C\uDF13|\uD83C\uDF14|\uD83C\uDF15|\uD83C\uDF16|\uD83C\uDF17|\uD83C\uDF18|\uD83C\uDF19|\uD83C\uDF1A|\uD83C\uDF1B|\uD83C\uDF1C|\uD83C\uDF1D|\uD83C\uDF1E|\uD83C\uDF1F|\uD83C\uDF20|\uD83C\uDF30|\uD83C\uDF31|\uD83C\uDF32|\uD83C\uDF33|\uD83C\uDF34|\uD83C\uDF35|\uD83C\uDF37|\uD83C\uDF38|\uD83C\uDF39|\uD83C\uDF3A|\uD83C\uDF3B|\uD83C\uDF3C|\uD83C\uDF3D|\uD83C\uDF3E|\uD83C\uDF3F|\uD83C\uDF40|\uD83C\uDF41|\uD83C\uDF42|\uD83C\uDF43|\uD83C\uDF44|\uD83C\uDF45|\uD83C\uDF46|\uD83C\uDF47|\uD83C\uDF48|\uD83C\uDF49|\uD83C\uDF4A|\uD83C\uDF4B|\uD83C\uDF4C|\uD83C\uDF4D|\uD83C\uDF4E|\uD83C\uDF4F|\uD83C\uDF50|\uD83C\uDF51|\uD83C\uDF52|\uD83C\uDF53|\uD83C\uDF54|\uD83C\uDF55|\uD83C\uDF56|\uD83C\uDF57|\uD83C\uDF58|\uD83C\uDF59|\uD83C\uDF5A|\uD83C\uDF5B|\uD83C\uDF5C|\uD83C\uDF5D|\uD83C\uDF5E|\uD83C\uDF5F|\uD83C\uDF60|\uD83C\uDF61|\uD83C\uDF62|\uD83C\uDF63|\uD83C\uDF64|\uD83C\uDF65|\uD83C\uDF66|\uD83C\uDF67|\uD83C\uDF68|\uD83C\uDF69|\uD83C\uDF6A|\uD83C\uDF6B|\uD83C\uDF6C|\uD83C\uDF6D|\uD83C\uDF6E|\uD83C\uDF6F|\uD83C\uDF70|\uD83C\uDF71|\uD83C\uDF72|\uD83C\uDF73|\uD83C\uDF74|\uD83C\uDF75|\uD83C\uDF76|\uD83C\uDF77|\uD83C\uDF78|\uD83C\uDF79|\uD83C\uDF7A|\uD83C\uDF7B|\uD83C\uDF7C|\uD83C\uDF80|\uD83C\uDF81|\uD83C\uDF82|\uD83C\uDF83|\uD83C\uDF84|\uD83C\uDF85|\uD83C\uDF86|\uD83C\uDF87|\uD83C\uDF88|\uD83C\uDF89|\uD83C\uDF8A|\uD83C\uDF8B|\uD83C\uDF8C|\uD83C\uDF8D|\uD83C\uDF8E|\uD83C\uDF8F|\uD83C\uDF90|\uD83C\uDF91|\uD83C\uDF92|\uD83C\uDF93|\uD83C\uDFA0|\uD83C\uDFA1|\uD83C\uDFA2|\uD83C\uDFA3|\uD83C\uDFA4|\uD83C\uDFA5|\uD83C\uDFA6|\uD83C\uDFA7|\uD83C\uDFA8|\uD83C\uDFA9|\uD83C\uDFAA|\uD83C\uDFAB|\uD83C\uDFAC|\uD83C\uDFAD|\uD83C\uDFAE|\uD83C\uDFAF|\uD83C\uDFB0|\uD83C\uDFB1|\uD83C\uDFB2|\uD83C\uDFB3|\uD83C\uDFB4|\uD83C\uDFB5|\uD83C\uDFB6|\uD83C\uDFB7|\uD83C\uDFB8|\uD83C\uDFB9|\uD83C\uDFBA|\uD83C\uDFBB|\uD83C\uDFBC|\uD83C\uDFBD|\uD83C\uDFBE|\uD83C\uDFBF|\uD83C\uDFC0|\uD83C\uDFC1|\uD83C\uDFC2|\uD83C\uDFC3|\uD83C\uDFC4|\uD83C\uDFC6|\uD83C\uDFC7|\uD83C\uDFC8|\uD83C\uDFC9|\uD83C\uDFCA|\uD83C\uDFE0|\uD83C\uDFE1|\uD83C\uDFE2|\uD83C\uDFE3|\uD83C\uDFE4|\uD83C\uDFE5|\uD83C\uDFE6|\uD83C\uDFE7|\uD83C\uDFE8|\uD83C\uDFE9|\uD83C\uDFEA|\uD83C\uDFEB|\uD83C\uDFEC|\uD83C\uDFED|\uD83C\uDFEE|\uD83C\uDFEF|\uD83C\uDFF0|\uD83D\uDC00|\uD83D\uDC01|\uD83D\uDC02|\uD83D\uDC03|\uD83D\uDC04|\uD83D\uDC05|\uD83D\uDC06|\uD83D\uDC07|\uD83D\uDC08|\uD83D\uDC09|\uD83D\uDC0A|\uD83D\uDC0B|\uD83D\uDC0C|\uD83D\uDC0D|\uD83D\uDC0E|\uD83D\uDC0F|\uD83D\uDC10|\uD83D\uDC11|\uD83D\uDC12|\uD83D\uDC13|\uD83D\uDC14|\uD83D\uDC15|\uD83D\uDC16|\uD83D\uDC17|\uD83D\uDC18|\uD83D\uDC19|\uD83D\uDC1A|\uD83D\uDC1B|\uD83D\uDC1C|\uD83D\uDC1D|\uD83D\uDC1E|\uD83D\uDC1F|\uD83D\uDC20|\uD83D\uDC21|\uD83D\uDC22|\uD83D\uDC23|\uD83D\uDC24|\uD83D\uDC25|\uD83D\uDC26|\uD83D\uDC27|\uD83D\uDC28|\uD83D\uDC29|\uD83D\uDC2A|\uD83D\uDC2B|\uD83D\uDC2C|\uD83D\uDC2D|\uD83D\uDC2E|\uD83D\uDC2F|\uD83D\uDC30|\uD83D\uDC31|\uD83D\uDC32|\uD83D\uDC33|\uD83D\uDC34|\uD83D\uDC35|\uD83D\uDC36|\uD83D\uDC37|\uD83D\uDC38|\uD83D\uDC39|\uD83D\uDC3A|\uD83D\uDC3B|\uD83D\uDC3C|\uD83D\uDC3D|\uD83D\uDC3E|\uD83D\uDC40|\uD83D\uDC42|\uD83D\uDC43|\uD83D\uDC44|\uD83D\uDC45|\uD83D\uDC46|\uD83D\uDC47|\uD83D\uDC48|\uD83D\uDC49|\uD83D\uDC4A|\uD83D\uDC4B|\uD83D\uDC4C|\uD83D\uDC4D|\uD83D\uDC4E|\uD83D\uDC4F|\uD83D\uDC50|\uD83D\uDC51|\uD83D\uDC52|\uD83D\uDC53|\uD83D\uDC54|\uD83D\uDC55|\uD83D\uDC56|\uD83D\uDC57|\uD83D\uDC58|\uD83D\uDC59|\uD83D\uDC5A|\uD83D\uDC5B|\uD83D\uDC5C|\uD83D\uDC5D|\uD83D\uDC5E|\uD83D\uDC5F|\uD83D\uDC60|\uD83D\uDC61|\uD83D\uDC62|\uD83D\uDC63|\uD83D\uDC64|\uD83D\uDC65|\uD83D\uDC66|\uD83D\uDC67|\uD83D\uDC68|\uD83D\uDC69|\uD83D\uDC6A|\uD83D\uDC6B|\uD83D\uDC6C|\uD83D\uDC6D|\uD83D\uDC6E|\uD83D\uDC6F|\uD83D\uDC70|\uD83D\uDC71|\uD83D\uDC72|\uD83D\uDC73|\uD83D\uDC74|\uD83D\uDC75|\uD83D\uDC76|\uD83D\uDC77|\uD83D\uDC78|\uD83D\uDC79|\uD83D\uDC7A|\uD83D\uDC7B|\uD83D\uDC7C|\uD83D\uDC7D|\uD83D\uDC7E|\uD83D\uDC7F|\uD83D\uDC80|\uD83D\uDC81|\uD83D\uDC82|\uD83D\uDC83|\uD83D\uDC84|\uD83D\uDC85|\uD83D\uDC86|\uD83D\uDC87|\uD83D\uDC88|\uD83D\uDC89|\uD83D\uDC8A|\uD83D\uDC8B|\uD83D\uDC8C|\uD83D\uDC8D|\uD83D\uDC8E|\uD83D\uDC8F|\uD83D\uDC90|\uD83D\uDC91|\uD83D\uDC92|\uD83D\uDC93|\uD83D\uDC94|\uD83D\uDC95|\uD83D\uDC96|\uD83D\uDC97|\uD83D\uDC98|\uD83D\uDC99|\uD83D\uDC9A|\uD83D\uDC9B|\uD83D\uDC9C|\uD83D\uDC9D|\uD83D\uDC9E|\uD83D\uDC9F|\uD83D\uDCA0|\uD83D\uDCA1|\uD83D\uDCA2|\uD83D\uDCA3|\uD83D\uDCA4|\uD83D\uDCA5|\uD83D\uDCA6|\uD83D\uDCA7|\uD83D\uDCA8|\uD83D\uDCA9|\uD83D\uDCAA|\uD83D\uDCAB|\uD83D\uDCAC|\uD83D\uDCAD|\uD83D\uDCAE|\uD83D\uDCAF|\uD83D\uDCB0|\uD83D\uDCB1|\uD83D\uDCB2|\uD83D\uDCB3|\uD83D\uDCB4|\uD83D\uDCB5|\uD83D\uDCB6|\uD83D\uDCB7|\uD83D\uDCB8|\uD83D\uDCB9|\uD83D\uDCBA|\uD83D\uDCBB|\uD83D\uDCBC|\uD83D\uDCBD|\uD83D\uDCBE|\uD83D\uDCBF|\uD83D\uDCC0|\uD83D\uDCC1|\uD83D\uDCC2|\uD83D\uDCC3|\uD83D\uDCC4|\uD83D\uDCC5|\uD83D\uDCC6|\uD83D\uDCC7|\uD83D\uDCC8|\uD83D\uDCC9|\uD83D\uDCCA|\uD83D\uDCCB|\uD83D\uDCCC|\uD83D\uDCCD|\uD83D\uDCCE|\uD83D\uDCCF|\uD83D\uDCD0|\uD83D\uDCD1|\uD83D\uDCD2|\uD83D\uDCD3|\uD83D\uDCD4|\uD83D\uDCD5|\uD83D\uDCD6|\uD83D\uDCD7|\uD83D\uDCD8|\uD83D\uDCD9|\uD83D\uDCDA|\uD83D\uDCDB|\uD83D\uDCDC|\uD83D\uDCDD|\uD83D\uDCDE|\uD83D\uDCDF|\uD83D\uDCE0|\uD83D\uDCE1|\uD83D\uDCE2|\uD83D\uDCE3|\uD83D\uDCE4|\uD83D\uDCE5|\uD83D\uDCE6|\uD83D\uDCE7|\uD83D\uDCE8|\uD83D\uDCE9|\uD83D\uDCEA|\uD83D\uDCEB|\uD83D\uDCEC|\uD83D\uDCED|\uD83D\uDCEE|\uD83D\uDCEF|\uD83D\uDCF0|\uD83D\uDCF1|\uD83D\uDCF2|\uD83D\uDCF3|\uD83D\uDCF4|\uD83D\uDCF5|\uD83D\uDCF6|\uD83D\uDCF7|\uD83D\uDCF9|\uD83D\uDCFA|\uD83D\uDCFB|\uD83D\uDCFC|\uD83D\uDD00|\uD83D\uDD01|\uD83D\uDD02|\uD83D\uDD03|\uD83D\uDD04|\uD83D\uDD05|\uD83D\uDD06|\uD83D\uDD07|\uD83D\uDD08|\uD83D\uDD09|\uD83D\uDD0A|\uD83D\uDD0B|\uD83D\uDD0C|\uD83D\uDD0D|\uD83D\uDD0E|\uD83D\uDD0F|\uD83D\uDD10|\uD83D\uDD11|\uD83D\uDD12|\uD83D\uDD13|\uD83D\uDD14|\uD83D\uDD15|\uD83D\uDD16|\uD83D\uDD17|\uD83D\uDD18|\uD83D\uDD19|\uD83D\uDD1A|\uD83D\uDD1B|\uD83D\uDD1C|\uD83D\uDD1D|\uD83D\uDD1E|\uD83D\uDD1F|\uD83D\uDD20|\uD83D\uDD21|\uD83D\uDD22|\uD83D\uDD23|\uD83D\uDD24|\uD83D\uDD25|\uD83D\uDD26|\uD83D\uDD27|\uD83D\uDD28|\uD83D\uDD29|\uD83D\uDD2A|\uD83D\uDD2B|\uD83D\uDD2C|\uD83D\uDD2D|\uD83D\uDD2E|\uD83D\uDD2F|\uD83D\uDD30|\uD83D\uDD31|\uD83D\uDD32|\uD83D\uDD33|\uD83D\uDD34|\uD83D\uDD35|\uD83D\uDD36|\uD83D\uDD37|\uD83D\uDD38|\uD83D\uDD39|\uD83D\uDD3A|\uD83D\uDD3B|\uD83D\uDD3C|\uD83D\uDD3D|\uD83D\uDD50|\uD83D\uDD51|\uD83D\uDD52|\uD83D\uDD53|\uD83D\uDD54|\uD83D\uDD55|\uD83D\uDD56|\uD83D\uDD57|\uD83D\uDD58|\uD83D\uDD59|\uD83D\uDD5A|\uD83D\uDD5B|\uD83D\uDD5C|\uD83D\uDD5D|\uD83D\uDD5E|\uD83D\uDD5F|\uD83D\uDD60|\uD83D\uDD61|\uD83D\uDD62|\uD83D\uDD63|\uD83D\uDD64|\uD83D\uDD65|\uD83D\uDD66|\uD83D\uDD67|\uD83D\uDDFB|\uD83D\uDDFC|\uD83D\uDDFD|\uD83D\uDDFE|\uD83D\uDDFF|\uD83D\uDE00|\uD83D\uDE01|\uD83D\uDE02|\uD83D\uDE03|\uD83D\uDE04|\uD83D\uDE05|\uD83D\uDE06|\uD83D\uDE07|\uD83D\uDE08|\uD83D\uDE09|\uD83D\uDE0A|\uD83D\uDE0B|\uD83D\uDE0C|\uD83D\uDE0D|\uD83D\uDE0E|\uD83D\uDE0F|\uD83D\uDE10|\uD83D\uDE11|\uD83D\uDE12|\uD83D\uDE13|\uD83D\uDE14|\uD83D\uDE15|\uD83D\uDE16|\uD83D\uDE17|\uD83D\uDE18|\uD83D\uDE19|\uD83D\uDE1A|\uD83D\uDE1B|\uD83D\uDE1C|\uD83D\uDE1D|\uD83D\uDE1E|\uD83D\uDE1F|\uD83D\uDE20|\uD83D\uDE21|\uD83D\uDE22|\uD83D\uDE23|\uD83D\uDE24|\uD83D\uDE25|\uD83D\uDE26|\uD83D\uDE27|\uD83D\uDE28|\uD83D\uDE29|\uD83D\uDE2A|\uD83D\uDE2B|\uD83D\uDE2C|\uD83D\uDE2D|\uD83D\uDE2E|\uD83D\uDE2F|\uD83D\uDE30|\uD83D\uDE31|\uD83D\uDE32|\uD83D\uDE33|\uD83D\uDE34|\uD83D\uDE35|\uD83D\uDE36|\uD83D\uDE37|\uD83D\uDE38|\uD83D\uDE39|\uD83D\uDE3A|\uD83D\uDE3B|\uD83D\uDE3C|\uD83D\uDE3D|\uD83D\uDE3E|\uD83D\uDE3F|\uD83D\uDE40|\uD83D\uDE45|\uD83D\uDE46|\uD83D\uDE47|\uD83D\uDE48|\uD83D\uDE49|\uD83D\uDE4A|\uD83D\uDE4B|\uD83D\uDE4C|\uD83D\uDE4D|\uD83D\uDE4E|\uD83D\uDE4F|\uD83D\uDE80|\uD83D\uDE81|\uD83D\uDE82|\uD83D\uDE83|\uD83D\uDE84|\uD83D\uDE85|\uD83D\uDE86|\uD83D\uDE87|\uD83D\uDE88|\uD83D\uDE89|\uD83D\uDE8A|\uD83D\uDE8B|\uD83D\uDE8C|\uD83D\uDE8D|\uD83D\uDE8E|\uD83D\uDE8F|\uD83D\uDE90|\uD83D\uDE91|\uD83D\uDE92|\uD83D\uDE93|\uD83D\uDE94|\uD83D\uDE95|\uD83D\uDE96|\uD83D\uDE97|\uD83D\uDE98|\uD83D\uDE99|\uD83D\uDE9A|\uD83D\uDE9B|\uD83D\uDE9C|\uD83D\uDE9D|\uD83D\uDE9E|\uD83D\uDE9F|\uD83D\uDEA0|\uD83D\uDEA1|\uD83D\uDEA2|\uD83D\uDEA3|\uD83D\uDEA4|\uD83D\uDEA5|\uD83D\uDEA6|\uD83D\uDEA7|\uD83D\uDEA8|\uD83D\uDEA9|\uD83D\uDEAA|\uD83D\uDEAB|\uD83D\uDEAC|\uD83D\uDEAD|\uD83D\uDEAE|\uD83D\uDEAF|\uD83D\uDEB0|\uD83D\uDEB1|\uD83D\uDEB2|\uD83D\uDEB3|\uD83D\uDEB4|\uD83D\uDEB5|\uD83D\uDEB6|\uD83D\uDEB7|\uD83D\uDEB8|\uD83D\uDEB9|\uD83D\uDEBA|\uD83D\uDEBB|\uD83D\uDEBC|\uD83D\uDEBD|\uD83D\uDEBE|\uD83D\uDEBF|\uD83D\uDEC0|\uD83D\uDEC1|\uD83D\uDEC2|\uD83D\uDEC3|\uD83D\uDEC4|\uD83D\uDEC5|\uD83C\uDDE8\uD83C\uDDF3|\uD83C\uDDE9\uD83C\uDDEA|\uD83C\uDDEA\uD83C\uDDF8|\uD83C\uDDEB\uD83C\uDDF7|\uD83C\uDDEC\uD83C\uDDE7|\uD83C\uDDEE\uD83C\uDDF9|\uD83C\uDDEF\uD83C\uDDF5|\uD83C\uDDF0\uD83C\uDDF7|\uD83C\uDDF7\uD83C\uDDFA|\uD83C\uDDFA\uD83C\uDDF8|\u0023\uFE0F\u20E3|\u0023\u20E3|\u0030\uFE0F\u20E3|\u0030\u20E3|\u0031\uFE0F\u20E3|\u0031\u20E3|\u0032\uFE0F\u20E3|\u0032\u20E3|\u0033\uFE0F\u20E3|\u0033\u20E3|\u0034\uFE0F\u20E3|\u0034\u20E3|\u0035\uFE0F\u20E3|\u0035\u20E3|\u0036\uFE0F\u20E3|\u0036\u20E3|\u0037\uFE0F\u20E3|\u0037\u20E3|\u0038\uFE0F\u20E3|\u0038\u20E3|\u0039\uFE0F\u20E3|\u0039\u20E3/g,b={path:s.ASSETS_PATH+"/images/emoji/",imgPrefix:"emoji_",imgExtension:".png"},c=function(a){for(var b=0,c=[],d=0,e=a.length;e>d;d++){var f=a.charCodeAt(d);if(0!=b){if(f>=56320&&57343>=f){var g=f,h=1024*(b-55296)+65536+(g-56320);c.push(h)}b=0}else f>=55296&&56319>=f?b=f:c.push(f)}return c},d=function(a){for(var b,d=[],e=c(a),f=0,g=e.length;g>f;f++)b=e[f].toString(16),d.push("0000".substr(b.length)+b);return d.join("_")};return function(c,e){return e=_.extend(b,e),c.replace(a,function(a){return'<img class="emoji" style="vertical-align:middle" src="'+e.path+e.imgPrefix+d(a)+e.imgExtension+'" />'})}}(),cutBadStr:function(a){return a?a.replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/"/g,"&#34;").replace(/'/g,"&#39;"):""},isMobilePhoneNum:function(a){return new RegExp("^(13[0-9]|15[0-9]|18[0-9])|14[7]\\d{8}|17[067]\\d{8}$").test(a)}}),s.util=v,c.exports=v});