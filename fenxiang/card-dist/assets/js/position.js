/**
 * 纷享资源脚本
 * @Author: 纷享网页前端部
 * @Date: 2014-11-03
 */
define(function(a,b,c){function d(a){a=i(a)||{},a.nodeType&&(a={element:a});var b=i(a.element)||j;if(1!==b.nodeType)throw new Error("posObject.element is invalid.");var c={element:b,x:a.x||0,y:a.y||0},d=b===j||"VIEWPORT"===b._id;return c.offset=function(){return k?{left:0,top:0}:d?{left:$(document).scrollLeft(),top:$(document).scrollTop()}:$(b).offset()},c.size=function(){var a=d?$(window):$(b);return{width:a.outerWidth(),height:a.outerHeight()}},c}function e(a){a.x=f(a.x,a,"width"),a.y=f(a.y,a,"height")}function f(a,b,c){if(a+="",a=a.replace(/px/gi,""),/\D/.test(a)&&(a=a.replace(/(?:top|left)/gi,"0%").replace(/center/gi,"50%").replace(/(?:bottom|right)/gi,"100%")),-1!==a.indexOf("%")&&(a=a.replace(/(\d+(?:\.\d+)?)%/gi,function(a,d){return b.size()[c]*(d/100)})),/[+\-*\/]/.test(a))try{a=new Function("return "+a)()}catch(d){throw new Error("Invalid position value: "+a)}return h(a)}function g(a){var b=a.offsetParent();b[0]===document.documentElement&&(b=$(document.body)),l&&b.css("zoom",1);var c=b[0]===document.body?{left:0,top:0}:b.offset();return c.top+=h(b.css("border-top-width")),c.left+=h(b.css("border-left-width")),c}function h(a){return parseFloat(a,10)||0}function i(a){return $(a)[0]}var j={_id:"VIEWPORT",nodeType:1},k=!1,l=$.browser.msie&&6==$.browser.version,m=a("position_core");m.pin=function(a,b){a=d(a),b=d(b);var c=$(a.element);"fixed"!==c.css("position")||l?(c.css("position","absolute"),k=!1):k=!0,e(a),e(b);var f=g(c),h=b.offset(),i=h.top+b.y-a.y-f.top,j=h.left+b.x-a.x-f.left;k&&"VIEWPORT"===b.element._id||c.css({left:j,top:i})},m.pinWithAnimate=function(a,b,c){a=d(a),b=d(b),c=_.extend({duration:400,easing:"swing"},c||{});var f=$(a.element);"fixed"!==f.css("position")||l?(f.css("position","absolute"),k=!1):k=!0,e(a),e(b);var h=g(f),i=b.offset(),j=i.top+b.y-a.y-h.top,m=i.left+b.x-a.x-h.left;k&&"VIEWPORT"===b.element._id||f.stop(!0,!0).animate({left:m,top:j},c)},c.exports=m});