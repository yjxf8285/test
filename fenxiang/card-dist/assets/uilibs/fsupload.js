define("uilibs/fsupload",["swfupload"],function(a,b,c){function d(a,b,c){try{var d="error.gif",e="";if(b===o.errorCode_QUEUE_LIMIT_EXCEEDED&&(e="You have attempted to queue too many files."),""!==e)return alert(e),void 0;switch(b){case o.QUEUE_ERROR.ZERO_BYTE_FILE:d="zerobyte.gif";break;case o.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:d="toobig.gif";break;case o.QUEUE_ERROR.ZERO_BYTE_FILE:case o.QUEUE_ERROR.INVALID_FILETYPE:default:alert(c)}j("images/"+d)}catch(f){this.debug(f)}}function e(a,b){try{b>0&&this.startUpload()}catch(c){this.debug(c)}}function f(a,b){try{var c=Math.ceil(100*(b/a.size)),d=new l(a,this.customSettings.upload_target);d.setProgress(c),100===c?(d.setStatus("Creating thumbnail..."),d.toggleCancel(!1,this)):(d.setStatus("Uploading..."),d.toggleCancel(!0,this))}catch(e){this.debug(e)}}function g(a,b){try{var c=new l(a,this.customSettings.upload_target);"FILEID:"===b.substring(0,7)?(j("thumbnail.php?id="+b.substring(7)),c.setStatus("Thumbnail Created."),c.toggleCancel(!1)):(j("images/error.gif"),c.setStatus("Error."),c.toggleCancel(!1),alert(b))}catch(d){this.debug(d)}}function h(a){try{if(this.getStats().files_queued>0)this.startUpload();else{var b=new l(a,this.customSettings.upload_target);b.setComplete(),b.setStatus("All images received."),b.toggleCancel(!1)}}catch(c){this.debug(c)}}function i(a,b,c){var d,e="error.gif";try{switch(b){case o.UPLOAD_ERROR.FILE_CANCELLED:try{d=new l(a,this.customSettings.upload_target),d.setCancelled(),d.setStatus("Cancelled"),d.toggleCancel(!1)}catch(f){this.debug(f)}break;case o.UPLOAD_ERROR.UPLOAD_STOPPED:try{d=new l(a,this.customSettings.upload_target),d.setCancelled(),d.setStatus("Stopped"),d.toggleCancel(!0)}catch(g){this.debug(g)}case o.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:e="uploadlimit.gif";break;default:alert(c)}j("images/"+e)}catch(h){this.debug(h)}}function j(a){var b=document.createElement("img");if(b.style.margin="5px",document.getElementById("thumbnails").appendChild(b),b.filters)try{b.filters.item("DXImageTransform.Microsoft.Alpha").opacity=0}catch(c){b.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}else b.style.opacity=0;b.onload=function(){k(b,0)},b.src=a}function k(a,b){var c=5,d=30;if(100>b)if(b+=c,b>100&&(b=100),a.filters)try{a.filters.item("DXImageTransform.Microsoft.Alpha").opacity=b}catch(e){a.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+b+")"}else a.style.opacity=b/100;100>b&&setTimeout(function(){k(a,b)},d)}function l(a,b){if(this.fileProgressID="divFileProgress",this.fileProgressWrapper=document.getElementById(this.fileProgressID),this.fileProgressWrapper)this.fileProgressElement=this.fileProgressWrapper.firstChild,this.fileProgressElement.childNodes[1].firstChild.nodeValue=a.name;else{this.fileProgressWrapper=document.createElement("div"),this.fileProgressWrapper.className="progressWrapper",this.fileProgressWrapper.id=this.fileProgressID,this.fileProgressElement=document.createElement("div"),this.fileProgressElement.className="progressContainer";var c=document.createElement("a");c.className="progressCancel",c.href="#",c.style.visibility="hidden",c.appendChild(document.createTextNode(" "));var d=document.createElement("div");d.className="progressName",d.appendChild(document.createTextNode(a.name));var e=document.createElement("div");e.className="progressBarInProgress";var f=document.createElement("div");f.className="progressBarStatus",f.innerHTML="&nbsp;",this.fileProgressElement.appendChild(c),this.fileProgressElement.appendChild(d),this.fileProgressElement.appendChild(f),this.fileProgressElement.appendChild(e),this.fileProgressWrapper.appendChild(this.fileProgressElement),document.getElementById(b).appendChild(this.fileProgressWrapper),k(this.fileProgressWrapper,0)}this.height=this.fileProgressWrapper.offsetHeight}var m=window,n=m.FS,o=a("swfupload");l.prototype.setProgress=function(a){this.fileProgressElement.className="progressContainer green",this.fileProgressElement.childNodes[3].className="progressBarInProgress",this.fileProgressElement.childNodes[3].style.width=a+"%"},l.prototype.setComplete=function(){this.fileProgressElement.className="progressContainer blue",this.fileProgressElement.childNodes[3].className="progressBarComplete",this.fileProgressElement.childNodes[3].style.width=""},l.prototype.setError=function(){this.fileProgressElement.className="progressContainer red",this.fileProgressElement.childNodes[3].className="progressBarError",this.fileProgressElement.childNodes[3].style.width=""},l.prototype.setCancelled=function(){this.fileProgressElement.className="progressContainer",this.fileProgressElement.childNodes[3].className="progressBarError",this.fileProgressElement.childNodes[3].style.width=""},l.prototype.setStatus=function(a){this.fileProgressElement.childNodes[2].innerHTML=a},l.prototype.toggleCancel=function(a,b){if(this.fileProgressElement.childNodes[0].style.visibility=a?"visible":"hidden",b){var c=this.fileProgressID;this.fileProgressElement.childNodes[0].onclick=function(){return b.cancelUpload(c),!1}}};var p=function(a){var b=new o(_.extend({upload_url:"#",file_post_name:"file",post_params:{},file_size_limit:"21 MB",file_upload_limit:"0",file_queue_error_handler:d,file_dialog_complete_handler:e,upload_progress_handler:f,upload_error_handler:i,upload_success_handler:g,upload_complete_handler:h,button_width:180,button_height:18,button_text:'<span class="button">Select Images <span class="buttonSmall">(2 MB Max)</span></span>',button_text_style:".button { font-family: Helvetica, Arial, sans-serif; font-size: 12pt; } .buttonSmall { font-size: 10pt; }",button_text_top_padding:0,button_text_left_padding:18,button_window_mode:o.WINDOW_MODE.TRANSPARENT,button_cursor:o.CURSOR.HAND,flash_url:n.BASE_PATH+"/html/fs/assets/swfupload/swfupload.swf",custom_settings:{upload_target:"divFileProgressContainer"},debug:!1},a||{}));this.core=b};_.extend(p.prototype,{destroy:function(){this.core.destroy()}}),c.exports=p});