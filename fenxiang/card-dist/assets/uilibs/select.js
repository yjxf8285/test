define("uilibs/select",["select_core"],function(a,b,c){function d(a,b){var c,d,e,f,g=[],h=[];for(c=0,e=a.length;e>c;c++){var i=a[c];i.selected?(i.selected=i.defaultSelected="true",h.push(c)):i.selected=i.defaultSelected="false",g.push(i)}if(h.length>0)for(h.pop(),d=0,f=h.length;f>d;d++)g[d].selected="false";return{select:g,classPrefix:b}}function e(a,b){var c;return c=$.isNumeric(a)?a:"string"==typeof a?b.index(b.parent().find(a)):b.index(a)}var f=window,g=f.FS;g.tpl;var h=a("select_core"),i=h.extend({attrs:{autoWidth:!0},initAttrs:function(a,b){h.superclass.initAttrs.call(this,a,b);var c=this.get("trigger");if("select"==c[0].tagName.toLowerCase()){var e=c.attr("name");e&&this.set("name",e),this.set("selectSource",c);var f='<a href="#" class="'+this.get("classPrefix")+'-trigger"></a>',g=$(f);this.set("trigger",g),c.after(g).hide(),this.model=convertSelect(c[0],this.get("classPrefix"))}else{var e=this.get("name");if(e){var i=$("input[name="+e+"]").eq(0);i[0]||(i=$('<input type="hidden" id="select-'+e+'" name="'+e+'" />').insertBefore(c)),this.set("selectSource",i)}this.model=d(this.model,this.get("classPrefix"))}},removeOption:function(a){var b=i.superclass.removeOption.apply(this,arguments),c=e(a,this.options),d=this.model.select;return d.splice(c,1),b},addOption:function(){i.superclass.removeOption.apply(this,["[data-value=temp]"]),i.superclass.addOption.apply(this,arguments)},render:function(){var a=this.get("autoWidth");return h.superclass.render.call(this),a&&this._setTriggerWidth(),this},_onRenderSelectedIndex:function(a){if(-1!=a){var b=this.options.eq(a),c=this.currentItem,d=b.attr("data-value");if(!c||b[0]!=c[0]){var e=this.get("selectSource");e&&(e[0].value=d),c&&c.attr("data-selected","false").removeClass(this.get("classPrefix")+"-selected"),b.attr("data-selected","true").addClass(this.get("classPrefix")+"-selected"),this.set("value",d);var f=this.get("trigger"),g=f.find("[data-role=trigger-content]");g.length?g.html(b.html()):f.is(":text,textarea,select")?f.val(b.text()):f.html(b.html()),this.currentItem=b}}}});c.exports=i});