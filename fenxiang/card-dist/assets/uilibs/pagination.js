define("uilibs/pagination",["widget"],function(a,b,c){var d=a("widget"),e=d.extend({attrs:{pageSize:45,totalSize:-1,visiblePageNums:7,activePageNumber:1,pageNums:{value:0,getter:function(){return this._pageNums}},style:"normal"},events:{"click .ui-pagination-num":"_numClick","click .ui-pagination-prev":"_prevClick","click .ui-pagination-next":"_nextClick"},setup:function(){var a=e.superclass.setup.apply(this,arguments);return this._setupPageNums(),a},render:function(){var a=e.superclass.render.apply(this,arguments);return this.element.addClass("ui-pagination fn-clear"),a},_prevClick:function(){var a=this.get("activePageNumber");a>1&&(a--,this.jump(a))},_nextClick:function(){var a=this.get("activePageNumber"),b=this._pageNums;b>a&&(a++,this.jump(a))},_numClick:function(a){var b=$(a.currentTarget),c=parseInt(b.text());b.hasClass("ui-pagination-active")||this.jump(c)},jump:function(a){this.set("activePageNumber",a),this.trigger("page",a)},show:function(){this.element.show()},hide:function(){this.element.hide()},destroy:function(){var a;return this.element.removeClass("ui-pagination"),a=e.superclass.destroy.apply(this,arguments)},_setupPageNums:function(){this._pageNums=Math.ceil(this.get("totalSize")/this.get("pageSize"))},_updateState:function(){var a=this.get("activePageNumber"),b=this.element,c=$(".ui-pagination-prev",b),d=$(".ui-pagination-next",b),e=$(".ui-pagination-num",b);e.removeClass("ui-pagination-active"),c.removeClass("ui-pagination-disabled"),d.removeClass("ui-pagination-disabled"),e.each(function(){var b=$(this);return parseInt(b.text())==a?(b.addClass("ui-pagination-active"),!1):void 0}),1==a&&c.addClass("ui-pagination-disabled"),a==this._pageNums&&d.addClass("ui-pagination-disabled"),e.length<=1?(c.hide(),d.hide(),e.addClass("ui-pagination-disabled")):(c.show(),d.show()),"simple"==this.get("style")&&$(".ui-pagination-num,.ui-pagination-ellipsis",b).hide()},_updateHtml:function(a){var b=$(this.element),c=this._pageNums,d=this.get("visiblePageNums"),e="",f=0,g=d-3,h=0,i=0,j=0;if(c>0){if(d>c)for(f=0;c>f;f++)e+='<li class="ui-pagination-item ui-pagination-num">'+(f+1)+"</li>";else{for(h=Math.floor(g/2),i=Math.ceil(g/2),a>1&&c>a&&(e='<li class="ui-pagination-item ui-pagination-num">'+a+"</li>"),j=a-h,2>j&&(j=2),f=a-1;f>=j;f--)e='<li class="ui-pagination-item ui-pagination-num">'+f+"</li>"+e;for(f++,f>2&&(e='<li class="ui-pagination-item ui-pagination-ellipsis">&#8230;</li>'+e),j=a+i,j>c-1&&(j=c-1),f=a+1;j>=f;f++)e=e+'<li class="ui-pagination-item ui-pagination-num">'+f+"</li>";f--,c-1>f&&(e+='<li class="ui-pagination-item ui-pagination-ellipsis">&#8230;</li>'),e='<li class="ui-pagination-item ui-pagination-num ui-pagination-first">1</li>'+e+'<li class="ui-pagination-item ui-pagination-num ui-pagination-last">'+c+"</li>"}e='<li class="ui-pagination-item ui-pagination-prev">上一页</li>'+e+'<li class="ui-pagination-item ui-pagination-next">下一页</li>',b.html('<ul class="ui-pagination-list fn-clear fn-right">'+e+"</ul>"),this._updateState()}else b.empty()},setTotalSize:function(a){var b=this.get("activePageNumber");this.set("totalSize",a),this._setupPageNums(),this.set("activePageNumber",0),this.set("activePageNumber",b)},reset:function(){var a=$(this.element);this.set("totalSize",-1),this.set("activePageNumber",1),a.empty()},_onRenderActivePageNumber:function(a){a>0&&this._updateHtml(a)},destroy:function(){var a;return this.element.empty(),a=e.superclass.destroy.apply(this,arguments)}});c.exports=e});