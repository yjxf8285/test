define("uilibs/select-colleague",["dialog","util","uilibs/pagination2"],function(a,b,c){var d=a("dialog"),e=a("util"),f=a("uilibs/pagination2"),g=d.extend({attrs:{title:"选择同事",content:"",multiSelect:!1,hasDeptTree:!1,width:1050,height:675,condition:{},defaultCondition:{queryType:0,isFirstChar:!1,keyword:"",circleID:-1,exceptEmployeeIDs:[],isStop:!1,pageSize:20,pageNumber:1},result:[]},setup:function(){var a=g.superclass.setup.apply(this,arguments);this.set("content",this._getTemplate());var b=_.extend(this.get("condition"),this.get("defaultCondition"));return this.set("condition",b),a},render:function(){var a=g.superclass.render.apply(this,arguments);return this._initOthers(),a},hide:function(){var a=g.superclass.hide.apply(this,arguments);return a},show:function(){var a=g.superclass.show.apply(this,arguments);return this._getData(),a},events:{"click .fs-col-select-search-button":"_onButtonClick","click .fs-col-select-button-group1":"_onWorkingButtonClick","mouseover .fs-col-select-button-group1":"_onButtonGroupMouseOver","mouseout .fs-col-select-button-group1":"_onButtonGroupMouseOut","click .fs-col-select-button-group2":"_onLeaveButtonClick","mouseover .fs-col-select-button-group2":"_onButtonGroupMouseOver","mouseout .fs-col-select-button-group2":"_onButtonGroupMouseOut","click .fs-col-select-colleague":"_onColleageClick","mouseover .fs-col-select-colleague":"_onColleageMouseOver","mouseout .fs-col-select-colleague":"_onColleageMouseOut"},_initOthers:function(){var a=this;a.pagination=new f({element:$(".fs-col-select-result-pagination",a.element),pageSize:a.get("condition").pageSize,totalSize:0,activePageNumber:1}),a.pagination.on("page",function(b){var c=a.get("condition");c.pageNumber=b,a.set("condition",c),a._getData(c)})},_getData:function(a){var b=this.get("defaultCondition");a&&(b=_.extend(b,a));var c=this;e.api({url:"/Employee/GetEmployeesForSearch",type:"get",data:b,success:function(a){a.success&&c._getColleagueHtml(a.value.employees,a.value.totalCount)}})},_getTemplate:function(){var a="",b=this.get("title");return a+="<div class = 'fs-col-select-title'>"+b+"</div>",a+="<div class = 'fs-col-select-content'>"+this._getContent()+"</div>",a+="<div class = 'fs-col-select-footer'>footer</div>"},_getContent:function(){var a="";return a+="<div class ='fs-col-select-tree-container fn-left'>"+this._getTreeHtml()+"</div>",a+="<div class = 'fs-col-select-search-container fn-right fn-clear'>"+this._getSearchHtml()+"</div>"},_getTreeHtml:function(){var a="";return this.get("hasDeptTree"),a},_getSearchHtml:function(){var a="<div class = 'fs-col-select-search-title-container fn-clear'><div class = 'fs-col-select-display-all fn-left'><button class='button-blue'>显示全部</button></div>";return a+="<div class = 'fs-col-select-search-box fn-left'><input class = 'fs-col-select-search-input' placeholder='按姓名搜索'/><div class = 'fs-col-select-search-button fn-right'><div class = 'fs-col-select-search-icon'></div></div></div>",a+="<div class = 'fn-right fn-clear'><button class = 'fs-col-select-button-group1'>在职</button><button class = 'fs-col-select-button-group2'>离职</button></div></div>",a+="<div class = 'fs-col-select-result-container fn-clear'></div><div class = 'fs-col-select-result-pagination fn-right fn-clear'></div>"},_getColleagueHtml:function(a,b){var c="";return a?(this.pagination.get("totalSize")!=b&&this.pagination.setTotalSize(b),$(".fs-col-select-result-container",this.element).empty(),_.each(a,function(a){c+="<div class = 'fs-col-select-colleague fn-left fn-clear' data-value = '"+a.employeeID+"' data-name ='"+a.name+"'><img src ='"+e.getAvatarLink(a.profileIamge,"4")+"' class = 'fs-col-select-colleague-img' data-value = '"+a.employeeID+"' data-name ='"+a.name+"' />&nbsp;&nbsp;"+a.name+"</div>"}),$(".fs-col-select-result-container",this.element).html(c),void 0):c},_onButtonClick:function(){var a=this.get("condition");a.keyword=$(".fs-col-select-search-input",this.element).val(),this.set("condition",a),this._getData(a)},_onWorkingButtonClick:function(a){var b=this.get("condition");b.isStop&&(b.isStop=!1,$(a.currentTarget).hasClass("fs-col-select-button-group-selected")||$(a.currentTarget).addClass("fs-col-select-button-group-selected"),$(".fs-col-select-button-group2",this.element).hasClass("fs-col-select-button-group-selected")&&$(".fs-col-select-button-group2").removeClass("fs-col-select-button-group-selected"),this.set("condition",b),this._getData(b))},_onLeaveButtonClick:function(a){var b=this.get("condition");b.isStop||(b.isStop=!0,$(a.currentTarget).hasClass("fs-col-select-button-group-selected")||$(a.currentTarget).addClass("fs-col-select-button-group-selected"),$(".fs-col-select-button-group1",this.element).hasClass("fs-col-select-button-group-selected")&&$(".fs-col-select-button-group1").removeClass("fs-col-select-button-group-selected"),this.set("condition",b),this._getData(b))},_onButtonGroupMouseOver:function(a){$(a.currentTarget).hasClass("fs-col-select-button-group-active")||$(a.currentTarget).addClass("fs-col-select-button-group-active")},_onButtonGroupMouseOut:function(a){$(a.currentTarget).hasClass("fs-col-select-button-group-active")&&$(a.currentTarget).removeClass("fs-col-select-button-group-active")},_onColleageClick:function(){this.get("multiSelect")},_onColleageMouseOver:function(a){!$(a.currentTarget).hasClass("fs-col-select-colleague-active")&&$(a.currentTarget).hasClass("fs-col-select-colleague")&&$(a.currentTarget).addClass("fs-col-select-colleague-active")},_onColleageMouseOut:function(a){$(a.currentTarget).hasClass("fs-col-select-colleague-active")&&$(a.currentTarget).removeClass("fs-col-select-colleague-active")}});c.exports=g});