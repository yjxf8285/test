define("uilibs/pagination2",["widget","$"],function(a,b,c){var d=a("widget"),e=a("$"),f=d.extend({attrs:{pageSize:10,totalSize:-1,activePageNumber:1,pageNums:{value:0,getter:function(){return this._pageNums}}},events:{"click .fs-pagination-prev":"_prevClick","click .fs-pagination-next":"_nextClick","click .fs-pagination-select":"_showDropDown","mouseover .fs-pagination-select-option":"_onMouseover","mouseout .fs-pagination-select-option":"_onMouseout","click .fs-pagination-select-option":"_numClick"},setup:function(){var a=f.superclass.setup.apply(this,arguments);return this._setupPageNums(),this._setHtml(),this._setEvent(),a},render:function(){var a=f.superclass.render.apply(this,arguments);return this._setHtml(),a},_setupPageNums:function(){var a=this.get("totalSize"),b=this.get("pageSize"),c=this.get("activePageNumber");this._pageNums=Math.ceil(this.get("totalSize")/this.get("pageSize")),this.set("from",(c-1)*b+1),b*c>a?this.set("to",a):this.set("to",this.get("from")+b-1),this._updateStyle(c)},_prevClick:function(){var a=this.get("activePageNumber");a>1&&(a--,this.jump(a))},_nextClick:function(){var a=this.get("activePageNumber"),b=this._pageNums;b>a&&(a++,this.jump(a))},_numClick:function(a){var b=e(a.currentTarget),c=parseInt(b.val());this.jump(c)},_showDropDown:function(a){var b=e(".fs-pagination-option-container",this.element).height();if(Math.abs(e(window).scrollTop()+e(window).height()-e(a.target).offset().top)>=b)e(".fs-pagination-option-container",this.element).css("margin-top","1px");else{var c=b+35;e(".fs-pagination-option-container",this.element).css("margin-top","-"+c+"px")}e(".fs-pagination-option-container",this.element).length>0&&e(".fs-pagination-option-container",this.element).show()},_onMouseover:function(a){e(a.target).hasClass("fs-pagination-option-active")||e(a.target).addClass("fs-pagination-option-active")},_onMouseout:function(a){e(a.target).hasClass("fs-pagination-option-active")&&e(a.target).removeClass("fs-pagination-option-active")},jump:function(a,b){this.set("activePageNumber",a),this._updateStyle(a),b||this.trigger("page",a)},_updateStyle:function(a){var b=this.get("pageSize"),c=this.get("totalSize"),d=this.get("activePageNumber");this.set("from",(a-1)*b+1),b*d>c?this.set("to",c):this.set("to",this.get("from")+b-1),1>c?this.element.hide():this.element.show(),e(".fs-pagination-from",this.element).text(this.get("from")),e(".fs-pagination-to",this.element).text(this.get("to")),e(".fs-pagination-select-title",this.element).text("第"+a+"页"),1!=a||e(".fs-pagination-prev",this.element).hasClass("fs-pagination-button-disable")||e(".fs-pagination-prev",this.element).addClass("fs-pagination-button-disable"),1!=a&&e(".fs-pagination-prev",this.element).hasClass("fs-pagination-button-disable")&&e(".fs-pagination-prev",this.element).removeClass("fs-pagination-button-disable"),a!=this._pageNums||e(".fs-pagination-next",this.element).hasClass("fs-pagination-button-disable")||e(".fs-pagination-next",this.element).addClass("fs-pagination-button-disable"),a!=this._pageNums&&e(".fs-pagination-next",this.element).hasClass("fs-pagination-button-disable")&&e(".fs-pagination-next",this.element).removeClass("fs-pagination-button-disable"),e(".fs-pagination-option-selected",this.element).removeClass("fs-pagination-option-selected"),e("[value="+a+"]",this.element).addClass("fs-pagination-option-selected")},show:function(){this.element.show()},hide:function(){this.element.hide()},_setHtml:function(){var a=e(this.element),b=this._pageNums,c="",d="",f=this.get("from"),g=this.get("to"),h=this.get("activePageNumber"),i=this.get("totalSize");this.get("pageSize"),c+="<span>第</span><span class = 'fs-pagination-from'>"+f+"</span><span>-</span><span class = 'fs-pagination-to'>"+g+"</span><span>项</span>",c+="，<span>共</span><span class = 'fs-pagination-total'>"+i+"</span><span>项</span>&nbsp;&nbsp;",c+=1==h?"<span class = 'fs-pagination-prev fs-pagination-button-disable' title='上一页'><</span>":"<span class = 'fs-pagination-prev' title='上一页'><</span>",d=this._setOptions(b),c+="&nbsp;&nbsp;<span class = 'fs-pagination-select'><span class = 'fs-pagination-select-title-container'><span class = 'fs-pagination-select-title'>第"+h+"页</span>&nbsp;&nbsp;<span class = 'fs-pagination-select-drop'>&nbsp;</span></span>",c+="<div class = 'fn-hide fs-pagination-option-container'><ul>"+d+"</ul></div></span>&nbsp;&nbsp;",c+=h==b?"<span class = 'fs-pagination-next fs-pagination-button-disable' title='下一页'>></span>":"<span class = 'fs-pagination-next' title='下一页'>></span>",a.html(c)},_setEvent:function(){e(document).on("click",function(a){e(a.target).is(".fs-pagination-select-title-container")||e(a.target).is(".fs-pagination-select-title")||e(a.target).is(".fs-pagination-select-drop")||e(".fs-pagination-option-container",this.element).hide()})},_setOptions:function(a){for(var b="",c=this.get("activePageNumber"),d=1;a>=d;d++)b+=d==c?"<li class = 'fs-pagination-select-option fs-pagination-option-selected' value = "+d+">第"+d+"页</li>":"<li class = 'fs-pagination-select-option' value = "+d+">第"+d+"页</li>";return b},setTotalSize:function(a,b){var c=e(this.element);this.set("totalSize",a),1>a?c.hide():c.show(),this._setupPageNums(),e(".fs-pagination-total",this.element).text(a);var d=this._setOptions(this._pageNums);e(".fs-pagination-option-container ul").html(d);var f=this.get("activePageNumber");b&&f!=b&&(this.set("activePageNumber",b),f>this._pageNums&&this.set("activePageNumber",this._pageNums),1>f&&this.set("activePageNumber",1),f=this.get("activePageNumber"),this._updateStyle(f)),f>this._pageNums&&(this.set("activePageNumber",this._pageNums),f=this.get("activePageNumber"),this._updateStyle(f)),1>f&&(this.set("activePageNumber",1),f=this.get("activePageNumber"),this._updateStyle(f))},reset:function(){this.set("activePageNumber",1),this.set("totalSize",0),this._setupPageNums()},getCurrentPageNum:function(){return this.get("activePageNumber")||1},destroy:function(){var a;return a=f.superclass.destroy.apply(this,arguments),this.element&&this.element.empty(),e(document).unbind(),a}});c.exports=f});