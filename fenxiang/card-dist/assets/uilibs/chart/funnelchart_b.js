define("uilibs/chart/funnelchart_b",["raphael","./chart-helper"],function(a){var b=a("raphael");a("./chart-helper");var c=function(){this._init_.apply(this,arguments)};return c.prototype={_init_:function(a,b){this.opts=a,this.element=$(a.element),this.render(a.info,b)},render:function(a,c){var d=this.element,e=this.svgelement={};this.info=a,a.fontsize=13;var f=a.series,g=f.data,h=Math.PI/3,i=a.width-a.rightpadding,j=i*Math.tan(h)/2;if(a.height){var k=a.toppadding+a.bottompadding+j;a.height<k?a.height=k:a.toppadding=a.toppadding+(a.height-k)/2}else a.height=a.toppadding+a.bottompadding+j;var l,m=0,n=a.toppadding,o=this.paper=b(d[0],a.width,a.height),p=i;e.cube=o.set(),e.line=o.set(),e.labels=o.set();for(var q=0;q<g.length;q++)if(q!==g.length-1){var r=j/g.length,s=r/Math.tan(h);l=o.path(["M",m,n,"L",m+p,n,"L",m+p-s,n+r,"L",m+s,n+r,"L",m,n]).attr({stroke:"#fff",fill:"#bbbbbb"}),e.cube.push(l),function(){var b=Math.round(m+p-s/2)+4.5,c=Math.round(n+r/2)+.5,d=a.width-122,g=c,h=o.text(d,g,f.data[q][0]).attr({"text-anchor":"start",fill:"#bbbbbb","font-size":a.fontsize}),i=o.path(["M",b,c,"L",d-4.5,g]).attr({stroke:"#bbbbbb","font-size":a.fontsize});e.labels.push(h),e.line.push(i)}(),m+=s,n+=r,p-=2*s}else{var r=j/g.length,l=o.path(["M",m,n,"L",m+p,n,"L",m+p,n+r,"L",m,n+r,"L",m,n]).attr({stroke:"#fff",fill:"#bbbbbb"});e.cube.push(l),function(){var b=Math.round(m+p)+4.5,c=Math.round(n+r/2)+.5,d=a.width-120,f=c,g=o.path(["M",b,c,"L",d-4.5,f]).attr({stroke:"#bbbbbb","font-size":a.fontsize}),h=o.text(d,f,a.series.data[q][0]).attr({"text-anchor":"start",fill:"#bbbbbb","font-size":a.fontsize});e.labels.push(h),e.line.push(g)}()}this.activeStage(c)},activeStage:function(a){for(var b=this.svgelement,c=this.info,d="#d8d8d8",e=0;e<b.line.length;e++)d=e==a?c.series.data[e][1]:"#d8d8d8",b.labels[e].attr({fill:d}),b.line[e].attr({stroke:d}),b.cube[e].attr({fill:d})},destory:function(){this.paper&&this.paper.remove()}},c});