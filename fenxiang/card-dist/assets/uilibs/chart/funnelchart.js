define("uilibs/chart/funnelchart",["raphael","./chart-helper"],function(a){var b=a("raphael");a("./chart-helper");var c=function(a){a=_.extend({element:null,autoRender:!0},a||{}),a.info={width:820,height:540,leftpadding:80,toppadding:60,bottompadding:60,rightpadding:60,title:"Sales funnel",series:{name:"Unique users",data:[["Website visits",400,"#1ed2dc"],["Downloads",332,"#277ebf"],["Requested price list",260,"#a434a6"],["Invoice sent",150,"#ee5582"],["Finalized",80,"#f3674c"]]}},this.opts=a,this.element=$(a.element),this.paper=b(this.element[0],a.info.width,a.info.height),this.init()};return _.extend(c.prototype,{init:function(){var a=this.opts;a.autoRender&&this.render()},render:function(a){this.element,this.info=a||this.opts.info,this.svgelement={};var a=this.info,b=this.paper,c=a.leftpadding,d=a.toppadding,e=(a.width-a.leftpadding-a.rightpadding)/2,f=e/a.series.data[0][1];a.funnelWidth=e,a.funnelUnit=f;for(var g,h=b.set(),i=a.series.data,j=0;j<i.length;j++)if(j!==i.length-1){var k=i[j][1]*a.funnelUnit,l=i[j+1][1]*a.funnelUnit,m=(k-l)/2,n=m*Math.tan(1/3*Math.PI);g=b.path(["M",c,d,"L",c+k,d,"L",c+k-m,d+n,"L",c+m,d+n,"L",c,d]).attr({stroke:"#fff",fill:i[j][2]}),h.push(g),c+=m,d+=n}else{var o=i[j][1]*a.funnelUnit;g=b.path(["M",c,d,"L",c+o,d,"L",c+o,d+o,"L",c,d+o,"L",c,d]).attr({stroke:"#fff",fill:i[j][2]}),h.push(g)}},destroy:function(){}}),c});