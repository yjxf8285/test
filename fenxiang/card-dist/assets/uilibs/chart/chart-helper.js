define("uilibs/chart/chart-helper",["raphael"],function(a){var b=a("raphael");b.fn.transNumber=function(a,b){if(0==a||a){void 0==b&&(b=!0),b&&(a=Math.round(a));var c=parseInt(a).toString(),d=c.length;if(3>=d)return c;var e,f=d%3;return e=f>0?c.slice(0,f)+","+c.slice(f,d).match(/\d{3}/g).join(","):c.slice(f,d).match(/\d{3}/g).join(",")}},b.fn.transNum=function(a,b){var a=parseFloat(a),c=Math.round(a*Math.pow(10,b))/Math.pow(10,b),d=c.toString(),e=d.indexOf(".");for(0>e&&(e=d.length,d+=".");d.length<=e+2;)d+="0";var f=this.transNumber(d,!1);return d=f+d.slice(d.indexOf("."))},b.fn.drawGrid=function(a,b,c,d,e,f,g){g=g||"#000";for(var h=["M",Math.round(a)+.5,Math.round(b)+.5,"L",Math.round(a+c)+.5,Math.round(b)+.5,Math.round(a+c)+.5,Math.round(b+d)+.5,Math.round(a)+.5,Math.round(b+d)+.5,Math.round(a)+.5,Math.round(b)+.5],i=d/f,j=c/e,k=1;f>k;k++)h=h.concat(["M",Math.round(a)+.5,Math.round(b+k*i)+.5,"H",Math.round(a+c)+.5]);for(var l=1;e>l;l++)h=h.concat(["M",Math.round(a+l*j)+.5,Math.round(b)+.5,"V",Math.round(b+d)+.5]);return this.path(h.join(",")).attr({stroke:g})},b.fn.drawCoord=function(a,b,c,d,e,f,g,h){g=g||"#666",h=h||"#ccc";var i=6,j=d/f,k=c/e,l=[],m=[];l=l.concat(["M",Math.round(a)+.5,Math.round(b)+.5,"L",Math.round(a+c)+.5,Math.round(b)+.5]);for(var n=0;e>=n;n++)l=l.concat(["M",Math.round(a+n*k)+.5,Math.round(b)+.5,"V",Math.round(b+i)+.5]);l=l.concat(["M",Math.round(a)+.5,Math.round(b)+.5,"L",Math.round(a)+.5,Math.round(b-d)+.5]);for(var o=0;f>=o;o++)l=l.concat(["M",Math.round(a)+.5,Math.round(b-o*j)+.5,"H",Math.round(a-i)+.5]);for(n=1;f>=n;n++)m=m.concat(["M",Math.round(a)+.5,Math.round(b-n*j)+.5,"H",Math.round(a+c)+.5]);var p=this.rect(a,b-d,c,d).attr({fill:"#efefef",stroke:"none"}),q=this.path(m.join(",")).attr({stroke:h}),r=this.path(l.join(",")).attr({stroke:g});return this.set().push(p,q,r)},b.fn.line=function(a){a.length;for(var b,c=0;c<a.length;c++){var d=a[c][0],e=a[c][1];b=c?b.concat(["L",d,e]):["M",d,e]}return this.path(b)},b.fn.wave=function(a){function b(a,b,c,d,e,f){var g=(c-a)/2,h=(e-c)/2,i=Math.atan((c-a)/Math.abs(d-b)),j=Math.atan((e-c)/Math.abs(d-f)),i=d>b?Math.PI-i:i,j=d>f?Math.PI-j:j,k=Math.PI/2-(i+j)%(2*Math.PI)/2,l=g*Math.sin(k+i),m=g*Math.cos(k+i),n=h*Math.sin(k+j),o=h*Math.cos(k+j);return{x1:c-l,y1:d+m,x2:c+n,y2:d+o}}a.length;for(var c,d,e,f,g,h,i,j,k=0;k<a.length;k++)if(k)if(k!==a.length-1){f=a[k-1][0],g=a[k-1][1],d=a[k][0],e=a[k][1],h=a[k+1][0],i=a[k+1][1];var j=b(f,g,d,e,h,i);c=c.concat([j.x1,j.y1,d,e,j.x2,j.y2])}else d=a[k],c=c.concat([]);else d=a[k][0],e=a[k][1],c=["M",d,e,"C",d,e];return this.path(c)},b.fn.wavea=function(a,b,c){var d,e=a[0][0],f=a[0][1],g=a[1][0],h=a[1][1],i=e+(g-e)/2,j=f,k=g,l=h+(f-h)/2;if(b){c||(c=16);var m,n,o=c*Math.sin(1/3*Math.PI);return f>h?(n=this.path(["M",e,f,"C",i,j,k,l,g,h+o]),m=this.vectop([g,h+o],c)):(n=this.path(["M",e,f,"C",i,j,k,l,g,h-o]),m=this.vecbottom([g,h-o],c)),this.set().push(n,m)}return d=["M",e,f,"C",i,j,k,l,g,h],this.path(d)},b.fn.vec=function(a,b,c){var d=["M"],e=a[0],f=a[1],g=Math.sin(1/3*Math.PI)*b,h=[],i=[],j=[];switch(c){case"left":h[0]=e-g,h[1]=f,i[0]=e,i[1]=f+b/2,j[0]=e,j[1]=f-b/2;break;case"right":h[0]=e+g,h[1]=f,i[0]=e,i[1]=f+b/2,j[0]=e,j[1]=f-b/2;break;case"top":h[0]=e,h[1]=f-g,i[0]=e+b/2,i[1]=f,j[0]=e-g/2,j[1]=f;break;case"bottom":h[0]=e,h[1]=f+g,i[0]=e+b/2,i[1]=f,j[0]=e-g/2,j[1]=f}return d=d.concat(h,["L"],i,["L"],j,["Z"]),this.path(d)},b.fn.vecleft=function(a,b){return this.vec(a,b,"left")},b.fn.vecright=function(a,b){return this.vec(a,b,"right")},b.fn.vectop=function(a,b){return this.vec(a,b,"top")},b.fn.vecbottom=function(a,b){return this.vec(a,b,"bottom")},b.fn.popup=function(a,b,c,d,e){var f=this.set(),c=this.text(a,b,c).attr({fill:"#444","font-size":12}),g=c.getBBox(),h=g.width+12,i=g.height+10,j=this.rect(a,b,h,i,2).attr({fill:"#fff",stroke:"#ccc","stroke-width":1});d=d||"left-top",d=d.split("-");var k=[];switch(k[0]=d[0],k[1]=d[1],k[0]){case"left":c.attr("x",a-h/2),j.attr("x",a-h);break;case"right":c.attr("x",a+h/2),j.attr("x",a);break;case"middle":c.attr("x",a),j.attr("x",a-h/2)}switch(k[1]){case"top":c.attr("y",b-i/2),j.attr("y",b-i);break;case"bottom":c.attr("y",b+i/2),j.attr("y",b);break;case"middle":"middle"==k[0]?(c.attr("y",b-i/2),j.attr("y",b-i)):(c.attr("y",b),j.attr("y",b-i/2))}j.insertBefore(c);var e=e||"middle";switch(e){case"start":c.attr("text-anchor","start").translate(-h/2+6,0)}return f.push(j).push(c),f[0].data("vector",d.join("-")),f},b.st.lanimate=function(a,b,c,d){var e=this[1],f=this[0],c=c||e.attr("text"),d=d||260,g=f.paper,h=g.text(a,b,c).attr({fill:"#fff"}).hide(),i=h.getBBox(),j=i.width+12,k=i.height+10;f.animate({x:a,y:b,width:j,height:k},d),e.attr("text",c).animate({x:a+j/2,y:b+k/2},d)},b.st.ltranslate=function(a,b,c,d,e){var f=this[1],g=this[0],c=c||f.attr("text");f.attr({x:a,y:b,text:c});var h=f.getBBox(),i=h.width+12,j=h.height+10;g.attr({x:a,y:b,width:i,height:j,r:2}),d=d||this[0].data("vector"),d=d.split("-");var k=[];switch(k[0]=d[0],k[1]=d[1],k[0]){case"left":f.attr("x",a-i/2),g.attr("x",a-i);break;case"right":f.attr("x",a+i/2),g.attr("x",a);break;case"middle":f.attr("x",a),g.attr("x",a-i/2)}switch(k[1]){case"top":f.attr("y",b-j/2),g.attr("y",b-j);break;case"bottom":f.attr("y",b+j/2),g.attr("y",b);break;case"middle":"middle"==k[0]?(f.attr("y",b-j/2),g.attr("y",b-j)):(f.attr("y",b),g.attr("y",b-j/2))}var e=e||f.attr("text-anchor");switch(f.transform(""),e){case"start":f.attr("text-anchor","start").translate(-i/2+6,0)}return g.insertBefore(f),this}});