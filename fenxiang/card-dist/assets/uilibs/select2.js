define("uilibs/select2",["util","events","$"],function(a,b,c){var d=window,e=d.FS;e.tpl;var f=(a("util"),a("events")),g=a("$"),h=function(a){a=_.extend({element:null,options:[],defaultOption:null,autoRender:!0},a||{}),this.opts=a,this.element=g(a.element),this.options=a.options,this.init()};_.extend(h.prototype,{init:function(){var a=this.opts;a.defaultOption?this.selected=a.defaultOption:this.options&&(this.selected=this.options[0]),a.autoRender&&this.render()},_bindEvents:function(){var a=this;this.element.on("click",".fs-select",function(){g(".fs-select-option-container",this.element).length>0&&g(".fs-select-option-container",this.element).toggle()}),this.element.on("click","ul li",function(){var b={value:g(this).val(),text:g(this).text()};a.change(b)}),this.element.on("mouseover","ul li",function(){g(this).hasClass("fs-select-active")||g(this).addClass("fs-select-active")}),this.element.on("mouseout","ul li",function(){g(this).hasClass("fs-select-active")&&g(this).removeClass("fs-select-active")}),g(document).on("click",function(a){g(a.target).is(".fs-select")||g(a.target).is(".fs-select-text")||g(a.target).is(".fs-select-drop")||g(".fs-select-option-container",this.element).hide()})},change:function(a){this.lastSelected=this.selected,this.selected=a,this._changeSelectedStyle(this.lastSelected,this.selected),g(".fs-select-option-container",this.element).hide(),this.trigger("selected",a)},_changeSelectedStyle:function(a,b){g("[value="+a.value+"]",this.element).hasClass("fs-select-selected")&&g("[value="+a.value+"]",this.element).removeClass("fs-select-selected"),g("[value="+b.value+"]",this.element).hasClass("fs-select-selected")||g("[value="+b.value+"]",this.element).addClass("fs-select-selected")},render:function(){var a=this.element,b="",c=this;_.each(this.options,function(a){b+=c.selected.value==a.value?"<li class = 'fs-select-option fs-select-selected' value = "+a.value+">"+a.text+"</li>":"<li class = 'fs-select-option' value = "+a.value+">"+a.text+"</li>"}),a.html("<div class = 'fs-select-container'><div class = 'fn-right fn-clear fs-select'><div class = 'fn-left fs-select-text'>更多操作</div><div class = 'fn-right fn-clear fs-select-drop'>&nbsp;</div></div></div><div class = 'fn-hide fs-select-option-container'><ul>"+b+"</ui></div>"),this._bindEvents()},destroy:function(){this.element.off(),this.element.empty(),this.options=[],this.selected=null,this.lastSelected=null}}),f.mixTo(h),c.exports=h});