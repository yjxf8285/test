/**
 * 纷享页面逻辑
 * @Author: 纷享网页前端部
 * @Date: 2014-09-02
 */
define("tpls/search/shortmessage/shortmessage",["util","modules/fs-qx/fs-showsession-list","../search-common","filter","moment","../search-common.html","autocomplete","events"],function(a,b){var c=window,d=c.FS,e=d.tpl;e.store,e.event;var f=a("util"),g=a("modules/fs-qx/fs-showsession-list"),h=a("../search-common");f.tplRouterReg("#shortmessage/showsession/=/:id-:value"),b.init=function(){var a=b.tplEl,c=b.tplName,d=$(".tpl-l",a),e=$(".session-list",a),i=$(".session-list-pagination",a),j=$(".search-inp-s",a),k=h.init(a,c),l=new g({element:e,pagSelector:i,listPath:"/FeedSearch/GetShortMessagesForSearch",searchOpts:{},itemRenderCb:function(a,b){var c,d=a.$el,e=$(".fs-showsession-item-m",d),f=b.get("session");c=f.value3?"+展开该讨论组的对话":"+展开我与"+f.value1+"的对话",$('<a style="display:block;padding-top:10px;text-align: right;" class="to-session-l" href="#shortmessage/showsession/=/id-'+f.value+'" title="'+c+'">'+c+"</a>").appendTo(e)},listEmptyText:"没有符合条件的搜索结果"});k.on("search",function(a){var b=_.extend({feedType:0,keyword:_.str.trim(j.val()),feedAttachType:0},a);b.keyword.length>0&&(l.opts.defaultRequestData=b,l.reload())}),function(){var b=f.getTplQueryParams(),c=b?b.key:"";j.val(c).keyup(),$(".tpl-nav-l",d).eq(5).addClass("depw-menu-aon"),$(".all-employee",a).click(),$(".search-include-nav-list",$(".tpl-l",a)).show()}()}});