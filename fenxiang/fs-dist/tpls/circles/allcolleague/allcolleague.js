/**
 * 纷享页面逻辑
 * @Author: 纷享网页前端部
 * @Date: 2014-09-02
 */
define("tpls/circles/allcolleague/allcolleague",["util","modules/fs-employee/fs-employee-list","../circles-common","../circles-common.html"],function(a,b){var c=window,d=c.FS,e=d.tpl;e.event;var f=a("util"),g=a("modules/fs-employee/fs-employee-list"),h=a("../circles-common");b.init=function(){var a=b.tplEl,c=b.tplName,d=$(".employee-list",a),e=$(".employee-list-pagination",a),i=$(".filter",a),j=$(".search-wrap",a),k=$(".search-inp",a),l=$(".search-btn",a),m=$(".letter-wrapper",a),n=$(".working-status",a),o=$(".working-role",a),p=$(".cac_center_tcount",a),q=$(".title-summary",a);h.init(a,c);var r=function(){var b=f.getTplQueryParams(),c=b?b.id:"999999",d=f.getContactDataById(c,"g");$(".cac_center_tname",a).html(d.name),"999999"==c?q.html("这些是全公司的全部同事，包含和您在相同的部门和不同部门中的同事。"):q.html("这些是"+d.name+"的全部同事。")},s=new g({element:d,pagSelector:e,listPath:"/circle/getAllEmployees1",defaultRequestData:function(){var a=$(".depw-tabs-aon",m),b=a.attr("val"),c=($(".depw-tabs-aon",n).attr("val"),$(".depw-tabs-aon",o).attr("val")),d=!1,e=_.str.trim(k.val()),g=f.getTplQueryParams(),h=g?g.id:0;return"0"!=b&&(d=!0,e=b),{circleID:h,keyword:e,userRole:c,isStop:0,isExceptCurrentUser:!1,isFirstChar:d}},searchOpts:{inputSelector:k,btnSelector:l},listCb:function(a){a.success&&p.text(a.value.totalCount)}});s.loaded=!1,i.on("click","a",function(a){var b=$(this),c=b.closest(".filter");$("a",c).removeClass("depw-tabs-aon"),b.addClass("depw-tabs-aon"),$(".empty-h",j).click(),s.reload(),a.preventDefault()}),l.click(function(a){$("a",m).removeClass("depw-tabs-aon").eq(0).addClass("depw-tabs-aon"),s.reload(),a.preventDefault()}),s.load(),r()}});