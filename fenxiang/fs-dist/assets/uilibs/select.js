define("uilibs/select",["select_core","widget"],function(a,b,c){function d(a,b){var c,d,e,f,g=[],h=[];for(c=0,e=a.length;e>c;c++){var i=a[c];i.selected?(i.selected=i.defaultSelected="true",h.push(c)):i.selected=i.defaultSelected="false",g.push(i)}if(h.length>0)for(h.pop(),d=0,f=h.length;f>d;d++)g[d].selected="false";return{select:g,classPrefix:b}}var e=window,f=e.FS,g=f.tpl,h=(g.store,g.event),i=a("select_core"),j=a("widget"),k=i.extend({attrs:{autoWidth:!0},initAttrs:function(a,b){i.superclass.initAttrs.call(this,a,b);var c=this.get("trigger");if("select"==c[0].tagName.toLowerCase()){var e=c.attr("name");e&&this.set("name",e),this.set("selectSource",c);var f='<a href="#" class="'+this.get("classPrefix")+'-trigger"></a>',g=$(f);this.set("trigger",g),c.after(g).hide(),this.model=convertSelect(c[0],this.get("classPrefix"))}else{var e=this.get("name");if(e){var h=$("input[name="+e+"]").eq(0);h[0]||(h=$('<input type="hidden" id="select-'+e+'" name="'+e+'" />').insertBefore(c)),this.set("selectSource",h)}this.model=d(this.model,this.get("classPrefix"))}},render:function(){var a=this.get("autoWidth");return i.superclass.render.call(this),a&&this._setTriggerWidth(),this},_onRenderSelectedIndex:function(a){if(-1!=a){var b=this.options.eq(a),c=this.currentItem,d=b.attr("data-value");if(!c||b[0]!=c[0]){var e=this.get("selectSource");e&&(e[0].value=d),c&&c.attr("data-selected","false").removeClass(this.get("classPrefix")+"-selected"),b.attr("data-selected","true").addClass(this.get("classPrefix")+"-selected"),this.set("value",d);var f=this.get("trigger"),g=f.find("[data-role=trigger-content]");g.length?g.html(b.html()):f.is(":text,textarea,select")?f.val(b.text()):f.html(b.html()),this.currentItem=b}}}});h.on("switch",function(){$(".ui-select").each(function(){j.query(this).hide()})}),c.exports=k});