/**
 * 纷享资源脚本
 * @Author: 纷享网页前端部
 * @Date: 2014-09-02
 */
define("jslibs/util",["overlay","mask","events","confirmbox","widget","dialog","placeholder","store","assets/html/helper.html","json","moment","$"],function(a,b,c){var d=a("overlay"),e=a("mask"),f=a("events"),g=a("confirmbox"),h=a("widget"),i=a("dialog"),j=a("placeholder"),k=a("store"),l=a("assets/html/helper.html"),m=a("json"),n=a("moment"),o=a("$"),p=window,q=p.FS,r=q.tpl,s=r.store,t={},u=o(l),v=PUBLISH_MODEL||"product";_.extend(t,{ajax:function(){var a,b=[];return function(c,f){var g,h,i;return c=o.extend({timeout:18e4},c||{}),f=o.extend({mask:!1,maskCls:"",keepMask:!1,errorAlertModel:"2",abortLast:!1,authorizedJump:!0},f||{}),f.abortLast&&_.each(b,function(a){a.requestPath==c.url&&a.xhr.abort()}),f.mask&&(f.mask===!0?a?a.show():(a=e,a.show()):(h=o(f.mask),g=new d({template:'<div class="fs-ajax-part-mask"></div>',width:h.outerWidth(),height:h.outerHeight(),zIndex:999,style:"border:1px solid red;color:green;",align:{selfXY:[0,0],baseElement:h,baseXY:[0,0]}}).show(),f.maskCls&&g.element.addClass(f.maskCls)),_.some(b,function(a){return a.requestPath==c.url?!0:void 0}))?void 0:(i=o.ajax(c),i.always(function(){var d,e=!1;_.each(b,function(a,b){a.globalMask&&"pending"==a.xhr.state()&&(e=!0),a.xhr===i&&(d=b)}),f.keepMask&&(e=!0),f.mask!==!0||e||a.hide(),"number"==typeof d&&b.splice(d,1),f.keepMask||g&&g.element.remove()&&g.destroy(),t.ajaxCallback(i,c,f)}),b.push({xhr:i,requestPath:c.url,globalMask:f.mask===!0?!0:!1}),i)}}(),api:function(a,b){var c,d,e,f,g,h,i,j;return b=o.extend({submitSelector:!1,autoPrependPath:!0},b||{}),b.submitSelector&&(i=o(b.submitSelector),j=i.html()),a=a||{},a.url?(b.autoPrependPath&&(a.url=q.API_PATH+a.url),d=a.apiCb||q.EMPTY_FN,e=a.success||q.EMPTY_FN,f=a.error||q.EMPTY_FN,g=a.complete||q.EMPTY_FN,a=_.extend({cache:!1,type:"post",dataType:"json",contentType:"application/json; charset=utf-8"},a,{success:function(a,b,c){return e.apply(this,[a,b,c])},error:function(){return f.apply(this,arguments)},complete:function(){return i&&i.removeClass("state-requesting").removeAttr("style").html(j),g.apply(this,arguments)}}),h=a.data,"post"==a.type&&h&&(a.data=m.stringify(h).replace(/\+/g,"%2B").replace(/\&/g,"%26")),i?i.hasClass("state-requesting")||(i.addClass("state-requesting").width(i.width()+35).html('<span class="icon-requesting"><img src="'+q.BLANK_IMG+'" alt="loading" />&nbsp;&nbsp;</span>'+j+"中"),c=t.ajax(a,b)):c=t.ajax(a,b),c):!1},getResponseData:function(a,b){var c;return c=200==a.status?"json"==b.dataType?m.parse(a.responseText):{success:!0,message:"success",value:a.responseText}:{success:!1,errorStatus:a.status,message:a.statusText}},ajaxCallback:function(a,b,c){var d=t.getResponseData(a,b);if(t.hideGlobalError(),!d.success){if(d.isAuthorized===!1&&c.authorizedJump)return location.href=q.BASE_PATH+"/login.aspx?auto=1",!1;if(_.isUndefined(d.errorStatus)){if(-1==d.statusCode)return t.showGlobalError("服务器连接异常，请确定您的网络连接状况"),void 0;c.errorAlertModel>1&&d.message&&d.message.length>0&&t.alert(d.message)}else 0!=d.errorStatus&&t.showGlobalError("服务器连接异常，请确定您的网络连接状况")}},showGlobalError:function(a){var b=o("#fs-service-error");0==b.length&&(b=o('<div id="fs-service-error"></div>'),b.html('<div class="error-message"></div><span class="close-btn">×</span>'),b.appendTo("body"),b.on("click",".close-btn",function(){b.hide()})),o(".error-message",b).html(a),b.css({"margin-left":-(b.width()/2)+"px"}).show()},hideGlobalError:function(){var a=o("#fs-service-error");a.hide()},getTplStore:function(a,b){return s[a]?s[a][b]:q.UNDEFINED},setTplStore:function(a,b){return s[a]=s[a]||{},_.extend(s[a],b)},clearTplStore:function(a,b){var c=s[a]||{};b?(c[b]=null,s[a]=c):s[a]=null},tplRouterReg:function(){var b,c=r.list,d=Backbone.Router.extend({routes:{"":"blank"},blank:function(){l("blank/blank.html","blank")}}),e=new d;r.navRouter=e,r.event=new f;var g=function(a){j(o("input,textarea",a))},h=function(a){t.clearTplStore(a)},k=function(a,b){var c=o(b),d=c.attr("tpltitle")||"纷享科技";r.event.trigger("switch",a,c),c.addClass("fs-tpl-active").show(),document.title=d,i.hideAll(),o(p).resize(),r.event.trigger("switched",a,c)},l=function(d,e){var f=o("#sub-tpl"),i=o(".sub-tpl-switch-mask",f),j=r.event;return b&&b.abort(),j.trigger("beforeswitch",e)?(0==i.length&&(i=o('<div class="sub-tpl-switch-mask"></div>'),i.css({position:"absolute",top:0,left:0,width:"100%",height:"100%","z-index":20}).hide().appendTo(f)),_.each(c,function(a,b){var c=a.el,d=a.isCached;if(d)c.removeClass("fs-tpl-active").hide();else{if(!j.trigger("beforeremove",b,c))return;c&&c.off()&&c.removeData()&&c.remove(),h(b),a.el=null,j.trigger("afterremove",b,c)}}),i.show(),c[e]&&c[e].isCached?(k(e,c[e].el),i.hide(),void 0):(b=t.ajax({url:q.TPL_PATH+"/"+d,type:"get",dataType:"html",success:function(b){var d,e=o(b),h=e.attr("tplname"),j=e.attr("js"),l=e.attr("css"),m=e.attr("iscached"),n=(c[h]?c[h].el:null,[]);_.each(c,function(a){a.el&&a.el.removeClass("fs-tpl-active").hide()}),c[h]={el:e,isCached:!1},"true"===m&&(c[h].isCached=!0),e.appendTo(f),g(e,h),d=h.split("-"),(_.isUndefined(j)||"true"===j)&&(j="tpls/"+d.join("/")+"/"+d[d.length-1]+".js"),(_.isUndefined(l)||"true"===l)&&(l="tpls/"+d.join("/")+"/"+d[d.length-1]+".css"),"false"!==l&&n.push(l),"false"!==j&&n.push(j),n.length>0?a.async(n,function(a,b){if(_.isUndefined(b)&&(b=a),b.tplName=h,b.tplEl=e,"development"==v)b.init();else try{b.init()}catch(c){}k(h,e),i.hide()}):(k(h,e),i.hide())}}),void 0)):!1};return function(a){var b;b="#"==a.slice(0,1)?o('<a href="'+a+'"></a>'):o(a),b.each(function(){var a,b,c,d=o(this),f=d.attr("href"),g="#",h=d.attr("navname");f=f.toLowerCase(),d.attr("href",f),f=f.slice(f.indexOf("#")+1),c=d.attr("router"),b=(c?c.slice(1):"")||f,-1!==f.indexOf("/=/")&&(f=f.slice(0,f.indexOf("/=/"))),a=f.split("/"),_.isUndefined(h)?h=a.join("-"):(h=h.toLowerCase(),d.attr("navname",h)),a[a.length]=a[a.length-1]+".html",g=a.join("/"),e.route(b,h,function(){l(g,h)})})}}(),asyncOrder:function(b,c){var d=0,e=[];b=[].concat(b);var f=function(){a.async(b[d],function(a){d==b.length-1?c(e):(d++,f()),e.push(a)})};f()},alert:function(a,b,c){var d,e;switch(c=_.extend({className:"fs-alert",title:" ",closeTpl:"×",content:u.filter(".fs-show").html(),zIndex:2e3,hasMask:!0,width:380,messageType:""},c||{}),c.messageType){case"info":d='<img class="icon-info icon-flag" src="'+q.BLANK_IMG+'" />',e="fs-alert-info-wrapper";break;case"success":d='<img class="icon-success icon-flag" src="'+q.BLANK_IMG+'" />',e="fs-alert-success-wrapper";break;case"failed":d='<img class="icon-failed icon-flag" src="'+q.BLANK_IMG+'" />',e="fs-alert-success-wrapper";break;default:d=""}g.alert('<div class="'+e+' fn-clear">'+d+'<span class="message-content">'+a+"</span></div>",b,c)},confirm:function(a,b,c,d){var e,f;switch(d=_.extend({className:"fs-confirm",closeTpl:"×",content:u.filter(".fs-show").html(),zIndex:2e3,hasMask:!0,messageType:"info"},d||{}),d.messageType){case"info":e='<img class="icon-info icon-flag" src="'+q.BLANK_IMG+'" />',f="fs-confirm-info-wrapper";break;case"success":e='<img class="icon-success icon-flag" src="'+q.BLANK_IMG+'" />',f="fs-confirm-success-wrapper";break;case"failed":e='<img class="icon-failed icon-flag" src="'+q.BLANK_IMG+'" />',f="fs-confirm-failed-wrapper";break;case"question":e='<img class="icon-question icon-flag" src="'+q.BLANK_IMG+'" />',f="fs-confirm-question-wrapper";break;default:e=""}g.confirm('<div class="'+f+' fn-clear">'+e+'<span class="message-content">'+a+"</span></div>",b,c,d)},digitUppercase:function(a){var b=["角","分"],c=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],d=[["元","万","亿"],["","拾","佰","仟"]],e=0>a?"欠":"";a=Math.abs(a);for(var f="",g=0;g<b.length;g++)f+=(c[Math.floor(10*a*Math.pow(10,g))%10]+b[g]).replace(/零./,"");f=f||"整",a=Math.floor(a);for(var g=0;g<d[0].length&&a>0;g++){for(var h="",i=0;i<d[1].length&&a>0;i++)h=c[a%10]+d[1][i]+h,a=Math.floor(a/10);f=h.replace(/(零.)*零$/,"").replace(/^$/,"零")+d[0][g]+f}return e+f.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")},getFileType:function(a){var b="common",c=a.name.toLowerCase();return/\.(?:jpg|jpeg|png|gif|bmp)$/.test(c)?b="jpg":/\.(?:doc|docx)$/.test(c)?b="doc":/\.(?:pdf)$/.test(c)?b="pdf":/\.(?:rar)$/.test(c)?b="rar":/\.(?:xls|xlsx)$/.test(c)?b="xls":/\.(?:zip)$/.test(c)?b="zip":/\.(?:ppt|pptx)$/.test(c)?b="ppt":/\.(?:txt)$/.test(c)&&(b="txt"),b},getFileSize:function(a){var b=0,c="BYTE";return a>1073741824?(b=(a/1073741824).toFixed(0),c="GB"):a>1048576?(b=(a/1048576).toFixed(0),c="MB"):a>1024?(b=(a/1024).toFixed(0),c="KB"):(b=a,c="B"),b+c},placeholder:function(a){j(a)},localStore:function(a,b,c){var d;return _.isUndefined(a)||_.isUndefined(b)?!1:(d=k.get(a)||{},_.isUndefined(c)?d[b]:(d[b]=c,k.set(a,d),c))},getContactDataByType:function(a,b){var c=[],d=function(a){return a.isGroup&&a.children&&a.children.length>0&&_.each(a.children,function(b){b.groupName=a.name,b.groupId=a.id,b.isGroup&&b.children&&b.children.length>0&&d(b)}),a},e=function(b){"person"!=a||b.isGroup?"group"==a&&b.isGroup&&c.push({id:b.id,name:b.name,spell:b.spell,groupName:b.groupName,groupId:b.groupId}):c.push({id:b.id,name:b.name,spell:b.spell,groupName:b.groupName,groupId:b.groupId}),b.children&&b.children.length>0&&_.each(b.children,function(a){e(a)})};return a=a||"person",b=d(b),e(b),c},regDocEvent:function(a,b){var c=function(a){b.apply(this,arguments),a.stopPropagation()};return o("body").on(a,c),c},unRegDocEvent:function(a,b){o("body").off(a,b)},regGlobalClick:function(){var a=[];return o("body").on("click",function(b){a=_.filter(a,function(a){var c=a.element,d=a.handler;return o.contains(document.body,c.get(0))?(d?d(b):c.hide(),!0):!1})}),function(b,c){a.push({element:o(b),handler:c})}}(),deepClone:function(a){return m.parse(m.stringify(a))},setInputFocusOne:function(a){var b=o(a);b.hasClass("fs-input-focus")||b.get(0).focus()},getCursorPosition:function(a){var b={text:"",start:0,end:0};if(t.setInputFocusOne(a),a.setSelectionRange)b.start=a.selectionStart,b.end=a.selectionEnd,b.text=b.start!=b.end?a.value.substring(b.start,b.end):"";else if(document.selection){var c,d=document.selection.createRange(),e=document.body.createTextRange();for(e.moveToElementText(a),b.text=d.text,b.bookmark=d.getBookmark(),c=0;e.compareEndPoints("StartToStart",d)<0&&0!==d.moveStart("character",-1);c++)"\n"==a.value.charAt(c)&&c++;b.start=c,b.end=b.text.length+b.start}return b},setCursorPosition:function(a,b){var c,d;if(!b)return alert("You must get cursor position first."),!1;if(c=b.start,d=b.end,a.setSelectionRange)t.setInputFocusOne(a),a.setSelectionRange(c,d);else if(a.createTextRange){var e,f,g=a.createTextRange();for(e=c,f=0;e>f;f++)-1!=a.value.charAt(f).search(/[\r\n]/)&&(c-=.5);for(e=d,f=0;e>f;f++)-1!=a.value.charAt(f).search(/[\r\n]/)&&(d-=.5);g.moveEnd("textedit",-1),g.moveStart("character",c),g.moveEnd("character",d-c),g.select()}},appendInput:function(a,b){var c=o(a),d=c.get(0),e=c.val(),f=t.getCursorPosition(d);c.val(e.slice(0,f.start)+b+e.slice(f.end)),t.setCursorPosition(d,_.extend(f,{start:f.start+b.length,end:f.start+b.length}))},setCursorPositionEnd:function(a){var b=o(a),c=b.val(),d=t.getCursorPosition(b.get(0));b.get(0).focus(),t.setCursorPosition(b.get(0),_.extend(d,{start:c.length,end:c.length}))},getTplQueryParams:function(a){a=a||location.href;var b,c=null;return-1!==a.indexOf("/=/")&&(b=a.slice(a.indexOf("/=/")+3),b.length>0&&(c={},b=b.split("/"),_.each(b,function(a){var b=a.split("-");c[b[0]]=decodeURI(b[1])}))),c},getCurrentTplName:function(){var a=location.href,b="";return-1!==a.indexOf("/=/")&&(a=a.slice(0,a.indexOf("/=/"))),-1!==a.indexOf("#")&&(a=a.slice(a.indexOf("#")+1)),a.length>0&&(b=a.split("/"),b=b.join("-")),b},regRefreshLink:function(a){var b=o(a);b.click(function(){var a=location.href,b=o(this).attr("href");a=a.slice(a.indexOf("#")+1),b=b.slice(b.indexOf("#")+1),a==b&&r.navRouter.navigate("",{trigger:!1})})},toggleAnimate:function(a){var b=o(a.element),c=a.startProperty,d=a.endProperty,e=a.animateOpts||{easing:"swing",duration:400},f=a.count,g=e.complete||q.EMPTY_FN,h=0;t.asyncOrder(["jslibs/jquery.color-2.1.2.min"],function(){!function(){var a=arguments.callee;b.animate(c,_.extend(e,{complete:function(){return b.animate(d,_.extend(e,{complete:function(){return h++,f>h&&a(),g.apply(this,arguments)}})),g.apply(this,arguments)}}))}()})},showInputError:function(a){t.toggleAnimate({element:o(a),startProperty:{backgroundColor:"#ff0000",opacity:.33},endProperty:{backgroundColor:"white",opacity:1},animateOpts:{easing:"swing",duration:130},count:2})},hideWithAbs:function(a,b){b=!!b;var c=o(a);b?c.addClass("fn-hide-abs"):c.removeClass("fn-hide-abs")},getContactData:function(){var a,b=function(a,b){var c=[];return _.each(a,function(a){var d={name:a.name,nickName:a.nickName||a.name,spell:a.spell.toLowerCase(),type:b};"p"==b?(d.id=a.employeeID,d.gender=a.gender,d.groupIDs=a.groupIDs||[],d.workingState=a.workingState||"",d.profileImagePath=a.profileImage||"",d.profileImage=t.getAvatarLink(d.profileImagePath,2)):(isNaN(a.memberCount)||(d.memberCount=a.memberCount),d.id=a.id),c.push(d)}),c};return function(c){var d,e,f,g,h;return!c&&a?a:(d=t.deepClone(q.getAppStore("contactData")),_.isUndefined(d.inviteEmployeeID)?(e=d.currentMember,f=d.members||[],g=d.groups||[],e.spell=e.spell.toLowerCase(),e.type="p",e.id=e.employeeID,e.groupIDs=e.groupIDs||[],e.functionPermissions=d.functionPermissions,e.isAdmin=d.isAdmin,e.enterpriseAccount=d.enterpriseAccount,e.account=d.account,e.workingState=e.workingState||"",e.mobile=d.mobile,e.isPhoneBound=d.isPhoneBound,e.boundEmployeeExmail=d.boundEmployeeExmail,e.allCompanyDefaultString=d.allCompanyDefaultString||"全公司",e.isDemoAccount=d.isDemoAccount,e.exmailDomain=d.exmailDomain,e.modules=d.modules,e.uploadFileSizeLimit=d.uploadFileSizeLimit,e.inVipService=d.inVipService,g.push({name:d.allCompanyDefaultString||"全公司",nickName:d.allCompanyDefaultString||"全公司",memberCount:f.length,id:"999999",spell:"quangongsi"}),e.profileImagePath=e.profileImage||"",e.profileImage=t.getAvatarLink(e.profileImagePath,2),h={p:b(f,"p"),g:b(g,"g"),u:e,v:d.version},a||(a=h),h):{u:{id:d.inviteEmployeeID}})}}(),getContactDataById:function(a,b){var c=t.getContactData(),d=c[b];return _.find(d,function(b){return b.id==a})},getContactDataByName:function(a,b){var c=t.getContactData(),d=c[b];return _.find(d,function(b){return b.name==a})},getEmployeeListByCircleId:function(a){var b=q.getAppStore("contactData"),c=b.allMembers;return c[parseInt(a)]||null},fetchPersonalConfig:function(){t.fetchEnterpriseConfig()},getPersonalConfig:function(a){var b=q.enterpriseConfig||{},c=b[151]||"";return c.length>0?(c=m.parse(c),c[a]):void 0},setPersonalConfig:function(a,b){var c=q.enterpriseConfig[151]||"";c=c.length>0?m.parse(c):{},c[a]=b,q.enterpriseConfig[151]=m.stringify(c)},updatePersonalConfig:function(){var a=q.enterpriseConfig[151];t.api({type:"post",dataType:"json",url:"/GlobalInfo/SetEnterpriseConfig",data:{value:a,key:"151"}})},fetchEnterpriseConfig:function(){var a,b,c=q.getAppStore("contactData");c?(a=c.profiles,b={},a.length>0?(_.each(a,function(a){b[a.value]=a.value1}),q.enterpriseConfig=b):q.enterpriseConfig={}):q.enterpriseConfig={}},getEnterpriseConfig:function(a,b){var c=q.enterpriseConfig||{},d=c[a]||"";return b&&(d=0==d.length?null:m.parse(d)),d},setEnterpriseConfig:function(a,b,c){var d=q.enterpriseConfig||{};c&&(b=m.stringify(b)),d[a]=b,q.enterpriseConfig=d},updateEnterpriseConfig:function(a,b){var c=q.enterpriseConfig;t.api({type:"post",dataType:"json",url:"/GlobalInfo/SetEnterpriseConfig",data:{value:c[a],key:a},success:function(a){b&&b.call(this,a)}})},regTplNav:function(){var a=[];return r.event.on("switched",function(){var b=location.href;b=-1!=b.indexOf("#")?encodeURI(b.toLowerCase().slice(b.indexOf("#"))):"#",a=_.filter(a,function(a){return o.contains(document.body,a.element.get(0))?!0:!1}),_.each(a,function(a){var c=a.element,d=a.hlCls,e=a.href,f=a.lightModel,g=b;"ignore"==f&&-1!=g.indexOf("/=/")&&(g=g.slice(0,g.indexOf("/=/"))),g==e?c.addClass(d):c.removeClass(d)}),_.each(a,function(b){var c=b.element,d=b.hlCls,e=c.attr("lightnav");c.hasClass(d)&&e&&(e=e.split(","),_.each(e,function(b){_.each(a,function(a){var c=a.element,d=a.hlCls,e=a.href;"true"!==c.attr("notracenav")&&b==e&&c.addClass(d)})}))})}),function(b,c){var d=o(b);c=c||"depw-menu-aon",d.each(function(){var b,d,e={},f=o(this);b=f.attr("navhref")||f.attr("href"),d=f.attr("lightmodel")||"with",-1!=b.indexOf("#")&&(b=b.slice(b.indexOf("#"))),b=b.toLowerCase(),_.extend(e,{element:f,hlCls:c,href:encodeURI(b),lightModel:d}),a.push(e)})}}(),showTip:function(a){var b,c=arguments.callee.tip,e=function(){var a=c.element,b=o(".arrows-wrapper",a),d=c.get("align"),e=d.baseElement;return 0==b.length&&(b=o('<div class="arrows-wrapper"></div>').appendTo(a),b.html('<div class="arrows-inner"></div>')),c.set("align",{selfXY:[0,0],baseElement:e,baseXY:[0,e.outerHeight()+8]}),b.removeClass("arrows-t arrows-b arrows-l arrows-r").addClass("arrows-t"),c};a=_.extend({baseElement:null,content:"<div></div>",afterShow:q.EMPTY_FN},a||{}),a.baseElement=o(a.baseElement),c||(c=new d({template:'<div class="fs-tip"></div>',zIndex:1e3}).render(),t.regGlobalClick(c.element,function(){c.element.is(":visible")&&c.hide()}),arguments.callee.tip=c),b=c.element,b.html(a.content),c.set("align",{selfXY:[0,0],baseElement:a.baseElement,baseXY:[0,a.baseElement.outerHeight()+8]}),c.on("after:show",function(){a.afterShow.call(c,e),c.off("after:show",arguments.callee)}),c.show()},getSourceNameFromCode:function(a){var b;switch(a=parseInt(a)){case 1:b="纷享销客";break;case 2:case 201:case 202:case 301:case 302:b="手机网页版";break;case 3:b="桌面版";break;case 203:b="iPhone";break;case 204:b="iPad";break;case 303:b="Android";break;case 304:b="Android HD";break;case 501:b="网页版";break;case 502:b="企业QQ";break;default:b="未知"}return b},getAttachTypeName:function(a){var b=[];return _.each(a,function(a){2==a.value?_.find(b,function(a){return"图片"==a})||b.push("图片"):3==a.value?_.find(b,function(a){return"附件"==a})||b.push("附件"):1==a.value&&(_.find(b,function(a){return"录音"==a})||b.push("录音"))}),b},getFeedTypeName:function(a){var b;switch(a=parseInt(a)){case 1:b="分享";break;case 2:b="日志";break;case 3:b="指令";break;case 4:b="审批";break;default:b="未知"}return b},getWorkStatusName:function(a){var b;switch(a=parseInt(a)){case 1:b="执行中";break;case 2:b="已完成";break;case 3:b="已取消";break;default:b=""}return b},getPlanTypeName:function(a){var b;switch(a=parseInt(a)){case 1:b="日志";break;case 2:b="周计划";break;case 3:b="月计划";break;default:b="未知"}return b},getApproveStatusName:function(a){var b;switch(a=parseInt(a)){case 1:b="待审批";break;case 2:b="同意";break;case 3:b="不同意";break;case 4:b="已取消";break;default:b=""}return b},getApproveOperationTypeName:function(a){var b;switch(a=parseInt(a)){case 1:b="同意";break;case 2:b="不同意";break;case 3:b="设置为已取消";break;default:b=""}return b},getWorkOperationTypeName:function(a){var b;switch(a=parseInt(a)){case 1:b="设置为已完成";break;case 2:b="设置为未完成";break;case 3:b="设置为已取消";break;case 4:b="点评工作";break;case 5:b="转他人执行";break;default:b=""}return b},getSmsRemindTypeName:function(a){var b;switch(a=parseInt(a)){case 1:b="不提醒";break;case 2:b="提前15分钟提醒";break;case 3:b="提前半小时提醒";break;case 4:b="提前1小时提醒";break;case 5:b="提前2小时提醒";break;case 6:b="提前6小时提醒";break;case 7:b="提前1天提醒";break;default:b="未知"}return b},getPlanOperationType:function(a){var b;switch(a=parseInt(a)){case 1:b="点评";break;case 2:b="设置为已取消";break;default:b=""}return b},changeToChineseNum:function(a){var b;switch(a=parseInt(a)){case 0:b="零";break;case 1:b="一";break;case 2:b="二";break;case 3:b="三";break;case 4:b="四";break;case 5:b="五";break;case 6:b="六";break;case 7:b="七";break;case 8:b="八";break;case 9:b="九";break;case 10:b="十";break;default:b="未知"}return b},getPublishRange:function(a){var b=t.getContactData(),c=b.u,d=c.groupIDs,e=[],f={parseData:function(a){var b=[].concat(a);return b},createHtml:function(a){var b,c,d=a.id;return c=a.value+"（"+t.getContactDataById(d,"g").memberCount+"）",b=o('<li class="ui-autocomplete-item"><a class="fs-prevent-default" href="javascript:;" title="'+c+'">'+c+"</a></li>")},eqFields:["id","type"],renderCb:function(a,b){var c,d=this,e=o(b),f=o(".ui-autocomplete-item",e).slice(3);f.length>0&&(c=o('<li class="visible-h state-hidden"><a href="javascript:;">展开部门&#8230;</a></li>'),c.appendTo(e),c.on("click",function(a){c.hasClass("state-hidden")?(f.show(),o("a",c).html("收起部门&#8230;"),c.removeClass("state-hidden")):(f.hide(),o("a",c).html("展开部门&#8230;"),c.addClass("state-hidden")),d.show(),a.stopPropagation()}),f.hide())}};d.length>0&&_.each(d,function(a,b){var c=t.getContactDataById(a,"g");e[b]={id:a,value:c.name,type:"g"}}),f.store=e;var g=[],h={parseData:function(a){var b=[];return b=b.concat(a)},createHtml:function(a){var b;return b=o('<li class="ui-autocomplete-item"><a class="fs-prevent-default" title="'+a.value+'" href="javascript:;">'+a.value+"</a></li>")},eqFields:["id","type"]};if(d.length>0&&g.push({id:d.join(","),value:"我的所有部门",name:"我的所有部门",type:"mix",validity:"no",valueType:"g"}),g.push({id:999999,value:c.allCompanyDefaultString,name:c.allCompanyDefaultString,type:"mix",validity:"no",valueType:"g"}),g.push({id:c.id,value:"我自己",type:"p"}),h.store=g,!a)return[f,h];if("circle"==a)return g.pop(),[f,h];var i=t.getPersonalConfig(a+"Employees"),j=t.getPersonalConfig(a+"Ranges"),k=[],l={parseData:function(a){var b=[].concat(a);return b},createHtml:function(a){var b;return b=o('<li class="ui-autocomplete-item"><a class="fs-prevent-default" href="javascript:;" title="'+a.value+'">'+a.value+"</a></li>")},eqFields:["id","type"]},m=[],n={parseData:function(a){var b=[],c=a.value.split(","),d=a.ids.split("|"),e=d[0].split(","),f=d[1].split(",");return _.each(e,function(a){b.push({value:c[b.length],id:a,type:"g"})}),_.each(f,function(a){b.push({value:c[b.length],id:a,type:"p"})}),b},createHtml:function(a){var b;return b=o('<li class="ui-autocomplete-item"><a class="fs-prevent-default" title="'+a.value+'" href="javascript:;">'+a.value+"</a></li>")},eqFields:["id","type"]};return _.each(i,function(a,b){k[b]={id:a.dataID,value:a.name,type:"p"}}),_.each(j,function(a,b){m[b]={ids:a.dataIDs,value:a.names,type:"mix"}}),l.store=k,n.store=m,[f,h,l,n]},getPublishDefaultUser:function(a){var b=t.getPersonalConfig(a),c=[],d={parseData:function(a){var b=[].concat(a);return b},createHtml:function(a){var b;return b=o('<li class="ui-autocomplete-item"><a class="fs-prevent-default" href="javascript:;" title="'+a.value+'">'+a.value+"</a></li>")},eqFields:["id","type"]};return _.each(b,function(a){var b=t.getContactDataById(a.dataID,"p");b&&c.push({id:a.dataID,value:a.name,type:"p"})}),d.store=c,[d]},getAtFromInput:function(a){var b,c=o(a),d=_.str.trim(c.val());return d.length>0&&(b=d.match(/@[\u4e00-\u9fa5\w-]+/g)),b=_.map(b,function(a){return a.slice(1)})},getDateSummaryDesc:function(a,b,c){var d;return _.isUndefined(c)&&(c=b,b=n()),a=n(a),b=n(b),1==c?(d=parseInt(b.diff(a,"seconds")),60>d?10>d?"几秒前":d+"秒前":(d=parseInt(b.diff(a,"minutes")),60>d?1==d?"1分钟前":d+"分钟前":(d=parseInt(n(b).startOf("day").diff(n(a).startOf("day"),"days")),0==d?"今天 "+a.format("HH:mm"):1==d?"昨天 "+a.format("HH:mm"):(d=parseInt(n(b).startOf("year").diff(n(a).startOf("year"),"years")),0==d?a.format("MM月DD日 HH:mm"):a.format("YYYY年MM月DD日 HH:mm"))))):(d=parseInt(n(b).startOf("day").diff(n(a).startOf("day"),"days")),0==d?"今天 "+a.format("HH:mm"):-1==d?"明天 "+a.format("HH:mm"):-2==d?"后天 "+a.format("HH:mm"):1==d?"昨天 "+a.format("HH:mm"):2==d?"前天 "+a.format("HH:mm"):(d=parseInt(n(b).startOf("year").diff(n(a).startOf("year"),"years")),0==d?a.format("MM月DD日 HH:mm"):a.format("YYYY年MM月DD日 HH:mm")))},getDfLink:function(a,b,c,d){var e;return b=encodeURIComponent(b),d?a=a+"."+d:d=t.getFileExtText(a),e=c?q.API_PATH+"/df/get?id="+a+"&name="+b+"&isAttachment="+c+"&extendInfo="+d:q.API_PATH+"/df/get?id="+a},getDfGlobalLink:function(a,b,c,d){var e;return b=encodeURIComponent(b),d?a=a+"."+d:d=t.getFileExtText(a),e=c?q.API_PATH+"/DF/GetGlobal?id="+a+"&name="+b+"&isAttachment="+c+"&extendInfo="+d:q.API_PATH+"//DF/GetGlobal?id="+a},getAvatarLink:function(a,b){return a&&a.length>0?t.getDfLink(a+b+".jpg","",!1):q.ASSETS_PATH+"/images/employee_default_120_120.png"},getFileExtText:function(a){var b,c=a.lastIndexOf(".");return b=-1==c?"":a.slice(c+1)},getFileNamePath:function(a){var b,c=a.lastIndexOf(".");return b=-1==c?a:a.slice(0,c)},getUploadType:function(a){var b="";return b=/\.(?:jpg|jpeg|png|gif)$/i.test(a)?"img":"attach"},setFullScreen:function(a){var b=o("html");o("body"),a?(b.data("overflowY")||b.data("overflowY",b.css("overflow-y")),b.css("overflow-y","hidden")):b.css("overflow-y",b.data("overflowY")||"scroll")},toListTop:function(a,b,c){return _.some(a,c)?(a=_.reject(a,c),a.unshift(b)):a.unshift(b),a},getLocationInfo:function(a){var b="";return"中国"!=a.country&&(b+=a.country),a.province!=a.city&&(b+=a.province),_.each([a.city,a.district,a.street,a.streetNumber],function(a){a.length>0&&(b+=a)}),b},isNatureCode:function(a){var b,c=[],d=[],e=[];for(b=48;57>b;b++)c.push(b);for(b=65;90>b;b++)d.push(b);return e.push(32),e.push(13),_.contains([].concat(c,d,e),a)},mix:function(a,b){var c,d=Array.apply([],arguments),e=1,f="boolean"==typeof d[d.length-1]?d.pop():!0;for(1===d.length&&(a=this.window?{}:this,e=0);b=d[e++];)for(c in b)!b.hasOwnProperty(c)||!f&&c in a||(a[c]=b[c]);return a},getAttachSourceName:function(a){var b;switch(a=parseInt(a)){case 1:b="feed";break;case 2:b="reply";break;case 3:b="qx";break;case 4:b="email";break;default:b="unknown"}return b},isArrayElementEq:function(a,b){var c=!0;return a.length!=b.length?!1:(_.some(a,function(a){return _.contains(b,a)?void 0:(c=!1,!0)}),c)},excludeContactData:function(a,b){var c=t.getContactData();return a=[].concat(a),b=b||"p",_.reject(c[b],function(b){return _.some(a,function(a){return b.id==a})})},excludeDataByKey:function(a,b,c){return a=[].concat(a),_.reject(c,function(c){return _.some(a,function(a){return c[b]==a})})},hideAllFloatWins:function(){i.hideAll(),o(".fs-float-win").each(function(){h.query(this).hide()})},showSucessTip:function(){var a=new i({className:"fs-success-tip",content:"success",width:"auto",visibleWithAnimate:!0});return function(b){var c;a.rendered||a.render(),c=a.element,c.html('<img src="'+q.BLANK_IMG+'" class="icon-success" /><span class="tip-content">'+b+"</span>"),a.show(),setTimeout(function(){a.hide()},1e3)}}(),showGuideTip:function(){var a,b=[],c=function(a){var b=a.element,c=a.leftBracket,d=a.rightBracket,e=a.opts,f=b.outerWidth(),g=b.outerHeight(),h=b.offset();c.height(g+e.leftHeightIncrement),c.css({top:h.top+e.leftTopIncrement+"px",left:h.left-c.width()+e.leftLeftIncrement+"px"}),d.height(g+e.rightHeightIncrement),d.css({top:h.top+e.rightTopIncrement+"px",left:h.left+f+e.rightLeftIncrement+"px"})};return o(p).resize(function(){clearTimeout(a),a=setTimeout(function(){b=_.filter(b,function(a){return o.contains(o("body")[0],a.leftBracket[0])}),_.each(b,function(a){c(a)})},100)}),r.event.on("switched",function(){_.each(b,function(a){var b=a.element,d=a.leftBracket,e=a.rightBracket;b.is(":hidden")?(d.hide(),e.hide()):(d.show(),e.show(),c(a))})}),function(a,d){var e,f,g,h,i=o(a);d=_.extend({leftLeftIncrement:0,leftTopIncrement:0,leftHeightIncrement:0,rightLeftIncrement:0,rightTopIncrement:0,rightHeightIncrement:0,imageName:"",imageDescription:"",imagePlace:"right",imagePosition:{top:0,left:"16px"},renderCb:q.EMPTY_FN},d||{}),0==i.length||i.is(":hidden")||i.data("noguide")||"yes"==i.attr("noguide")||(f=o('<div class="fs-guide-left-bracket fs-guide-bracket"></div>'),g=o('<div class="fs-guide-right-bracket fs-guide-bracket"></div>'),f.appendTo("body"),g.appendTo("body"),e={element:i,leftBracket:f,rightBracket:g,opts:d},e[d.imagePlace+"Bracket"].html('<div class="fs-guide-image-wrapper"><img class="fs-guide-image" src="'+q.ASSETS_PATH+"/images/guide/"+d.imageName+'" alt="'+d.imageDescription+'" /></div>'),h=o(".fs-guide-image-wrapper",e[d.imagePlace+"Bracket"]),h.css(_.extend({position:"absolute"},d.imagePosition)),d.renderCb.call(this,h,f,g,i),c(e),b.push(e))}}()}),q.util=t,c.exports=t});